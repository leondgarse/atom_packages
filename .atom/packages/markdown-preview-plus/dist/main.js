var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};var t,n,{pathToFileURL:r}=require("url"),i=require("child_process"),o=require("electron"),a=(t={},n=o,Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})})),t),{remote:s,shell:u}=o,c=require("fs"),l=c,{existsSync:f,lstatSync:d,writeFile:h}=c,{Emitter:p,CompositeDisposable:v,Range:m,File:g,TextBuffer:y,Disposable:w,TextEditor:b}=require("atom"),k=require("path"),_=k,{sep:S}=k;Object.defineProperty(exports,"__esModule",{value:!0});var x=function(){(0,Vo.migrateConfig)()&&atom.notifications.addInfo("Markdown-Preivew-Plus has updated your config to a new format. Please check if everything is in order. This message will not be shown again.",{dismissable:!0});atom.packages.isPackageActive("markdown-preview")&&zo.handlePromise(atom.packages.deactivatePackage("markdown-preview"));atom.packages.isPackageDisabled("markdown-preview")||(atom.packages.disablePackage("markdown-preview"),atom.notifications.addInfo("Markdown-preview-plus has disabled markdown-preview package.",{dismissable:!0}));ps=new v,ps.add(atom.commands.add(".markdown-preview-plus",{"markdown-preview-plus:toggle":ms}),atom.commands.add("atom-workspace",{"markdown-preview-plus:open-configuration":()=>{zo.handlePromise(atom.workspace.open("atom://config/packages/markdown-preview-plus"))},"markdown-preview-plus:edit-macros":()=>{zo.handlePromise(atom.workspace.open((0,Ce.getUserMacrosPath)(atom.getConfigDirPath())))},"markdown-preview-plus:select-syntax-theme":async()=>{try{const e=atom.themes.getLoadedThemeNames();if(void 0===e)return;const t=await(0,Ko.selectListView)(e.filter((e=>e.match(/-syntax$/))));if(void 0===t)return;atom.config.set("markdown-preview-plus.syntaxThemeName",t)}catch(e){const t=e;atom.notifications.addFatalError(t.name,{detail:t.message,stack:t.stack})}}}),atom.commands.add("atom-text-editor",{"markdown-preview-plus:toggle-render-latex":e=>{const t=e.currentTarget.getModel(),n=(0,M.viewForEditor)(t);n&&n.toggleRenderLatex()}}),atom.commands.add(".markdown-preview-plus",{"markdown-preview-plus:toggle-render-latex":e=>{const t=M.MarkdownPreviewView.viewForElement(e.currentTarget);t&&t.toggleRenderLatex()}}),atom.commands.add(".tree-view",{"markdown-preview-plus:preview-file":ws,"markdown-preview-plus:make-pdf":xs}),atom.workspace.addOpener(Ps),atom.config.observe("markdown-preview-plus.grammars",ks(Ss)),atom.config.observe("markdown-preview-plus.extensions",ks(_s)),atom.config.observe("markdown-preview-plus.disableToolBarIntegration",ks(Os)),new w((function(){var e;null===(e=vs)||void 0===e||e.removeItems()})))};exports.activate=x;var P=function(){bi.MarkdownItWorker.destroy(),ps&&ps.dispose(),ps=void 0,vs=void 0,no.BrowserWindowHandler.clean()};exports.deactivate=P;var O=function(e){if(void 0!==e.editorId)return new Uo.PlaceholderView(e.editorId);if(e.filePath&&zo.isFileSync(e.filePath))return(0,M.createFileView)(e.filePath);if(e.text)return(0,M.createTextView)(e.text);return};exports.createMarkdownPreviewView=O;var C=function(e){return vs=e("markdown-preview-plus"),new w((()=>{vs=void 0}))};exports.consumeToolBar=C,Object.defineProperty(exports,"config",{enumerable:!0,get:function(){return cs.config}});var M={};Object.defineProperty(M,"__esModule",{value:!0});var E={MarkdownPreviewView:!0};Object.defineProperty(M,"MarkdownPreviewView",{enumerable:!0,get:function(){return I.MarkdownPreviewView}});var I={};Object.defineProperty(I,"__esModule",{value:!0});var j=void 0;I.MarkdownPreviewView=j;var A=Fo(_),L=function(){var t=this,n={exports:this};return function(){var r,i="Expected a function",o="__lodash_hash_undefined__",a="__lodash_placeholder__",s=16,u=32,c=64,l=128,f=256,d=1/0,h=9007199254740991,p=NaN,v=4294967295,m=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",s],["flip",512],["partial",u],["partialRight",c],["rearg",f]],g="[object Arguments]",y="[object Array]",w="[object Boolean]",b="[object Date]",k="[object Error]",_="[object Function]",S="[object GeneratorFunction]",x="[object Map]",P="[object Number]",O="[object Object]",C="[object Promise]",M="[object RegExp]",E="[object Set]",I="[object String]",j="[object Symbol]",A="[object WeakMap]",L="[object ArrayBuffer]",T="[object DataView]",N="[object Float32Array]",R="[object Float64Array]",F="[object Int8Array]",D="[object Int16Array]",B="[object Int32Array]",W="[object Uint8Array]",$="[object Uint8ClampedArray]",z="[object Uint16Array]",U="[object Uint32Array]",q=/\b__p \+= '';/g,H=/\b(__p \+=) '' \+/g,V=/(__e\(.*?\)|\b__t\)) \+\n'';/g,J=/&(?:amp|lt|gt|quot|#39);/g,Y=/[&<>"']/g,G=RegExp(J.source),K=RegExp(Y.source),X=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,Z=/<%=([\s\S]+?)%>/g,ee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,te=/^\w*$/,ne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,re=/[\\^$.*+?()[\]{}|]/g,ie=RegExp(re.source),oe=/^\s+/,ae=/\s/,se=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ue=/\{\n\/\* \[wrapped with (.+)\] \*/,ce=/,? & /,le=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,fe=/[()=,{}\[\]\/\s]/,de=/\\(\\)?/g,he=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pe=/\w*$/,ve=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,ge=/^\[object .+?Constructor\]$/,ye=/^0o[0-7]+$/i,we=/^(?:0|[1-9]\d*)$/,be=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ke=/($^)/,_e=/['\n\r\u2028\u2029\\]/g,Se="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",xe="\\u2700-\\u27bf",Pe="a-z\\xdf-\\xf6\\xf8-\\xff",Oe="A-Z\\xc0-\\xd6\\xd8-\\xde",Ce="\\ufe0e\\ufe0f",Me="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ee="['’]",Ie="[\\ud800-\\udfff]",je="["+Me+"]",Ae="["+Se+"]",Le="\\d+",Te="[\\u2700-\\u27bf]",Ne="["+Pe+"]",Re="[^\\ud800-\\udfff"+Me+Le+xe+Pe+Oe+"]",Fe="\\ud83c[\\udffb-\\udfff]",De="[^\\ud800-\\udfff]",Be="(?:\\ud83c[\\udde6-\\uddff]){2}",We="[\\ud800-\\udbff][\\udc00-\\udfff]",$e="["+Oe+"]",ze="(?:"+Ne+"|"+Re+")",Ue="(?:"+$e+"|"+Re+")",qe="(?:['’](?:d|ll|m|re|s|t|ve))?",He="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ve="(?:"+Ae+"|"+Fe+")"+"?",Je="[\\ufe0e\\ufe0f]?",Ye=Je+Ve+("(?:\\u200d(?:"+[De,Be,We].join("|")+")"+Je+Ve+")*"),Ge="(?:"+[Te,Be,We].join("|")+")"+Ye,Ke="(?:"+[De+Ae+"?",Ae,Be,We,Ie].join("|")+")",Xe=RegExp(Ee,"g"),Qe=RegExp(Ae,"g"),Ze=RegExp(Fe+"(?="+Fe+")|"+Ke+Ye,"g"),et=RegExp([$e+"?"+Ne+"+"+qe+"(?="+[je,$e,"$"].join("|")+")",Ue+"+"+He+"(?="+[je,$e+ze,"$"].join("|")+")",$e+"?"+ze+"+"+qe,$e+"+"+He,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Le,Ge].join("|"),"g"),tt=RegExp("[\\u200d\\ud800-\\udfff"+Se+Ce+"]"),nt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,rt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],it=-1,ot={};ot[N]=ot[R]=ot[F]=ot[D]=ot[B]=ot[W]=ot[$]=ot[z]=ot[U]=!0,ot[g]=ot[y]=ot[L]=ot[w]=ot[T]=ot[b]=ot[k]=ot[_]=ot[x]=ot[P]=ot[O]=ot[M]=ot[E]=ot[I]=ot[A]=!1;var at={};at[g]=at[y]=at[L]=at[T]=at[w]=at[b]=at[N]=at[R]=at[F]=at[D]=at[B]=at[x]=at[P]=at[O]=at[M]=at[E]=at[I]=at[j]=at[W]=at[$]=at[z]=at[U]=!0,at[k]=at[_]=at[A]=!1;var st={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ut=parseFloat,ct=parseInt,lt="object"==typeof e&&e&&e.Object===Object&&e,ft="object"==typeof self&&self&&self.Object===Object&&self,dt=lt||ft||Function("return this")(),ht="object"==typeof t&&t&&!t.nodeType&&t,pt=ht&&"object"==typeof n&&n&&!n.nodeType&&n,vt=pt&&pt.exports===ht,mt=vt&&lt.process,gt=function(){try{var e=pt&&pt.require&&pt.require("util").types;return e||mt&&mt.binding&&mt.binding("util")}catch(e){}}(),yt=gt&&gt.isArrayBuffer,wt=gt&&gt.isDate,bt=gt&&gt.isMap,kt=gt&&gt.isRegExp,_t=gt&&gt.isSet,St=gt&&gt.isTypedArray;function xt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Pt(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function Ot(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Ct(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Mt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Et(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function It(e,t){return!!(null==e?0:e.length)&&Wt(e,t,0)>-1}function jt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function At(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Lt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Tt(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function Nt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Rt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Ft=qt("length");function Dt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Bt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function Wt(e,t,n){return t==t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Bt(e,zt,n)}function $t(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function zt(e){return e!=e}function Ut(e,t){var n=null==e?0:e.length;return n?Jt(e,t)/n:p}function qt(e){return function(t){return null==t?r:t[e]}}function Ht(e){return function(t){return null==e?r:e[t]}}function Vt(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Jt(e,t){for(var n,i=-1,o=e.length;++i<o;){var a=t(e[i]);a!==r&&(n=n===r?a:n+a)}return n}function Yt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Gt(e){return e?e.slice(0,pn(e)+1).replace(oe,""):e}function Kt(e){return function(t){return e(t)}}function Xt(e,t){return At(t,(function(t){return e[t]}))}function Qt(e,t){return e.has(t)}function Zt(e,t){for(var n=-1,r=e.length;++n<r&&Wt(t,e[n],0)>-1;);return n}function en(e,t){for(var n=e.length;n--&&Wt(t,e[n],0)>-1;);return n}function tn(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var nn=Ht({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),rn=Ht({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function on(e){return"\\"+st[e]}function an(e){return tt.test(e)}function sn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function un(e,t){return function(n){return e(t(n))}}function cn(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n];s!==t&&s!==a||(e[n]=a,o[i++]=n)}return o}function ln(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function fn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function dn(e){return an(e)?function(e){var t=Ze.lastIndex=0;for(;Ze.test(e);)++t;return t}(e):Ft(e)}function hn(e){return an(e)?function(e){return e.match(Ze)||[]}(e):function(e){return e.split("")}(e)}function pn(e){for(var t=e.length;t--&&ae.test(e.charAt(t)););return t}var vn=Ht({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var mn=function e(t){var n,ae=(t=null==t?dt:mn.defaults(dt.Object(),t,mn.pick(dt,rt))).Array,Se=t.Date,xe=t.Error,Pe=t.Function,Oe=t.Math,Ce=t.Object,Me=t.RegExp,Ee=t.String,Ie=t.TypeError,je=ae.prototype,Ae=Pe.prototype,Le=Ce.prototype,Te=t["__core-js_shared__"],Ne=Ae.toString,Re=Le.hasOwnProperty,Fe=0,De=(n=/[^.]+$/.exec(Te&&Te.keys&&Te.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Be=Le.toString,We=Ne.call(Ce),$e=dt._,ze=Me("^"+Ne.call(Re).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ue=vt?t.Buffer:r,qe=t.Symbol,He=t.Uint8Array,Ve=Ue?Ue.allocUnsafe:r,Je=un(Ce.getPrototypeOf,Ce),Ye=Ce.create,Ge=Le.propertyIsEnumerable,Ke=je.splice,Ze=qe?qe.isConcatSpreadable:r,tt=qe?qe.iterator:r,st=qe?qe.toStringTag:r,lt=function(){try{var e=po(Ce,"defineProperty");return e({},"",{}),e}catch(e){}}(),ft=t.clearTimeout!==dt.clearTimeout&&t.clearTimeout,ht=Se&&Se.now!==dt.Date.now&&Se.now,pt=t.setTimeout!==dt.setTimeout&&t.setTimeout,mt=Oe.ceil,gt=Oe.floor,Ft=Ce.getOwnPropertySymbols,Ht=Ue?Ue.isBuffer:r,gn=t.isFinite,yn=je.join,wn=un(Ce.keys,Ce),bn=Oe.max,kn=Oe.min,_n=Se.now,Sn=t.parseInt,xn=Oe.random,Pn=je.reverse,On=po(t,"DataView"),Cn=po(t,"Map"),Mn=po(t,"Promise"),En=po(t,"Set"),In=po(t,"WeakMap"),jn=po(Ce,"create"),An=In&&new In,Ln={},Tn=$o(On),Nn=$o(Cn),Rn=$o(Mn),Fn=$o(En),Dn=$o(In),Bn=qe?qe.prototype:r,Wn=Bn?Bn.valueOf:r,$n=Bn?Bn.toString:r;function zn(e){if(is(e)&&!Ja(e)&&!(e instanceof Vn)){if(e instanceof Hn)return e;if(Re.call(e,"__wrapped__"))return zo(e)}return new Hn(e)}var Un=function(){function e(){}return function(t){if(!rs(t))return{};if(Ye)return Ye(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function qn(){}function Hn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}function Vn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=v,this.__views__=[]}function Jn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Yn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Gn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Kn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Gn;++t<n;)this.add(e[t])}function Xn(e){var t=this.__data__=new Yn(e);this.size=t.size}function Qn(e,t){var n=Ja(e),r=!n&&Va(e),i=!n&&!r&&Xa(e),o=!n&&!r&&!i&&ds(e),a=n||r||i||o,s=a?Yt(e.length,Ee):[],u=s.length;for(var c in e)!t&&!Re.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ko(c,u))||s.push(c);return s}function Zn(e){var t=e.length;return t?e[Kr(0,t-1)]:r}function er(e,t){return Do(ji(e),cr(t,0,e.length))}function tr(e){return Do(ji(e))}function nr(e,t,n){(n!==r&&!Ua(e[t],n)||n===r&&!(t in e))&&sr(e,t,n)}function rr(e,t,n){var i=e[t];Re.call(e,t)&&Ua(i,n)&&(n!==r||t in e)||sr(e,t,n)}function ir(e,t){for(var n=e.length;n--;)if(Ua(e[n][0],t))return n;return-1}function or(e,t,n,r){return pr(e,(function(e,i,o){t(r,e,n(e),o)})),r}function ar(e,t){return e&&Ai(t,Ts(t),e)}function sr(e,t,n){"__proto__"==t&&lt?lt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ur(e,t){for(var n=-1,i=t.length,o=ae(i),a=null==e;++n<i;)o[n]=a?r:Es(e,t[n]);return o}function cr(e,t,n){return e==e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function lr(e,t,n,i,o,a){var s,u=1&t,c=2&t,l=4&t;if(n&&(s=o?n(e,i,o,a):n(e)),s!==r)return s;if(!rs(e))return e;var f=Ja(e);if(f){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Re.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!u)return ji(e,s)}else{var d=go(e),h=d==_||d==S;if(Xa(e))return Pi(e,u);if(d==O||d==g||h&&!o){if(s=c||h?{}:wo(e),!u)return c?function(e,t){return Ai(e,mo(e),t)}(e,function(e,t){return e&&Ai(t,Ns(t),e)}(s,e)):function(e,t){return Ai(e,vo(e),t)}(e,ar(s,e))}else{if(!at[d])return o?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case L:return Oi(e);case w:case b:return new r(+e);case T:return function(e,t){var n=t?Oi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case N:case R:case F:case D:case B:case W:case $:case z:case U:return Ci(e,n);case x:return new r;case P:case I:return new r(e);case M:return function(e){var t=new e.constructor(e.source,pe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case E:return new r;case j:return i=e,Wn?Ce(Wn.call(i)):{}}var i}(e,d,u)}}a||(a=new Xn);var p=a.get(e);if(p)return p;a.set(e,s),cs(e)?e.forEach((function(r){s.add(lr(r,t,n,r,e,a))})):os(e)&&e.forEach((function(r,i){s.set(i,lr(r,t,n,i,e,a))}));var v=f?r:(l?c?ao:oo:c?Ns:Ts)(e);return Ot(v||e,(function(r,i){v&&(r=e[i=r]),rr(s,i,lr(r,t,n,i,e,a))})),s}function fr(e,t,n){var i=n.length;if(null==e)return!i;for(e=Ce(e);i--;){var o=n[i],a=t[o],s=e[o];if(s===r&&!(o in e)||!a(s))return!1}return!0}function dr(e,t,n){if("function"!=typeof e)throw new Ie(i);return To((function(){e.apply(r,n)}),t)}function hr(e,t,n,r){var i=-1,o=It,a=!0,s=e.length,u=[],c=t.length;if(!s)return u;n&&(t=At(t,Kt(n))),r?(o=jt,a=!1):t.length>=200&&(o=Qt,a=!1,t=new Kn(t));e:for(;++i<s;){var l=e[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,a&&f==f){for(var d=c;d--;)if(t[d]===f)continue e;u.push(l)}else o(t,f,r)||u.push(l)}return u}zn.templateSettings={escape:X,evaluate:Q,interpolate:Z,variable:"",imports:{_:zn}},zn.prototype=qn.prototype,zn.prototype.constructor=zn,Hn.prototype=Un(qn.prototype),Hn.prototype.constructor=Hn,Vn.prototype=Un(qn.prototype),Vn.prototype.constructor=Vn,Jn.prototype.clear=function(){this.__data__=jn?jn(null):{},this.size=0},Jn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Jn.prototype.get=function(e){var t=this.__data__;if(jn){var n=t[e];return n===o?r:n}return Re.call(t,e)?t[e]:r},Jn.prototype.has=function(e){var t=this.__data__;return jn?t[e]!==r:Re.call(t,e)},Jn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=jn&&t===r?o:t,this},Yn.prototype.clear=function(){this.__data__=[],this.size=0},Yn.prototype.delete=function(e){var t=this.__data__,n=ir(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ke.call(t,n,1),--this.size,!0)},Yn.prototype.get=function(e){var t=this.__data__,n=ir(t,e);return n<0?r:t[n][1]},Yn.prototype.has=function(e){return ir(this.__data__,e)>-1},Yn.prototype.set=function(e,t){var n=this.__data__,r=ir(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Gn.prototype.clear=function(){this.size=0,this.__data__={hash:new Jn,map:new(Cn||Yn),string:new Jn}},Gn.prototype.delete=function(e){var t=fo(this,e).delete(e);return this.size-=t?1:0,t},Gn.prototype.get=function(e){return fo(this,e).get(e)},Gn.prototype.has=function(e){return fo(this,e).has(e)},Gn.prototype.set=function(e,t){var n=fo(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Kn.prototype.add=Kn.prototype.push=function(e){return this.__data__.set(e,o),this},Kn.prototype.has=function(e){return this.__data__.has(e)},Xn.prototype.clear=function(){this.__data__=new Yn,this.size=0},Xn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Xn.prototype.get=function(e){return this.__data__.get(e)},Xn.prototype.has=function(e){return this.__data__.has(e)},Xn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Yn){var r=n.__data__;if(!Cn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Gn(r)}return n.set(e,t),this.size=n.size,this};var pr=Ni(_r),vr=Ni(Sr,!0);function mr(e,t){var n=!0;return pr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function gr(e,t,n){for(var i=-1,o=e.length;++i<o;){var a=e[i],s=t(a);if(null!=s&&(u===r?s==s&&!fs(s):n(s,u)))var u=s,c=a}return c}function yr(e,t){var n=[];return pr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function wr(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=bo),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?wr(s,t-1,n,r,i):Lt(i,s):r||(i[i.length]=s)}return i}var br=Ri(),kr=Ri(!0);function _r(e,t){return e&&br(e,t,Ts)}function Sr(e,t){return e&&kr(e,t,Ts)}function xr(e,t){return Et(t,(function(t){return es(e[t])}))}function Pr(e,t){for(var n=0,i=(t=ki(t,e)).length;null!=e&&n<i;)e=e[Wo(t[n++])];return n&&n==i?e:r}function Or(e,t,n){var r=t(e);return Ja(e)?r:Lt(r,n(e))}function Cr(e){return null==e?e===r?"[object Undefined]":"[object Null]":st&&st in Ce(e)?function(e){var t=Re.call(e,st),n=e[st];try{e[st]=r;var i=!0}catch(e){}var o=Be.call(e);i&&(t?e[st]=n:delete e[st]);return o}(e):function(e){return Be.call(e)}(e)}function Mr(e,t){return e>t}function Er(e,t){return null!=e&&Re.call(e,t)}function Ir(e,t){return null!=e&&t in Ce(e)}function jr(e,t,n){for(var i=n?jt:It,o=e[0].length,a=e.length,s=a,u=ae(a),c=1/0,l=[];s--;){var f=e[s];s&&t&&(f=At(f,Kt(t))),c=kn(f.length,c),u[s]=!n&&(t||o>=120&&f.length>=120)?new Kn(s&&f):r}f=e[0];var d=-1,h=u[0];e:for(;++d<o&&l.length<c;){var p=f[d],v=t?t(p):p;if(p=n||0!==p?p:0,!(h?Qt(h,v):i(l,v,n))){for(s=a;--s;){var m=u[s];if(!(m?Qt(m,v):i(e[s],v,n)))continue e}h&&h.push(v),l.push(p)}}return l}function Ar(e,t,n){var i=null==(e=Io(e,t=ki(t,e)))?e:e[Wo(Zo(t))];return null==i?r:xt(i,e,n)}function Lr(e){return is(e)&&Cr(e)==g}function Tr(e,t,n,i,o){return e===t||(null==e||null==t||!is(e)&&!is(t)?e!=e&&t!=t:function(e,t,n,i,o,a){var s=Ja(e),u=Ja(t),c=s?y:go(e),l=u?y:go(t),f=(c=c==g?O:c)==O,d=(l=l==g?O:l)==O,h=c==l;if(h&&Xa(e)){if(!Xa(t))return!1;s=!0,f=!1}if(h&&!f)return a||(a=new Xn),s||ds(e)?ro(e,t,n,i,o,a):function(e,t,n,r,i,o,a){switch(n){case T:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case L:return!(e.byteLength!=t.byteLength||!o(new He(e),new He(t)));case w:case b:case P:return Ua(+e,+t);case k:return e.name==t.name&&e.message==t.message;case M:case I:return e==t+"";case x:var s=sn;case E:var u=1&r;if(s||(s=ln),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var l=ro(s(e),s(t),r,i,o,a);return a.delete(e),l;case j:if(Wn)return Wn.call(e)==Wn.call(t)}return!1}(e,t,c,n,i,o,a);if(!(1&n)){var p=f&&Re.call(e,"__wrapped__"),v=d&&Re.call(t,"__wrapped__");if(p||v){var m=p?e.value():e,_=v?t.value():t;return a||(a=new Xn),o(m,_,n,i,a)}}if(!h)return!1;return a||(a=new Xn),function(e,t,n,i,o,a){var s=1&n,u=oo(e),c=u.length,l=oo(t).length;if(c!=l&&!s)return!1;var f=c;for(;f--;){var d=u[f];if(!(s?d in t:Re.call(t,d)))return!1}var h=a.get(e),p=a.get(t);if(h&&p)return h==t&&p==e;var v=!0;a.set(e,t),a.set(t,e);var m=s;for(;++f<c;){var g=e[d=u[f]],y=t[d];if(i)var w=s?i(y,g,d,t,e,a):i(g,y,d,e,t,a);if(!(w===r?g===y||o(g,y,n,i,a):w)){v=!1;break}m||(m="constructor"==d)}if(v&&!m){var b=e.constructor,k=t.constructor;b==k||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof k&&k instanceof k||(v=!1)}return a.delete(e),a.delete(t),v}(e,t,n,i,o,a)}(e,t,n,i,Tr,o))}function Nr(e,t,n,i){var o=n.length,a=o,s=!i;if(null==e)return!a;for(e=Ce(e);o--;){var u=n[o];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<a;){var c=(u=n[o])[0],l=e[c],f=u[1];if(s&&u[2]){if(l===r&&!(c in e))return!1}else{var d=new Xn;if(i)var h=i(l,f,c,e,t,d);if(!(h===r?Tr(f,l,3,i,d):h))return!1}}return!0}function Rr(e){return!(!rs(e)||(t=e,De&&De in t))&&(es(e)?ze:ge).test($o(e));var t}function Fr(e){return"function"==typeof e?e:null==e?au:"object"==typeof e?Ja(e)?Ur(e[0],e[1]):zr(e):vu(e)}function Dr(e){if(!Oo(e))return wn(e);var t=[];for(var n in Ce(e))Re.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Br(e){if(!rs(e))return function(e){var t=[];if(null!=e)for(var n in Ce(e))t.push(n);return t}(e);var t=Oo(e),n=[];for(var r in e)("constructor"!=r||!t&&Re.call(e,r))&&n.push(r);return n}function Wr(e,t){return e<t}function $r(e,t){var n=-1,r=Ga(e)?ae(e.length):[];return pr(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}function zr(e){var t=ho(e);return 1==t.length&&t[0][2]?Mo(t[0][0],t[0][1]):function(n){return n===e||Nr(n,e,t)}}function Ur(e,t){return So(e)&&Co(t)?Mo(Wo(e),t):function(n){var i=Es(n,e);return i===r&&i===t?Is(n,e):Tr(t,i,3)}}function qr(e,t,n,i,o){e!==t&&br(t,(function(a,s){if(o||(o=new Xn),rs(a))!function(e,t,n,i,o,a,s){var u=Ao(e,n),c=Ao(t,n),l=s.get(c);if(l)return void nr(e,n,l);var f=a?a(u,c,n+"",e,t,s):r,d=f===r;if(d){var h=Ja(c),p=!h&&Xa(c),v=!h&&!p&&ds(c);f=c,h||p||v?Ja(u)?f=u:Ka(u)?f=ji(u):p?(d=!1,f=Pi(c,!0)):v?(d=!1,f=Ci(c,!0)):f=[]:ss(c)||Va(c)?(f=u,Va(u)?f=bs(u):rs(u)&&!es(u)||(f=wo(c))):d=!1}d&&(s.set(c,f),o(f,c,i,a,s),s.delete(c));nr(e,n,f)}(e,t,s,n,qr,i,o);else{var u=i?i(Ao(e,s),a,s+"",e,t,o):r;u===r&&(u=a),nr(e,s,u)}}),Ns)}function Hr(e,t){var n=e.length;if(n)return ko(t+=t<0?n:0,n)?e[t]:r}function Vr(e,t,n){t=t.length?At(t,(function(e){return Ja(e)?function(t){return Pr(t,1===e.length?e[0]:e)}:e})):[au];var r=-1;return t=At(t,Kt(lo())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}($r(e,(function(e,n,i){return{criteria:At(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;for(;++r<a;){var u=Mi(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Jr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=Pr(e,a);n(s,a)&&ti(o,ki(a,e),s)}return o}function Yr(e,t,n,r){var i=r?$t:Wt,o=-1,a=t.length,s=e;for(e===t&&(t=ji(t)),n&&(s=At(e,Kt(n)));++o<a;)for(var u=0,c=t[o],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==e&&Ke.call(s,u,1),Ke.call(e,u,1);return e}function Gr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;ko(i)?Ke.call(e,i,1):hi(e,i)}}return e}function Kr(e,t){return e+gt(xn()*(t-e+1))}function Xr(e,t){var n="";if(!e||t<1||t>h)return n;do{t%2&&(n+=e),(t=gt(t/2))&&(e+=e)}while(t);return n}function Qr(e,t){return No(Eo(e,t,au),e+"")}function Zr(e){return Zn(Us(e))}function ei(e,t){var n=Us(e);return Do(n,cr(t,0,n.length))}function ti(e,t,n,i){if(!rs(e))return e;for(var o=-1,a=(t=ki(t,e)).length,s=a-1,u=e;null!=u&&++o<a;){var c=Wo(t[o]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(o!=s){var f=u[c];(l=i?i(f,c,u):r)===r&&(l=rs(f)?f:ko(t[o+1])?[]:{})}rr(u,c,l),u=u[c]}return e}var ni=An?function(e,t){return An.set(e,t),e}:au,ri=lt?function(e,t){return lt(e,"toString",{configurable:!0,enumerable:!1,value:ru(t),writable:!0})}:au;function ii(e){return Do(Us(e))}function oi(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=ae(i);++r<i;)o[r]=e[r+t];return o}function ai(e,t){var n;return pr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function si(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!fs(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return ui(e,t,au,n)}function ui(e,t,n,i){var o=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(t=n(t))!=t,u=null===t,c=fs(t),l=t===r;o<a;){var f=gt((o+a)/2),d=n(e[f]),h=d!==r,p=null===d,v=d==d,m=fs(d);if(s)var g=i||v;else g=l?v&&(i||h):u?v&&h&&(i||!p):c?v&&h&&!p&&(i||!m):!p&&!m&&(i?d<=t:d<t);g?o=f+1:a=f}return kn(a,4294967294)}function ci(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Ua(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function li(e){return"number"==typeof e?e:fs(e)?p:+e}function fi(e){if("string"==typeof e)return e;if(Ja(e))return At(e,fi)+"";if(fs(e))return $n?$n.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function di(e,t,n){var r=-1,i=It,o=e.length,a=!0,s=[],u=s;if(n)a=!1,i=jt;else if(o>=200){var c=t?null:Xi(e);if(c)return ln(c);a=!1,i=Qt,u=new Kn}else u=t?[]:s;e:for(;++r<o;){var l=e[r],f=t?t(l):l;if(l=n||0!==l?l:0,a&&f==f){for(var d=u.length;d--;)if(u[d]===f)continue e;t&&u.push(f),s.push(l)}else i(u,f,n)||(u!==s&&u.push(f),s.push(l))}return s}function hi(e,t){return null==(e=Io(e,t=ki(t,e)))||delete e[Wo(Zo(t))]}function pi(e,t,n,r){return ti(e,t,n(Pr(e,t)),r)}function vi(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?oi(e,r?0:o,r?o+1:i):oi(e,r?o+1:0,r?i:o)}function mi(e,t){var n=e;return n instanceof Vn&&(n=n.value()),Tt(t,(function(e,t){return t.func.apply(t.thisArg,Lt([e],t.args))}),n)}function gi(e,t,n){var r=e.length;if(r<2)return r?di(e[0]):[];for(var i=-1,o=ae(r);++i<r;)for(var a=e[i],s=-1;++s<r;)s!=i&&(o[i]=hr(o[i]||a,e[s],t,n));return di(wr(o,1),t,n)}function yi(e,t,n){for(var i=-1,o=e.length,a=t.length,s={};++i<o;){var u=i<a?t[i]:r;n(s,e[i],u)}return s}function wi(e){return Ka(e)?e:[]}function bi(e){return"function"==typeof e?e:au}function ki(e,t){return Ja(e)?e:So(e,t)?[e]:Bo(ks(e))}var _i=Qr;function Si(e,t,n){var i=e.length;return n=n===r?i:n,!t&&n>=i?e:oi(e,t,n)}var xi=ft||function(e){return dt.clearTimeout(e)};function Pi(e,t){if(t)return e.slice();var n=e.length,r=Ve?Ve(n):new e.constructor(n);return e.copy(r),r}function Oi(e){var t=new e.constructor(e.byteLength);return new He(t).set(new He(e)),t}function Ci(e,t){var n=t?Oi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Mi(e,t){if(e!==t){var n=e!==r,i=null===e,o=e==e,a=fs(e),s=t!==r,u=null===t,c=t==t,l=fs(t);if(!u&&!l&&!a&&e>t||a&&s&&c&&!u&&!l||i&&s&&c||!n&&c||!o)return 1;if(!i&&!a&&!l&&e<t||l&&n&&o&&!i&&!a||u&&n&&o||!s&&o||!c)return-1}return 0}function Ei(e,t,n,r){for(var i=-1,o=e.length,a=n.length,s=-1,u=t.length,c=bn(o-a,0),l=ae(u+c),f=!r;++s<u;)l[s]=t[s];for(;++i<a;)(f||i<o)&&(l[n[i]]=e[i]);for(;c--;)l[s++]=e[i++];return l}function Ii(e,t,n,r){for(var i=-1,o=e.length,a=-1,s=n.length,u=-1,c=t.length,l=bn(o-s,0),f=ae(l+c),d=!r;++i<l;)f[i]=e[i];for(var h=i;++u<c;)f[h+u]=t[u];for(;++a<s;)(d||i<o)&&(f[h+n[a]]=e[i++]);return f}function ji(e,t){var n=-1,r=e.length;for(t||(t=ae(r));++n<r;)t[n]=e[n];return t}function Ai(e,t,n,i){var o=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var u=t[a],c=i?i(n[u],e[u],u,n,e):r;c===r&&(c=e[u]),o?sr(n,u,c):rr(n,u,c)}return n}function Li(e,t){return function(n,r){var i=Ja(n)?Pt:or,o=t?t():{};return i(n,e,lo(r,2),o)}}function Ti(e){return Qr((function(t,n){var i=-1,o=n.length,a=o>1?n[o-1]:r,s=o>2?n[2]:r;for(a=e.length>3&&"function"==typeof a?(o--,a):r,s&&_o(n[0],n[1],s)&&(a=o<3?r:a,o=1),t=Ce(t);++i<o;){var u=n[i];u&&e(t,u,i,a)}return t}))}function Ni(e,t){return function(n,r){if(null==n)return n;if(!Ga(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Ce(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Ri(e){return function(t,n,r){for(var i=-1,o=Ce(t),a=r(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===n(o[u],u,o))break}return t}}function Fi(e){return function(t){var n=an(t=ks(t))?hn(t):r,i=n?n[0]:t.charAt(0),o=n?Si(n,1).join(""):t.slice(1);return i[e]()+o}}function Di(e){return function(t){return Tt(eu(Vs(t).replace(Xe,"")),e,"")}}function Bi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Un(e.prototype),r=e.apply(n,t);return rs(r)?r:n}}function Wi(e){return function(t,n,i){var o=Ce(t);if(!Ga(t)){var a=lo(n,3);t=Ts(t),n=function(e){return a(o[e],e,o)}}var s=e(t,n,i);return s>-1?o[a?t[s]:s]:r}}function $i(e){return io((function(t){var n=t.length,o=n,a=Hn.prototype.thru;for(e&&t.reverse();o--;){var s=t[o];if("function"!=typeof s)throw new Ie(i);if(a&&!u&&"wrapper"==uo(s))var u=new Hn([],!0)}for(o=u?o:n;++o<n;){var c=uo(s=t[o]),l="wrapper"==c?so(s):r;u=l&&xo(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?u[uo(l[0])].apply(u,l[3]):1==s.length&&xo(s)?u[c]():u.thru(s)}return function(){var e=arguments,r=e[0];if(u&&1==e.length&&Ja(r))return u.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function zi(e,t,n,i,o,a,s,u,c,f){var d=t&l,h=1&t,p=2&t,v=24&t,m=512&t,g=p?r:Bi(e);return function r(){for(var l=arguments.length,y=ae(l),w=l;w--;)y[w]=arguments[w];if(v)var b=co(r),k=tn(y,b);if(i&&(y=Ei(y,i,o,v)),a&&(y=Ii(y,a,s,v)),l-=k,v&&l<f){var _=cn(y,b);return Gi(e,t,zi,r.placeholder,n,y,_,u,c,f-l)}var S=h?n:this,x=p?S[e]:e;return l=y.length,u?y=jo(y,u):m&&l>1&&y.reverse(),d&&c<l&&(y.length=c),this&&this!==dt&&this instanceof r&&(x=g||Bi(x)),x.apply(S,y)}}function Ui(e,t){return function(n,r){return function(e,t,n,r){return _r(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function qi(e,t){return function(n,i){var o;if(n===r&&i===r)return t;if(n!==r&&(o=n),i!==r){if(o===r)return i;"string"==typeof n||"string"==typeof i?(n=fi(n),i=fi(i)):(n=li(n),i=li(i)),o=e(n,i)}return o}}function Hi(e){return io((function(t){return t=At(t,Kt(lo())),Qr((function(n){var r=this;return e(t,(function(e){return xt(e,r,n)}))}))}))}function Vi(e,t){var n=(t=t===r?" ":fi(t)).length;if(n<2)return n?Xr(t,e):t;var i=Xr(t,mt(e/dn(t)));return an(t)?Si(hn(i),0,e).join(""):i.slice(0,e)}function Ji(e){return function(t,n,i){return i&&"number"!=typeof i&&_o(t,n,i)&&(n=i=r),t=ms(t),n===r?(n=t,t=0):n=ms(n),function(e,t,n,r){for(var i=-1,o=bn(mt((t-e)/(n||1)),0),a=ae(o);o--;)a[r?o:++i]=e,e+=n;return a}(t,n,i=i===r?t<n?1:-1:ms(i),e)}}function Yi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ws(t),n=ws(n)),e(t,n)}}function Gi(e,t,n,i,o,a,s,l,f,d){var h=8&t;t|=h?u:c,4&(t&=~(h?c:u))||(t&=-4);var p=[e,t,o,h?a:r,h?s:r,h?r:a,h?r:s,l,f,d],v=n.apply(r,p);return xo(e)&&Lo(v,p),v.placeholder=i,Ro(v,e,t)}function Ki(e){var t=Oe[e];return function(e,n){if(e=ws(e),(n=null==n?0:kn(gs(n),292))&&gn(e)){var r=(ks(e)+"e").split("e");return+((r=(ks(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Xi=En&&1/ln(new En([,-0]))[1]==d?function(e){return new En(e)}:fu;function Qi(e){return function(t){var n=go(t);return n==x?sn(t):n==E?fn(t):function(e,t){return At(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Zi(e,t,n,o,d,h,p,v){var m=2&t;if(!m&&"function"!=typeof e)throw new Ie(i);var g=o?o.length:0;if(g||(t&=-97,o=d=r),p=p===r?p:bn(gs(p),0),v=v===r?v:gs(v),g-=d?d.length:0,t&c){var y=o,w=d;o=d=r}var b=m?r:so(e),k=[e,t,n,o,d,y,w,h,p,v];if(b&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,s=r==l&&8==n||r==l&&n==f&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!s)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var u=t[3];if(u){var c=e[3];e[3]=c?Ei(c,u,t[4]):u,e[4]=c?cn(e[3],a):t[4]}(u=t[5])&&(c=e[5],e[5]=c?Ii(c,u,t[6]):u,e[6]=c?cn(e[5],a):t[6]);(u=t[7])&&(e[7]=u);r&l&&(e[8]=null==e[8]?t[8]:kn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(k,b),e=k[0],t=k[1],n=k[2],o=k[3],d=k[4],!(v=k[9]=k[9]===r?m?0:e.length:bn(k[9]-g,0))&&24&t&&(t&=-25),t&&1!=t)_=8==t||t==s?function(e,t,n){var i=Bi(e);return function o(){for(var a=arguments.length,s=ae(a),u=a,c=co(o);u--;)s[u]=arguments[u];var l=a<3&&s[0]!==c&&s[a-1]!==c?[]:cn(s,c);return(a-=l.length)<n?Gi(e,t,zi,o.placeholder,r,s,l,r,r,n-a):xt(this&&this!==dt&&this instanceof o?i:e,this,s)}}(e,t,v):t!=u&&33!=t||d.length?zi.apply(r,k):function(e,t,n,r){var i=1&t,o=Bi(e);return function t(){for(var a=-1,s=arguments.length,u=-1,c=r.length,l=ae(c+s),f=this&&this!==dt&&this instanceof t?o:e;++u<c;)l[u]=r[u];for(;s--;)l[u++]=arguments[++a];return xt(f,i?n:this,l)}}(e,t,n,o);else var _=function(e,t,n){var r=1&t,i=Bi(e);return function t(){return(this&&this!==dt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,n);return Ro((b?ni:Lo)(_,k),e,t)}function eo(e,t,n,i){return e===r||Ua(e,Le[n])&&!Re.call(i,n)?t:e}function to(e,t,n,i,o,a){return rs(e)&&rs(t)&&(a.set(t,e),qr(e,t,r,to,a),a.delete(t)),e}function no(e){return ss(e)?r:e}function ro(e,t,n,i,o,a){var s=1&n,u=e.length,c=t.length;if(u!=c&&!(s&&c>u))return!1;var l=a.get(e),f=a.get(t);if(l&&f)return l==t&&f==e;var d=-1,h=!0,p=2&n?new Kn:r;for(a.set(e,t),a.set(t,e);++d<u;){var v=e[d],m=t[d];if(i)var g=s?i(m,v,d,t,e,a):i(v,m,d,e,t,a);if(g!==r){if(g)continue;h=!1;break}if(p){if(!Rt(t,(function(e,t){if(!Qt(p,t)&&(v===e||o(v,e,n,i,a)))return p.push(t)}))){h=!1;break}}else if(v!==m&&!o(v,m,n,i,a)){h=!1;break}}return a.delete(e),a.delete(t),h}function io(e){return No(Eo(e,r,Yo),e+"")}function oo(e){return Or(e,Ts,vo)}function ao(e){return Or(e,Ns,mo)}var so=An?function(e){return An.get(e)}:fu;function uo(e){for(var t=e.name+"",n=Ln[t],r=Re.call(Ln,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function co(e){return(Re.call(zn,"placeholder")?zn:e).placeholder}function lo(){var e=zn.iteratee||su;return e=e===su?Fr:e,arguments.length?e(arguments[0],arguments[1]):e}function fo(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function ho(e){for(var t=Ts(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Co(i)]}return t}function po(e,t){var n=function(e,t){return null==e?r:e[t]}(e,t);return Rr(n)?n:r}var vo=Ft?function(e){return null==e?[]:(e=Ce(e),Et(Ft(e),(function(t){return Ge.call(e,t)})))}:yu,mo=Ft?function(e){for(var t=[];e;)Lt(t,vo(e)),e=Je(e);return t}:yu,go=Cr;function yo(e,t,n){for(var r=-1,i=(t=ki(t,e)).length,o=!1;++r<i;){var a=Wo(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&ns(i)&&ko(a,i)&&(Ja(e)||Va(e))}function wo(e){return"function"!=typeof e.constructor||Oo(e)?{}:Un(Je(e))}function bo(e){return Ja(e)||Va(e)||!!(Ze&&e&&e[Ze])}function ko(e,t){var n=typeof e;return!!(t=null==t?h:t)&&("number"==n||"symbol"!=n&&we.test(e))&&e>-1&&e%1==0&&e<t}function _o(e,t,n){if(!rs(n))return!1;var r=typeof t;return!!("number"==r?Ga(n)&&ko(t,n.length):"string"==r&&t in n)&&Ua(n[t],e)}function So(e,t){if(Ja(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!fs(e))||(te.test(e)||!ee.test(e)||null!=t&&e in Ce(t))}function xo(e){var t=uo(e),n=zn[t];if("function"!=typeof n||!(t in Vn.prototype))return!1;if(e===n)return!0;var r=so(n);return!!r&&e===r[0]}(On&&go(new On(new ArrayBuffer(1)))!=T||Cn&&go(new Cn)!=x||Mn&&go(Mn.resolve())!=C||En&&go(new En)!=E||In&&go(new In)!=A)&&(go=function(e){var t=Cr(e),n=t==O?e.constructor:r,i=n?$o(n):"";if(i)switch(i){case Tn:return T;case Nn:return x;case Rn:return C;case Fn:return E;case Dn:return A}return t});var Po=Te?es:wu;function Oo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Le)}function Co(e){return e==e&&!rs(e)}function Mo(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==r||e in Ce(n)))}}function Eo(e,t,n){return t=bn(t===r?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=bn(r.length-t,0),a=ae(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=ae(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),xt(e,this,s)}}function Io(e,t){return t.length<2?e:Pr(e,oi(t,0,-1))}function jo(e,t){for(var n=e.length,i=kn(t.length,n),o=ji(e);i--;){var a=t[i];e[i]=ko(a,n)?o[a]:r}return e}function Ao(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Lo=Fo(ni),To=pt||function(e,t){return dt.setTimeout(e,t)},No=Fo(ri);function Ro(e,t,n){var r=t+"";return No(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(se,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Ot(m,(function(n){var r="_."+n[0];t&n[1]&&!It(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ue);return t?t[1].split(ce):[]}(r),n)))}function Fo(e){var t=0,n=0;return function(){var i=_n(),o=16-(i-n);if(n=i,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(r,arguments)}}function Do(e,t){var n=-1,i=e.length,o=i-1;for(t=t===r?i:t;++n<t;){var a=Kr(n,o),s=e[a];e[a]=e[n],e[n]=s}return e.length=t,e}var Bo=function(e){var t=Fa(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ne,(function(e,n,r,i){t.push(r?i.replace(de,"$1"):n||e)})),t}));function Wo(e){if("string"==typeof e||fs(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function $o(e){if(null!=e){try{return Ne.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function zo(e){if(e instanceof Vn)return e.clone();var t=new Hn(e.__wrapped__,e.__chain__);return t.__actions__=ji(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Uo=Qr((function(e,t){return Ka(e)?hr(e,wr(t,1,Ka,!0)):[]})),qo=Qr((function(e,t){var n=Zo(t);return Ka(n)&&(n=r),Ka(e)?hr(e,wr(t,1,Ka,!0),lo(n,2)):[]})),Ho=Qr((function(e,t){var n=Zo(t);return Ka(n)&&(n=r),Ka(e)?hr(e,wr(t,1,Ka,!0),r,n):[]}));function Vo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:gs(n);return i<0&&(i=bn(r+i,0)),Bt(e,lo(t,3),i)}function Jo(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=i-1;return n!==r&&(o=gs(n),o=n<0?bn(i+o,0):kn(o,i-1)),Bt(e,lo(t,3),o,!0)}function Yo(e){return(null==e?0:e.length)?wr(e,1):[]}function Go(e){return e&&e.length?e[0]:r}var Ko=Qr((function(e){var t=At(e,wi);return t.length&&t[0]===e[0]?jr(t):[]})),Xo=Qr((function(e){var t=Zo(e),n=At(e,wi);return t===Zo(n)?t=r:n.pop(),n.length&&n[0]===e[0]?jr(n,lo(t,2)):[]})),Qo=Qr((function(e){var t=Zo(e),n=At(e,wi);return(t="function"==typeof t?t:r)&&n.pop(),n.length&&n[0]===e[0]?jr(n,r,t):[]}));function Zo(e){var t=null==e?0:e.length;return t?e[t-1]:r}var ea=Qr(ta);function ta(e,t){return e&&e.length&&t&&t.length?Yr(e,t):e}var na=io((function(e,t){var n=null==e?0:e.length,r=ur(e,t);return Gr(e,At(t,(function(e){return ko(e,n)?+e:e})).sort(Mi)),r}));function ra(e){return null==e?e:Pn.call(e)}var ia=Qr((function(e){return di(wr(e,1,Ka,!0))})),oa=Qr((function(e){var t=Zo(e);return Ka(t)&&(t=r),di(wr(e,1,Ka,!0),lo(t,2))})),aa=Qr((function(e){var t=Zo(e);return t="function"==typeof t?t:r,di(wr(e,1,Ka,!0),r,t)}));function sa(e){if(!e||!e.length)return[];var t=0;return e=Et(e,(function(e){if(Ka(e))return t=bn(e.length,t),!0})),Yt(t,(function(t){return At(e,qt(t))}))}function ua(e,t){if(!e||!e.length)return[];var n=sa(e);return null==t?n:At(n,(function(e){return xt(t,r,e)}))}var ca=Qr((function(e,t){return Ka(e)?hr(e,t):[]})),la=Qr((function(e){return gi(Et(e,Ka))})),fa=Qr((function(e){var t=Zo(e);return Ka(t)&&(t=r),gi(Et(e,Ka),lo(t,2))})),da=Qr((function(e){var t=Zo(e);return t="function"==typeof t?t:r,gi(Et(e,Ka),r,t)})),ha=Qr(sa);var pa=Qr((function(e){var t=e.length,n=t>1?e[t-1]:r;return n="function"==typeof n?(e.pop(),n):r,ua(e,n)}));function va(e){var t=zn(e);return t.__chain__=!0,t}function ma(e,t){return t(e)}var ga=io((function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,o=function(t){return ur(t,e)};return!(t>1||this.__actions__.length)&&i instanceof Vn&&ko(n)?((i=i.slice(n,+n+(t?1:0))).__actions__.push({func:ma,args:[o],thisArg:r}),new Hn(i,this.__chain__).thru((function(e){return t&&!e.length&&e.push(r),e}))):this.thru(o)}));var ya=Li((function(e,t,n){Re.call(e,n)?++e[n]:sr(e,n,1)}));var wa=Wi(Vo),ba=Wi(Jo);function ka(e,t){return(Ja(e)?Ot:pr)(e,lo(t,3))}function _a(e,t){return(Ja(e)?Ct:vr)(e,lo(t,3))}var Sa=Li((function(e,t,n){Re.call(e,n)?e[n].push(t):sr(e,n,[t])}));var xa=Qr((function(e,t,n){var r=-1,i="function"==typeof t,o=Ga(e)?ae(e.length):[];return pr(e,(function(e){o[++r]=i?xt(t,e,n):Ar(e,t,n)})),o})),Pa=Li((function(e,t,n){sr(e,n,t)}));function Oa(e,t){return(Ja(e)?At:$r)(e,lo(t,3))}var Ca=Li((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Ma=Qr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&_o(e,t[0],t[1])?t=[]:n>2&&_o(t[0],t[1],t[2])&&(t=[t[0]]),Vr(e,wr(t,1),[])})),Ea=ht||function(){return dt.Date.now()};function Ia(e,t,n){return t=n?r:t,t=e&&null==t?e.length:t,Zi(e,l,r,r,r,r,t)}function ja(e,t){var n;if("function"!=typeof t)throw new Ie(i);return e=gs(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=r),n}}var Aa=Qr((function(e,t,n){var r=1;if(n.length){var i=cn(n,co(Aa));r|=u}return Zi(e,r,t,n,i)})),La=Qr((function(e,t,n){var r=3;if(n.length){var i=cn(n,co(La));r|=u}return Zi(t,r,e,n,i)}));function Ta(e,t,n){var o,a,s,u,c,l,f=0,d=!1,h=!1,p=!0;if("function"!=typeof e)throw new Ie(i);function v(t){var n=o,i=a;return o=a=r,f=t,u=e.apply(i,n)}function m(e){return f=e,c=To(y,t),d?v(e):u}function g(e){var n=e-l;return l===r||n>=t||n<0||h&&e-f>=s}function y(){var e=Ea();if(g(e))return w(e);c=To(y,function(e){var n=t-(e-l);return h?kn(n,s-(e-f)):n}(e))}function w(e){return c=r,p&&o?v(e):(o=a=r,u)}function b(){var e=Ea(),n=g(e);if(o=arguments,a=this,l=e,n){if(c===r)return m(l);if(h)return xi(c),c=To(y,t),v(l)}return c===r&&(c=To(y,t)),u}return t=ws(t)||0,rs(n)&&(d=!!n.leading,s=(h="maxWait"in n)?bn(ws(n.maxWait)||0,t):s,p="trailing"in n?!!n.trailing:p),b.cancel=function(){c!==r&&xi(c),f=0,o=l=a=c=r},b.flush=function(){return c===r?u:w(Ea())},b}var Na=Qr((function(e,t){return dr(e,1,t)})),Ra=Qr((function(e,t,n){return dr(e,ws(t)||0,n)}));function Fa(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ie(i);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Fa.Cache||Gn),n}function Da(e){if("function"!=typeof e)throw new Ie(i);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Fa.Cache=Gn;var Ba=_i((function(e,t){var n=(t=1==t.length&&Ja(t[0])?At(t[0],Kt(lo())):At(wr(t,1),Kt(lo()))).length;return Qr((function(r){for(var i=-1,o=kn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return xt(e,this,r)}))})),Wa=Qr((function(e,t){var n=cn(t,co(Wa));return Zi(e,u,r,t,n)})),$a=Qr((function(e,t){var n=cn(t,co($a));return Zi(e,c,r,t,n)})),za=io((function(e,t){return Zi(e,f,r,r,r,t)}));function Ua(e,t){return e===t||e!=e&&t!=t}var qa=Yi(Mr),Ha=Yi((function(e,t){return e>=t})),Va=Lr(function(){return arguments}())?Lr:function(e){return is(e)&&Re.call(e,"callee")&&!Ge.call(e,"callee")},Ja=ae.isArray,Ya=yt?Kt(yt):function(e){return is(e)&&Cr(e)==L};function Ga(e){return null!=e&&ns(e.length)&&!es(e)}function Ka(e){return is(e)&&Ga(e)}var Xa=Ht||wu,Qa=wt?Kt(wt):function(e){return is(e)&&Cr(e)==b};function Za(e){if(!is(e))return!1;var t=Cr(e);return t==k||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!ss(e)}function es(e){if(!rs(e))return!1;var t=Cr(e);return t==_||t==S||"[object AsyncFunction]"==t||"[object Proxy]"==t}function ts(e){return"number"==typeof e&&e==gs(e)}function ns(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=h}function rs(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function is(e){return null!=e&&"object"==typeof e}var os=bt?Kt(bt):function(e){return is(e)&&go(e)==x};function as(e){return"number"==typeof e||is(e)&&Cr(e)==P}function ss(e){if(!is(e)||Cr(e)!=O)return!1;var t=Je(e);if(null===t)return!0;var n=Re.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Ne.call(n)==We}var us=kt?Kt(kt):function(e){return is(e)&&Cr(e)==M};var cs=_t?Kt(_t):function(e){return is(e)&&go(e)==E};function ls(e){return"string"==typeof e||!Ja(e)&&is(e)&&Cr(e)==I}function fs(e){return"symbol"==typeof e||is(e)&&Cr(e)==j}var ds=St?Kt(St):function(e){return is(e)&&ns(e.length)&&!!ot[Cr(e)]};var hs=Yi(Wr),ps=Yi((function(e,t){return e<=t}));function vs(e){if(!e)return[];if(Ga(e))return ls(e)?hn(e):ji(e);if(tt&&e[tt])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[tt]());var t=go(e);return(t==x?sn:t==E?ln:Us)(e)}function ms(e){return e?(e=ws(e))===d||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function gs(e){var t=ms(e),n=t%1;return t==t?n?t-n:t:0}function ys(e){return e?cr(gs(e),0,v):0}function ws(e){if("number"==typeof e)return e;if(fs(e))return p;if(rs(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=rs(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Gt(e);var n=me.test(e);return n||ye.test(e)?ct(e.slice(2),n?2:8):ve.test(e)?p:+e}function bs(e){return Ai(e,Ns(e))}function ks(e){return null==e?"":fi(e)}var _s=Ti((function(e,t){if(Oo(t)||Ga(t))Ai(t,Ts(t),e);else for(var n in t)Re.call(t,n)&&rr(e,n,t[n])})),Ss=Ti((function(e,t){Ai(t,Ns(t),e)})),xs=Ti((function(e,t,n,r){Ai(t,Ns(t),e,r)})),Ps=Ti((function(e,t,n,r){Ai(t,Ts(t),e,r)})),Os=io(ur);var Cs=Qr((function(e,t){e=Ce(e);var n=-1,i=t.length,o=i>2?t[2]:r;for(o&&_o(t[0],t[1],o)&&(i=1);++n<i;)for(var a=t[n],s=Ns(a),u=-1,c=s.length;++u<c;){var l=s[u],f=e[l];(f===r||Ua(f,Le[l])&&!Re.call(e,l))&&(e[l]=a[l])}return e})),Ms=Qr((function(e){return e.push(r,to),xt(Fs,r,e)}));function Es(e,t,n){var i=null==e?r:Pr(e,t);return i===r?n:i}function Is(e,t){return null!=e&&yo(e,t,Ir)}var js=Ui((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Be.call(t)),e[t]=n}),ru(au)),As=Ui((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Be.call(t)),Re.call(e,t)?e[t].push(n):e[t]=[n]}),lo),Ls=Qr(Ar);function Ts(e){return Ga(e)?Qn(e):Dr(e)}function Ns(e){return Ga(e)?Qn(e,!0):Br(e)}var Rs=Ti((function(e,t,n){qr(e,t,n)})),Fs=Ti((function(e,t,n,r){qr(e,t,n,r)})),Ds=io((function(e,t){var n={};if(null==e)return n;var r=!1;t=At(t,(function(t){return t=ki(t,e),r||(r=t.length>1),t})),Ai(e,ao(e),n),r&&(n=lr(n,7,no));for(var i=t.length;i--;)hi(n,t[i]);return n}));var Bs=io((function(e,t){return null==e?{}:function(e,t){return Jr(e,t,(function(t,n){return Is(e,n)}))}(e,t)}));function Ws(e,t){if(null==e)return{};var n=At(ao(e),(function(e){return[e]}));return t=lo(t),Jr(e,n,(function(e,n){return t(e,n[0])}))}var $s=Qi(Ts),zs=Qi(Ns);function Us(e){return null==e?[]:Xt(e,Ts(e))}var qs=Di((function(e,t,n){return t=t.toLowerCase(),e+(n?Hs(t):t)}));function Hs(e){return Zs(ks(e).toLowerCase())}function Vs(e){return(e=ks(e))&&e.replace(be,nn).replace(Qe,"")}var Js=Di((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Ys=Di((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Gs=Fi("toLowerCase");var Ks=Di((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Xs=Di((function(e,t,n){return e+(n?" ":"")+Zs(t)}));var Qs=Di((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Zs=Fi("toUpperCase");function eu(e,t,n){return e=ks(e),(t=n?r:t)===r?function(e){return nt.test(e)}(e)?function(e){return e.match(et)||[]}(e):function(e){return e.match(le)||[]}(e):e.match(t)||[]}var tu=Qr((function(e,t){try{return xt(e,r,t)}catch(e){return Za(e)?e:new xe(e)}})),nu=io((function(e,t){return Ot(t,(function(t){t=Wo(t),sr(e,t,Aa(e[t],e))})),e}));function ru(e){return function(){return e}}var iu=$i(),ou=$i(!0);function au(e){return e}function su(e){return Fr("function"==typeof e?e:lr(e,1))}var uu=Qr((function(e,t){return function(n){return Ar(n,e,t)}})),cu=Qr((function(e,t){return function(n){return Ar(e,n,t)}}));function lu(e,t,n){var r=Ts(t),i=xr(t,r);null!=n||rs(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=xr(t,Ts(t)));var o=!(rs(n)&&"chain"in n&&!n.chain),a=es(e);return Ot(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=ji(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Lt([this.value()],arguments))})})),e}function fu(){}var du=Hi(At),hu=Hi(Mt),pu=Hi(Rt);function vu(e){return So(e)?qt(Wo(e)):function(e){return function(t){return Pr(t,e)}}(e)}var mu=Ji(),gu=Ji(!0);function yu(){return[]}function wu(){return!1}var bu=qi((function(e,t){return e+t}),0),ku=Ki("ceil"),_u=qi((function(e,t){return e/t}),1),Su=Ki("floor");var xu=qi((function(e,t){return e*t}),1),Pu=Ki("round"),Ou=qi((function(e,t){return e-t}),0);return zn.after=function(e,t){if("function"!=typeof t)throw new Ie(i);return e=gs(e),function(){if(--e<1)return t.apply(this,arguments)}},zn.ary=Ia,zn.assign=_s,zn.assignIn=Ss,zn.assignInWith=xs,zn.assignWith=Ps,zn.at=Os,zn.before=ja,zn.bind=Aa,zn.bindAll=nu,zn.bindKey=La,zn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ja(e)?e:[e]},zn.chain=va,zn.chunk=function(e,t,n){t=(n?_o(e,t,n):t===r)?1:bn(gs(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,a=0,s=ae(mt(i/t));o<i;)s[a++]=oi(e,o,o+=t);return s},zn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},zn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=ae(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Lt(Ja(n)?ji(n):[n],wr(t,1))},zn.cond=function(e){var t=null==e?0:e.length,n=lo();return e=t?At(e,(function(e){if("function"!=typeof e[1])throw new Ie(i);return[n(e[0]),e[1]]})):[],Qr((function(n){for(var r=-1;++r<t;){var i=e[r];if(xt(i[0],this,n))return xt(i[1],this,n)}}))},zn.conforms=function(e){return function(e){var t=Ts(e);return function(n){return fr(n,e,t)}}(lr(e,1))},zn.constant=ru,zn.countBy=ya,zn.create=function(e,t){var n=Un(e);return null==t?n:ar(n,t)},zn.curry=function e(t,n,i){var o=Zi(t,8,r,r,r,r,r,n=i?r:n);return o.placeholder=e.placeholder,o},zn.curryRight=function e(t,n,i){var o=Zi(t,s,r,r,r,r,r,n=i?r:n);return o.placeholder=e.placeholder,o},zn.debounce=Ta,zn.defaults=Cs,zn.defaultsDeep=Ms,zn.defer=Na,zn.delay=Ra,zn.difference=Uo,zn.differenceBy=qo,zn.differenceWith=Ho,zn.drop=function(e,t,n){var i=null==e?0:e.length;return i?oi(e,(t=n||t===r?1:gs(t))<0?0:t,i):[]},zn.dropRight=function(e,t,n){var i=null==e?0:e.length;return i?oi(e,0,(t=i-(t=n||t===r?1:gs(t)))<0?0:t):[]},zn.dropRightWhile=function(e,t){return e&&e.length?vi(e,lo(t,3),!0,!0):[]},zn.dropWhile=function(e,t){return e&&e.length?vi(e,lo(t,3),!0):[]},zn.fill=function(e,t,n,i){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&_o(e,t,n)&&(n=0,i=o),function(e,t,n,i){var o=e.length;for((n=gs(n))<0&&(n=-n>o?0:o+n),(i=i===r||i>o?o:gs(i))<0&&(i+=o),i=n>i?0:ys(i);n<i;)e[n++]=t;return e}(e,t,n,i)):[]},zn.filter=function(e,t){return(Ja(e)?Et:yr)(e,lo(t,3))},zn.flatMap=function(e,t){return wr(Oa(e,t),1)},zn.flatMapDeep=function(e,t){return wr(Oa(e,t),d)},zn.flatMapDepth=function(e,t,n){return n=n===r?1:gs(n),wr(Oa(e,t),n)},zn.flatten=Yo,zn.flattenDeep=function(e){return(null==e?0:e.length)?wr(e,d):[]},zn.flattenDepth=function(e,t){return(null==e?0:e.length)?wr(e,t=t===r?1:gs(t)):[]},zn.flip=function(e){return Zi(e,512)},zn.flow=iu,zn.flowRight=ou,zn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},zn.functions=function(e){return null==e?[]:xr(e,Ts(e))},zn.functionsIn=function(e){return null==e?[]:xr(e,Ns(e))},zn.groupBy=Sa,zn.initial=function(e){return(null==e?0:e.length)?oi(e,0,-1):[]},zn.intersection=Ko,zn.intersectionBy=Xo,zn.intersectionWith=Qo,zn.invert=js,zn.invertBy=As,zn.invokeMap=xa,zn.iteratee=su,zn.keyBy=Pa,zn.keys=Ts,zn.keysIn=Ns,zn.map=Oa,zn.mapKeys=function(e,t){var n={};return t=lo(t,3),_r(e,(function(e,r,i){sr(n,t(e,r,i),e)})),n},zn.mapValues=function(e,t){var n={};return t=lo(t,3),_r(e,(function(e,r,i){sr(n,r,t(e,r,i))})),n},zn.matches=function(e){return zr(lr(e,1))},zn.matchesProperty=function(e,t){return Ur(e,lr(t,1))},zn.memoize=Fa,zn.merge=Rs,zn.mergeWith=Fs,zn.method=uu,zn.methodOf=cu,zn.mixin=lu,zn.negate=Da,zn.nthArg=function(e){return e=gs(e),Qr((function(t){return Hr(t,e)}))},zn.omit=Ds,zn.omitBy=function(e,t){return Ws(e,Da(lo(t)))},zn.once=function(e){return ja(2,e)},zn.orderBy=function(e,t,n,i){return null==e?[]:(Ja(t)||(t=null==t?[]:[t]),Ja(n=i?r:n)||(n=null==n?[]:[n]),Vr(e,t,n))},zn.over=du,zn.overArgs=Ba,zn.overEvery=hu,zn.overSome=pu,zn.partial=Wa,zn.partialRight=$a,zn.partition=Ca,zn.pick=Bs,zn.pickBy=Ws,zn.property=vu,zn.propertyOf=function(e){return function(t){return null==e?r:Pr(e,t)}},zn.pull=ea,zn.pullAll=ta,zn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Yr(e,t,lo(n,2)):e},zn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Yr(e,t,r,n):e},zn.pullAt=na,zn.range=mu,zn.rangeRight=gu,zn.rearg=za,zn.reject=function(e,t){return(Ja(e)?Et:yr)(e,Da(lo(t,3)))},zn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=lo(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Gr(e,i),n},zn.rest=function(e,t){if("function"!=typeof e)throw new Ie(i);return Qr(e,t=t===r?t:gs(t))},zn.reverse=ra,zn.sampleSize=function(e,t,n){return t=(n?_o(e,t,n):t===r)?1:gs(t),(Ja(e)?er:ei)(e,t)},zn.set=function(e,t,n){return null==e?e:ti(e,t,n)},zn.setWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:ti(e,t,n,i)},zn.shuffle=function(e){return(Ja(e)?tr:ii)(e)},zn.slice=function(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&_o(e,t,n)?(t=0,n=i):(t=null==t?0:gs(t),n=n===r?i:gs(n)),oi(e,t,n)):[]},zn.sortBy=Ma,zn.sortedUniq=function(e){return e&&e.length?ci(e):[]},zn.sortedUniqBy=function(e,t){return e&&e.length?ci(e,lo(t,2)):[]},zn.split=function(e,t,n){return n&&"number"!=typeof n&&_o(e,t,n)&&(t=n=r),(n=n===r?v:n>>>0)?(e=ks(e))&&("string"==typeof t||null!=t&&!us(t))&&!(t=fi(t))&&an(e)?Si(hn(e),0,n):e.split(t,n):[]},zn.spread=function(e,t){if("function"!=typeof e)throw new Ie(i);return t=null==t?0:bn(gs(t),0),Qr((function(n){var r=n[t],i=Si(n,0,t);return r&&Lt(i,r),xt(e,this,i)}))},zn.tail=function(e){var t=null==e?0:e.length;return t?oi(e,1,t):[]},zn.take=function(e,t,n){return e&&e.length?oi(e,0,(t=n||t===r?1:gs(t))<0?0:t):[]},zn.takeRight=function(e,t,n){var i=null==e?0:e.length;return i?oi(e,(t=i-(t=n||t===r?1:gs(t)))<0?0:t,i):[]},zn.takeRightWhile=function(e,t){return e&&e.length?vi(e,lo(t,3),!1,!0):[]},zn.takeWhile=function(e,t){return e&&e.length?vi(e,lo(t,3)):[]},zn.tap=function(e,t){return t(e),e},zn.throttle=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new Ie(i);return rs(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),Ta(e,t,{leading:r,maxWait:t,trailing:o})},zn.thru=ma,zn.toArray=vs,zn.toPairs=$s,zn.toPairsIn=zs,zn.toPath=function(e){return Ja(e)?At(e,Wo):fs(e)?[e]:ji(Bo(ks(e)))},zn.toPlainObject=bs,zn.transform=function(e,t,n){var r=Ja(e),i=r||Xa(e)||ds(e);if(t=lo(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:rs(e)&&es(o)?Un(Je(e)):{}}return(i?Ot:_r)(e,(function(e,r,i){return t(n,e,r,i)})),n},zn.unary=function(e){return Ia(e,1)},zn.union=ia,zn.unionBy=oa,zn.unionWith=aa,zn.uniq=function(e){return e&&e.length?di(e):[]},zn.uniqBy=function(e,t){return e&&e.length?di(e,lo(t,2)):[]},zn.uniqWith=function(e,t){return t="function"==typeof t?t:r,e&&e.length?di(e,r,t):[]},zn.unset=function(e,t){return null==e||hi(e,t)},zn.unzip=sa,zn.unzipWith=ua,zn.update=function(e,t,n){return null==e?e:pi(e,t,bi(n))},zn.updateWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:pi(e,t,bi(n),i)},zn.values=Us,zn.valuesIn=function(e){return null==e?[]:Xt(e,Ns(e))},zn.without=ca,zn.words=eu,zn.wrap=function(e,t){return Wa(bi(t),e)},zn.xor=la,zn.xorBy=fa,zn.xorWith=da,zn.zip=ha,zn.zipObject=function(e,t){return yi(e||[],t||[],rr)},zn.zipObjectDeep=function(e,t){return yi(e||[],t||[],ti)},zn.zipWith=pa,zn.entries=$s,zn.entriesIn=zs,zn.extend=Ss,zn.extendWith=xs,lu(zn,zn),zn.add=bu,zn.attempt=tu,zn.camelCase=qs,zn.capitalize=Hs,zn.ceil=ku,zn.clamp=function(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=(n=ws(n))==n?n:0),t!==r&&(t=(t=ws(t))==t?t:0),cr(ws(e),t,n)},zn.clone=function(e){return lr(e,4)},zn.cloneDeep=function(e){return lr(e,5)},zn.cloneDeepWith=function(e,t){return lr(e,5,t="function"==typeof t?t:r)},zn.cloneWith=function(e,t){return lr(e,4,t="function"==typeof t?t:r)},zn.conformsTo=function(e,t){return null==t||fr(e,t,Ts(t))},zn.deburr=Vs,zn.defaultTo=function(e,t){return null==e||e!=e?t:e},zn.divide=_u,zn.endsWith=function(e,t,n){e=ks(e),t=fi(t);var i=e.length,o=n=n===r?i:cr(gs(n),0,i);return(n-=t.length)>=0&&e.slice(n,o)==t},zn.eq=Ua,zn.escape=function(e){return(e=ks(e))&&K.test(e)?e.replace(Y,rn):e},zn.escapeRegExp=function(e){return(e=ks(e))&&ie.test(e)?e.replace(re,"\\$&"):e},zn.every=function(e,t,n){var i=Ja(e)?Mt:mr;return n&&_o(e,t,n)&&(t=r),i(e,lo(t,3))},zn.find=wa,zn.findIndex=Vo,zn.findKey=function(e,t){return Dt(e,lo(t,3),_r)},zn.findLast=ba,zn.findLastIndex=Jo,zn.findLastKey=function(e,t){return Dt(e,lo(t,3),Sr)},zn.floor=Su,zn.forEach=ka,zn.forEachRight=_a,zn.forIn=function(e,t){return null==e?e:br(e,lo(t,3),Ns)},zn.forInRight=function(e,t){return null==e?e:kr(e,lo(t,3),Ns)},zn.forOwn=function(e,t){return e&&_r(e,lo(t,3))},zn.forOwnRight=function(e,t){return e&&Sr(e,lo(t,3))},zn.get=Es,zn.gt=qa,zn.gte=Ha,zn.has=function(e,t){return null!=e&&yo(e,t,Er)},zn.hasIn=Is,zn.head=Go,zn.identity=au,zn.includes=function(e,t,n,r){e=Ga(e)?e:Us(e),n=n&&!r?gs(n):0;var i=e.length;return n<0&&(n=bn(i+n,0)),ls(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Wt(e,t,n)>-1},zn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:gs(n);return i<0&&(i=bn(r+i,0)),Wt(e,t,i)},zn.inRange=function(e,t,n){return t=ms(t),n===r?(n=t,t=0):n=ms(n),function(e,t,n){return e>=kn(t,n)&&e<bn(t,n)}(e=ws(e),t,n)},zn.invoke=Ls,zn.isArguments=Va,zn.isArray=Ja,zn.isArrayBuffer=Ya,zn.isArrayLike=Ga,zn.isArrayLikeObject=Ka,zn.isBoolean=function(e){return!0===e||!1===e||is(e)&&Cr(e)==w},zn.isBuffer=Xa,zn.isDate=Qa,zn.isElement=function(e){return is(e)&&1===e.nodeType&&!ss(e)},zn.isEmpty=function(e){if(null==e)return!0;if(Ga(e)&&(Ja(e)||"string"==typeof e||"function"==typeof e.splice||Xa(e)||ds(e)||Va(e)))return!e.length;var t=go(e);if(t==x||t==E)return!e.size;if(Oo(e))return!Dr(e).length;for(var n in e)if(Re.call(e,n))return!1;return!0},zn.isEqual=function(e,t){return Tr(e,t)},zn.isEqualWith=function(e,t,n){var i=(n="function"==typeof n?n:r)?n(e,t):r;return i===r?Tr(e,t,r,n):!!i},zn.isError=Za,zn.isFinite=function(e){return"number"==typeof e&&gn(e)},zn.isFunction=es,zn.isInteger=ts,zn.isLength=ns,zn.isMap=os,zn.isMatch=function(e,t){return e===t||Nr(e,t,ho(t))},zn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:r,Nr(e,t,ho(t),n)},zn.isNaN=function(e){return as(e)&&e!=+e},zn.isNative=function(e){if(Po(e))throw new xe("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Rr(e)},zn.isNil=function(e){return null==e},zn.isNull=function(e){return null===e},zn.isNumber=as,zn.isObject=rs,zn.isObjectLike=is,zn.isPlainObject=ss,zn.isRegExp=us,zn.isSafeInteger=function(e){return ts(e)&&e>=-9007199254740991&&e<=h},zn.isSet=cs,zn.isString=ls,zn.isSymbol=fs,zn.isTypedArray=ds,zn.isUndefined=function(e){return e===r},zn.isWeakMap=function(e){return is(e)&&go(e)==A},zn.isWeakSet=function(e){return is(e)&&"[object WeakSet]"==Cr(e)},zn.join=function(e,t){return null==e?"":yn.call(e,t)},zn.kebabCase=Js,zn.last=Zo,zn.lastIndexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=i;return n!==r&&(o=(o=gs(n))<0?bn(i+o,0):kn(o,i-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):Bt(e,zt,o,!0)},zn.lowerCase=Ys,zn.lowerFirst=Gs,zn.lt=hs,zn.lte=ps,zn.max=function(e){return e&&e.length?gr(e,au,Mr):r},zn.maxBy=function(e,t){return e&&e.length?gr(e,lo(t,2),Mr):r},zn.mean=function(e){return Ut(e,au)},zn.meanBy=function(e,t){return Ut(e,lo(t,2))},zn.min=function(e){return e&&e.length?gr(e,au,Wr):r},zn.minBy=function(e,t){return e&&e.length?gr(e,lo(t,2),Wr):r},zn.stubArray=yu,zn.stubFalse=wu,zn.stubObject=function(){return{}},zn.stubString=function(){return""},zn.stubTrue=function(){return!0},zn.multiply=xu,zn.nth=function(e,t){return e&&e.length?Hr(e,gs(t)):r},zn.noConflict=function(){return dt._===this&&(dt._=$e),this},zn.noop=fu,zn.now=Ea,zn.pad=function(e,t,n){e=ks(e);var r=(t=gs(t))?dn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Vi(gt(i),n)+e+Vi(mt(i),n)},zn.padEnd=function(e,t,n){e=ks(e);var r=(t=gs(t))?dn(e):0;return t&&r<t?e+Vi(t-r,n):e},zn.padStart=function(e,t,n){e=ks(e);var r=(t=gs(t))?dn(e):0;return t&&r<t?Vi(t-r,n)+e:e},zn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),Sn(ks(e).replace(oe,""),t||0)},zn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&_o(e,t,n)&&(t=n=r),n===r&&("boolean"==typeof t?(n=t,t=r):"boolean"==typeof e&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=ms(e),t===r?(t=e,e=0):t=ms(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var o=xn();return kn(e+o*(t-e+ut("1e-"+((o+"").length-1))),t)}return Kr(e,t)},zn.reduce=function(e,t,n){var r=Ja(e)?Tt:Vt,i=arguments.length<3;return r(e,lo(t,4),n,i,pr)},zn.reduceRight=function(e,t,n){var r=Ja(e)?Nt:Vt,i=arguments.length<3;return r(e,lo(t,4),n,i,vr)},zn.repeat=function(e,t,n){return t=(n?_o(e,t,n):t===r)?1:gs(t),Xr(ks(e),t)},zn.replace=function(){var e=arguments,t=ks(e[0]);return e.length<3?t:t.replace(e[1],e[2])},zn.result=function(e,t,n){var i=-1,o=(t=ki(t,e)).length;for(o||(o=1,e=r);++i<o;){var a=null==e?r:e[Wo(t[i])];a===r&&(i=o,a=n),e=es(a)?a.call(e):a}return e},zn.round=Pu,zn.runInContext=e,zn.sample=function(e){return(Ja(e)?Zn:Zr)(e)},zn.size=function(e){if(null==e)return 0;if(Ga(e))return ls(e)?dn(e):e.length;var t=go(e);return t==x||t==E?e.size:Dr(e).length},zn.snakeCase=Ks,zn.some=function(e,t,n){var i=Ja(e)?Rt:ai;return n&&_o(e,t,n)&&(t=r),i(e,lo(t,3))},zn.sortedIndex=function(e,t){return si(e,t)},zn.sortedIndexBy=function(e,t,n){return ui(e,t,lo(n,2))},zn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=si(e,t);if(r<n&&Ua(e[r],t))return r}return-1},zn.sortedLastIndex=function(e,t){return si(e,t,!0)},zn.sortedLastIndexBy=function(e,t,n){return ui(e,t,lo(n,2),!0)},zn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=si(e,t,!0)-1;if(Ua(e[n],t))return n}return-1},zn.startCase=Xs,zn.startsWith=function(e,t,n){return e=ks(e),n=null==n?0:cr(gs(n),0,e.length),t=fi(t),e.slice(n,n+t.length)==t},zn.subtract=Ou,zn.sum=function(e){return e&&e.length?Jt(e,au):0},zn.sumBy=function(e,t){return e&&e.length?Jt(e,lo(t,2)):0},zn.template=function(e,t,n){var i=zn.templateSettings;n&&_o(e,t,n)&&(t=r),e=ks(e),t=xs({},t,i,eo);var o,a,s=xs({},t.imports,i.imports,eo),u=Ts(s),c=Xt(s,u),l=0,f=t.interpolate||ke,d="__p += '",h=Me((t.escape||ke).source+"|"+f.source+"|"+(f===Z?he:ke).source+"|"+(t.evaluate||ke).source+"|$","g"),p="//# sourceURL="+(Re.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++it+"]")+"\n";e.replace(h,(function(t,n,r,i,s,u){return r||(r=i),d+=e.slice(l,u).replace(_e,on),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+t.length,t})),d+="';\n";var v=Re.call(t,"variable")&&t.variable;if(v){if(fe.test(v))throw new xe("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(q,""):d).replace(H,"$1").replace(V,"$1;"),d="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=tu((function(){return Pe(u,p+"return "+d).apply(r,c)}));if(m.source=d,Za(m))throw m;return m},zn.times=function(e,t){if((e=gs(e))<1||e>h)return[];var n=v,r=kn(e,v);t=lo(t),e-=v;for(var i=Yt(r,t);++n<e;)t(n);return i},zn.toFinite=ms,zn.toInteger=gs,zn.toLength=ys,zn.toLower=function(e){return ks(e).toLowerCase()},zn.toNumber=ws,zn.toSafeInteger=function(e){return e?cr(gs(e),-9007199254740991,h):0===e?e:0},zn.toString=ks,zn.toUpper=function(e){return ks(e).toUpperCase()},zn.trim=function(e,t,n){if((e=ks(e))&&(n||t===r))return Gt(e);if(!e||!(t=fi(t)))return e;var i=hn(e),o=hn(t);return Si(i,Zt(i,o),en(i,o)+1).join("")},zn.trimEnd=function(e,t,n){if((e=ks(e))&&(n||t===r))return e.slice(0,pn(e)+1);if(!e||!(t=fi(t)))return e;var i=hn(e);return Si(i,0,en(i,hn(t))+1).join("")},zn.trimStart=function(e,t,n){if((e=ks(e))&&(n||t===r))return e.replace(oe,"");if(!e||!(t=fi(t)))return e;var i=hn(e);return Si(i,Zt(i,hn(t))).join("")},zn.truncate=function(e,t){var n=30,i="...";if(rs(t)){var o="separator"in t?t.separator:o;n="length"in t?gs(t.length):n,i="omission"in t?fi(t.omission):i}var a=(e=ks(e)).length;if(an(e)){var s=hn(e);a=s.length}if(n>=a)return e;var u=n-dn(i);if(u<1)return i;var c=s?Si(s,0,u).join(""):e.slice(0,u);if(o===r)return c+i;if(s&&(u+=c.length-u),us(o)){if(e.slice(u).search(o)){var l,f=c;for(o.global||(o=Me(o.source,ks(pe.exec(o))+"g")),o.lastIndex=0;l=o.exec(f);)var d=l.index;c=c.slice(0,d===r?u:d)}}else if(e.indexOf(fi(o),u)!=u){var h=c.lastIndexOf(o);h>-1&&(c=c.slice(0,h))}return c+i},zn.unescape=function(e){return(e=ks(e))&&G.test(e)?e.replace(J,vn):e},zn.uniqueId=function(e){var t=++Fe;return ks(e)+t},zn.upperCase=Qs,zn.upperFirst=Zs,zn.each=ka,zn.eachRight=_a,zn.first=Go,lu(zn,function(){var e={};return _r(zn,(function(t,n){Re.call(zn.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),zn.VERSION="4.17.21",Ot(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){zn[e].placeholder=zn})),Ot(["drop","take"],(function(e,t){Vn.prototype[e]=function(n){n=n===r?1:bn(gs(n),0);var i=this.__filtered__&&!t?new Vn(this):this.clone();return i.__filtered__?i.__takeCount__=kn(n,i.__takeCount__):i.__views__.push({size:kn(n,v),type:e+(i.__dir__<0?"Right":"")}),i},Vn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Ot(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Vn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:lo(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),Ot(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Vn.prototype[e]=function(){return this[n](1).value()[0]}})),Ot(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Vn.prototype[e]=function(){return this.__filtered__?new Vn(this):this[n](1)}})),Vn.prototype.compact=function(){return this.filter(au)},Vn.prototype.find=function(e){return this.filter(e).head()},Vn.prototype.findLast=function(e){return this.reverse().find(e)},Vn.prototype.invokeMap=Qr((function(e,t){return"function"==typeof e?new Vn(this):this.map((function(n){return Ar(n,e,t)}))})),Vn.prototype.reject=function(e){return this.filter(Da(lo(e)))},Vn.prototype.slice=function(e,t){e=gs(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Vn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(n=(t=gs(t))<0?n.dropRight(-t):n.take(t-e)),n)},Vn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Vn.prototype.toArray=function(){return this.take(v)},_r(Vn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),o=zn[i?"take"+("last"==t?"Right":""):t],a=i||/^find/.test(t);o&&(zn.prototype[t]=function(){var t=this.__wrapped__,s=i?[1]:arguments,u=t instanceof Vn,c=s[0],l=u||Ja(t),f=function(e){var t=o.apply(zn,Lt([e],s));return i&&d?t[0]:t};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var d=this.__chain__,h=!!this.__actions__.length,p=a&&!d,v=u&&!h;if(!a&&l){t=v?t:new Vn(this);var m=e.apply(t,s);return m.__actions__.push({func:ma,args:[f],thisArg:r}),new Hn(m,d)}return p&&v?e.apply(this,s):(m=this.thru(f),p?i?m.value()[0]:m.value():m)})})),Ot(["pop","push","shift","sort","splice","unshift"],(function(e){var t=je[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);zn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Ja(i)?i:[],e)}return this[n]((function(n){return t.apply(Ja(n)?n:[],e)}))}})),_r(Vn.prototype,(function(e,t){var n=zn[t];if(n){var r=n.name+"";Re.call(Ln,r)||(Ln[r]=[]),Ln[r].push({name:t,func:n})}})),Ln[zi(r,2).name]=[{name:"wrapper",func:r}],Vn.prototype.clone=function(){var e=new Vn(this.__wrapped__);return e.__actions__=ji(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ji(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ji(this.__views__),e},Vn.prototype.reverse=function(){if(this.__filtered__){var e=new Vn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Vn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ja(e),r=t<0,i=n?e.length:0,o=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=kn(t,e+a);break;case"takeRight":e=bn(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,f=l.length,d=0,h=kn(u,this.__takeCount__);if(!n||!r&&i==u&&h==u)return mi(e,this.__actions__);var p=[];e:for(;u--&&d<h;){for(var v=-1,m=e[c+=t];++v<f;){var g=l[v],y=g.iteratee,w=g.type,b=y(m);if(2==w)m=b;else if(!b){if(1==w)continue e;break e}}p[d++]=m}return p},zn.prototype.at=ga,zn.prototype.chain=function(){return va(this)},zn.prototype.commit=function(){return new Hn(this.value(),this.__chain__)},zn.prototype.next=function(){this.__values__===r&&(this.__values__=vs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?r:this.__values__[this.__index__++]}},zn.prototype.plant=function(e){for(var t,n=this;n instanceof qn;){var i=zo(n);i.__index__=0,i.__values__=r,t?o.__wrapped__=i:t=i;var o=i;n=n.__wrapped__}return o.__wrapped__=e,t},zn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Vn){var t=e;return this.__actions__.length&&(t=new Vn(this)),(t=t.reverse()).__actions__.push({func:ma,args:[ra],thisArg:r}),new Hn(t,this.__chain__)}return this.thru(ra)},zn.prototype.toJSON=zn.prototype.valueOf=zn.prototype.value=function(){return mi(this.__wrapped__,this.__actions__)},zn.prototype.first=zn.prototype.head,tt&&(zn.prototype[tt]=function(){return this}),zn}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(dt._=mn,define((function(){return mn}))):pt?((pt.exports=mn)._=mn,ht._=mn):dt._=mn}.call(this),n.exports}.call({}),T=Fo(l),N={};Object.defineProperty(N,"__esModule",{value:!0});var R=async function(e){const t=e.text.replace(/^\s*<!doctype(\s+.*)?>\s*/i,"");let n,r;if("pandoc"===(0,q.atomConfig)().renderer)try{n=await wi.renderPandoc(t,e.filePath,e.renderLaTeX,e.renderErrors)}catch(e){const t=e;if(void 0===t.html)throw t;r=t.message,n=t.html}else n=await bi.MarkdownItWorker.render(t,e.renderLaTeX);const i=(new DOMParser).parseFromString(n,"text/html");if(function(e){e.querySelectorAll("script:not([type^='math/tex'])").forEach((e=>{e.remove()}));const t=["onabort","onblur","onchange","onclick","ondbclick","onerror","onfocus","onkeydown","onkeypress","onkeyup","onload","onmousedown","onmousemove","onmouseover","onmouseout","onmouseup","onreset","onresize","onscroll","onselect","onsubmit","onunload"];e.querySelectorAll("*").forEach((e=>t.map((t=>{e.removeAttribute(t)}))))}(i),"normal"===e.mode)e.imageWatcher&&e.imageWatcher.track(),Yi(i,e.filePath,!1,void 0,e.imageWatcher),e.imageWatcher&&e.imageWatcher.untrack();else switch(e.mode){case"save":Ji({doc:i,filePath:e.filePath,savePath:e.savePath,behaviour:(0,q.atomConfig)().saveConfig.mediaOnSaveAsHTMLBehaviour});break;case"copy":Ji({doc:i,filePath:e.filePath,behaviour:(0,q.atomConfig)().saveConfig.mediaOnCopyAsHTMLBehaviour});break;default:throw o=e,new Error(`Invalid render mode ${JSON.stringify(o)}`)}var o;let a="text";"source.litcoffee"===(e.grammar&&e.grammar.scopeName)&&(a="coffee");"pandoc"===(0,q.atomConfig)().renderer&&(0,q.atomConfig)().pandocConfig.useNativePandocCodeStyles||await(0,Mi.highlightCodeBlocks)(i,a);if(r){const e=i.createElement("div"),t=i.createElement("code");t.innerText=r,e.innerHTML=`<h1>Pandoc Error:</h1>${t.outerHTML}<hr>`,i.body.insertBefore(e,i.body.firstElementChild)}return i};N.render=R;var F=Hi(_),D={};Object.defineProperty(D,"__esModule",{value:!0});var B=async function(e,t,n,r){const{args:i,opts:o}=mi(t,n);let a;try{return await new Promise(((t,s)=>{const u=$.execFile((0,q.atomConfig)().pandocConfig.pandocPath,yi(i),o,(function(e,i,o){e&&(atom.notifications.addError(e.toString(),{stack:e.stack,dismissable:!0}),s(e));try{const e=function(e,t,n){return e?function(e,t,n){const r=new Error(e);throw r.html=gi(t,n),r}(e,t,n):gi(t,n)}(r&&o||"",i||"",n);t(e)}catch(e){s(e)}}));if(!u.stdin)throw new Error("No stdin");u.stdin.write(e),u.stdin.end(),a=window.setInterval((()=>{process.activateUvLoop()}),100)}))}finally{void 0!==a&&clearInterval(a)}};D.renderPandoc=B;var W=void 0;D.testing=W;var $=pi(i),z=pi(l),U=pi(_),q={};Object.defineProperty(q,"__esModule",{value:!0});var H=li;q.handlePromise=H;var V=function(e){return!!f(e)&&d(e).isFile()};q.isFileSync=V;var J=async function(e,t,n,r){const i=new X.WebviewHandler(r,(async()=>{await i.init({userMacros:(0,Ce.loadUserMacros)(),mathJaxConfig:{...fi().mathConfig,latexRenderer:"SVG"},context:"copy-html"}),await i.setBasePath(t);const r=await Oe.render({text:e,filePath:t,renderLaTeX:n,renderErrors:!1,mode:"copy"}),o=await i.update(r.documentElement.outerHTML,n);if(o){const e=o.replace(/"file:\/\/[^"#]*/g,'"');atom.config.get("markdown-preview-plus.richClipboard")?oi.write({text:e,html:e}):oi.writePlain(e)}i.destroy()}));i.element.style.pointerEvents="none",i.element.style.position="absolute",i.element.style.width="100vw",i.element.style.height="1px";atom.views.getView(atom.workspace).appendChild(i.element)};q.copyHtml=J;var Y=fi;q.atomConfig=Y;var G=function(){if(void 0!==di)return di;const e=atom.packages.getLoadedPackage("markdown-preview-plus");if(!e)throw new Error("markdown-preview-plus is not loaded but is running");return di=e.path};q.packagePath=G;var K=function(e){const t=fi().previewConfig.shellOpenFileExtensions.some((t=>e.toLowerCase().endsWith(`.${t.toLowerCase()}`)));e.startsWith("file://")&&!t?li(atom.workspace.open((0,si.default)(e))):li(u.openExternal(e))};q.shellOpen=K;var X={};Object.defineProperty(X,"__esModule",{value:!0});var Q=void 0;X.WebviewHandler=Q;var Z={};Object.defineProperty(Z,"__esModule",{value:!0});var ee=void 0;Z.WebContentsHandler=ee;var te={};Object.defineProperty(te,"__esModule",{value:!0});var ne=function(e){for(const t of atom.workspace.getTextEditors())if(t.id===e)return t;return};te.editorForId=ne;var re=pe;te.getUserStyles=re;var ie=me;te.getPreviewStyles=ie;var oe=function(e){let t;if("string"==typeof e){const n=new DOMParser;t=n.parseFromString(e,"text/html")}else t=e;const n={};for(const e of Array.from(t.querySelectorAll("[data-source-lines],[data-pos]"))){const t=e,[r,i]=t.dataset.sourceLines?t.dataset.sourceLines.split(" ").map((e=>parseInt(e,10))):t.dataset.pos.slice(1).split("-").map((e=>parseInt(e.split(":")[0],10)-1));if(void 0===r||void 0===i)continue;let o=e;const a=[];for(;o&&"BODY"!==o.tagName;){let e=0,t=o;for(;t.previousElementSibling;)t=t.previousElementSibling,t.tagName===o.tagName&&e++;a.unshift({tag:o.tagName.toLowerCase(),index:e}),o=o.parentElement}for(let e=r;e<i;++e)(!n[e]||n[e].length<=a.length)&&(n[e]=a)}return n};te.buildLineMap=oe;var ae=function(e,t,n,r,i){let o;o=n?function(e){return`<script type="text/x-mathjax-config">\n  MathJax.Hub.Config({\n    jax: ["input/TeX","output/HTML-CSS"],\n    extensions: ["[a11y]/accessibility-menu.js"],\n    'HTML-CSS': {\n      availableFonts: [],\n      webFont: 'TeX',\n      undefinedFamily: ${JSON.stringify((0,q.atomConfig)().mathConfig.undefinedFamily)},\n      mtextFontInherit: true,\n    },\n    TeX: ${JSON.stringify(e,void 0,2)},\n    showMathMenu: true\n  });\n<\/script>\n<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js"><\/script>`}(r):"";return`<!DOCTYPE html>\n<html data-markdown-preview-plus-context="html-export">\n  <head>\n    <meta charset="utf-8" />\n    <title>${e}</title>${o}\n    <style>${function(e){const t=/url\(atom:\/\/markdown-preview-plus\/assets\/(.*)\)/;return me(!1,e).join("\n").replace(t,(function(e,t,n,r){const i=ue.join((0,q.packagePath)(),"assets",t),o=ce.readFileSync(i,"binary");return`url('data:image/jpeg;base64,${Buffer.from(o,"binary").toString("base64")}')`}))}(i)}</style>\n${t.head.innerHTML}\n  </head>\n  <body>\n    ${t.body.innerHTML}\n  </body>\n</html>\n`};te.mkHtml=ae;var se=function(e){const t=atom.workspace.paneForItem(e);t?(0,q.handlePromise)(t.destroyItem(e)):e.destroy()};te.destroy=se;var ue=fe(_),ce=fe(l);function le(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(le=function(e){return e?n:t})(e)}function fe(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=le(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}function*de(e){const t=atom.styles.getStyleElements();for(const n of t)void 0!==e&&n.getAttribute("context")!==e||(yield n.innerText)}function he(e){return atom.themes.loadStylesheet(ue.join((0,q.packagePath)(),"styles-client",`${e}.less`))}function pe(){const e=atom.styles.styleElementsBySourcePath[atom.styles.getUserStyleSheetPath()];return e?[e.innerText]:[]}function*ve(e){const t=atom.packages.getActivePackage(e);if(!t)return;const n=t.getStylesheetPaths();for(const e of n){const t=atom.styles.styleElementsBySourcePath[e];t&&(yield t.innerText)}}function me(e,t){var n,r;if(null!==(n=window["markdown-preview-plus-tests"])&&void 0!==n&&n.getStylesOverride)return null===(r=window["markdown-preview-plus-tests"])||void 0===r?void 0:r.getStylesOverride(e);const i=[];if(e){const e=atom.styles.styleElementsBySourcePath["global-text-editor-styles"];e&&i.push(...function*(e){for(const t of e)yield t.replace(/\batom-workspace\b/g,":root")}([e.innerText])),i.push(he("editor-global-font"));const t=(0,q.atomConfig)().importPackageStyles;if(t.includes("*"))i.push(...ge(de())),i.push(he("patch"));else{for(const e of t)i.push(...ge(ve(e)));if(t.includes("fonts")){const e=atom.styles.styleElementsBySourcePath["fonts-package-editorfont"];e&&i.push(...ge([e.innerText]))}}}return i.push(he("generic")),e&&i.push(he("display")),i.push(he(t)),i.push(...function(e){if(""!==e){const t=atom.themes.getLoadedThemes();if(t){const[n]=t.filter((t=>t.name===e));if(n)return ge(n.getStylesheetPaths().map((e=>atom.themes.loadStylesheet(e))))}atom.notifications.addWarning("Failed to load syntax theme",{detail:`Markdown-preview-plus couldn't find '${e}'`})}return ge(de("atom-text-editor"))}((0,q.atomConfig)().syntaxThemeName)),i.push(...ge(pe())),i}function*ge(e){for(const t of e)yield t.replace(/\batom-text-editor\b/g,"pre.editor-colors")}var ye={};Object.defineProperty(ye,"__esModule",{value:!0});var we=void 0;function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ye.ImageWatcher=we;we=class{constructor(e){be(this,"registry",new Map),be(this,"disposed",!1),be(this,"lastImages",new Set),be(this,"tracked",!1),this.callback=e}watch(e){this.tracked&&this.lastImages.add(e);const t=this.registry.get(e);if(!t&&(0,q.isFileSync)(e)){const t=Date.now(),n=new v,r=new g(e);return n.add(r.onDidChange(this.srcClosure(e,"change")),r.onDidDelete(this.srcClosure(e,"delete")),r.onDidRename(this.srcClosure(e,"rename"))),this.registry.set(e,{version:t,watcher:n}),t}return t?t.version:void 0}track(){this.lastImages.clear(),this.tracked=!0}untrack(){this.tracked=!1;const e=Array.from(this.registry.entries());for(const[t,n]of e)this.lastImages.has(t)||(n.watcher.dispose(),this.registry.delete(t));this.lastImages.clear()}dispose(){this.disposed||(this.clear(),this.disposed=!0)}clear(){for(const e of this.registry.values())e.watcher.dispose();this.registry.clear()}srcClosure(e,t){return()=>{const n=this.registry.get(e);n&&("change"===t&&(0,q.isFileSync)(e)?(n.version=Date.now(),this.refreshImages(e,n.version)):(n.watcher.dispose(),this.registry.delete(e),this.refreshImages(e)))}}refreshImages(e,t){this.disposed||this.callback(e,t)}},ye.ImageWatcher=we;var ke=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=_e(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(_);function _e(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_e=function(e){return e?n:t})(e)}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class xe{constructor(e,t,n,r){Se(this,"emitter",new p),Se(this,"destroyed",!1),Se(this,"disposables",new v),Se(this,"zoomLevel",0),Se(this,"replyCallbackId",0),Se(this,"replyCallbacks",new Map),Se(this,"id",++xe._id),Se(this,"listeners",{}),Se(this,"stylesReady",!1),Se(this,"initializeContents",(async e=>{e.once("destroyed",(()=>this.destroy())),e.on("will-navigate",(async(e,t)=>{e.preventDefault(),(0,q.shellOpen)(t)})),e.getURL().includes("client/template.html")||await e.loadFile(ke.join((0,q.packagePath)(),"client","template.html"),{hash:atom.inDevMode()?"dev":void 0});const t=async()=>{this.destroyed||(e.send("set-id",this.id),e.setZoomLevel(this.zoomLevel),this.stylesReady=!0,(0,q.handlePromise)(this.updateStyles().then(this.initCont)))};return await t(),e.on("dom-ready",t),e})),this.clientStyle=n,this.initCont=r,this.addListeners({"atom-markdown-preview-plus-ipc-zoom-in":this.zoomIn.bind(this),"atom-markdown-preview-plus-ipc-zoom-out":this.zoomOut.bind(this),"atom-markdown-preview-plus-ipc-did-scroll-preview":e=>{this.emitter.emit("did-scroll-preview",e)},"atom-markdown-preview-plus-ipc-uncaught-error":e=>{const t=new Error;atom.notifications.addFatalError(`Uncaught error ${e.name} in markdown-preview-plus webview client`,{dismissable:!0,stack:t.stack,detail:`${e.message}\n\nstack:\n${e.stack}`})},"atom-markdown-preview-plus-ipc-show-context-menu":()=>{t()},"atom-markdown-preview-plus-ipc-request-reply":({id:e,request:t,result:n})=>{const r=this.replyCallbacks.get(e);if(r&&t===r.request){(0,r.callback)(n)}},"atom-markdown-preview-plus-ipc-key":e=>{const t=new KeyboardEvent(e.type,e);this.element&&this.element.dispatchEvent(t)}}),this.disposables.add(atom.styles.onDidAddStyleElement((()=>{(0,q.handlePromise)(this.updateStyles())})),atom.styles.onDidRemoveStyleElement((()=>{(0,q.handlePromise)(this.updateStyles())})),atom.styles.onDidUpdateStyleElement((()=>{(0,q.handlePromise)(this.updateStyles())})),atom.config.onDidChange("markdown-preview-plus.useGitHubStyle",(()=>{(0,q.handlePromise)(this.updateStyles())})),atom.config.onDidChange("markdown-preview-plus.syntaxThemeName",(()=>{(0,q.handlePromise)(this.updateStyles())})),atom.config.onDidChange("markdown-preview-plus.importPackageStyles",(()=>{(0,q.handlePromise)(this.updateStyles())}))),this.contents=e.then(this.initializeContents),this.disposables.add(this.imageWatcher=new ye.ImageWatcher(this.updateImages.bind(this)))}async setClientStyle(e){return this.clientStyle=e,this.updateStyles()}async runJS(e){return(await this.contents).executeJavaScript(e,!1)}destroy(){if(!this.destroyed){this.destroyed=!0;for(const[e,t]of Object.entries(this.listeners))s.ipcMain.removeListener(e,t),delete this.listeners[e];this.emitter.emit("did-destroy"),this.disposables.dispose(),this.emitter.dispose()}}onDidDestroy(e){return this.emitter.on("did-destroy",e)}async update(e,t,n="none",r,i){if(!this.destroyed)return this.runRequest("update-preview",{html:e,renderLaTeX:t,map:r,diffMethod:n,scrollSyncParams:i})}async fullyReady(){if(!this.destroyed)return this.runRequest("await-fully-ready",{})}async setBasePath(e){return this.send("set-base-path",{path:e})}async setNativeKeys(e){return this.send("set-native-keys",e)}async init(e){return this.send("init",e)}async updateImages(e,t){return this.send("update-images",{oldsrc:e,v:t})}async printToPDF(e){return(await this.contents).printToPDF(e)}async sync(e,t){return this.send("sync",{line:e,flash:t})}async syncSource(){return this.runRequest("sync-source",{})}async scrollSync(e,t){return this.send("scroll-sync",{firstLine:e,lastLine:t})}async zoomIn(){this.zoomLevel+=.1,(await this.contents).setZoomLevel(this.zoomLevel)}async zoomOut(){this.zoomLevel-=.1,(await this.contents).setZoomLevel(this.zoomLevel)}async resetZoom(){this.zoomLevel=0,(await this.contents).setZoomLevel(this.zoomLevel)}async print(){(await this.contents).print()}async openDevTools(){(await this.contents).openDevTools()}async reload(){await this.runRequest("reload",{}),(await this.contents).reload()}async error(e){return this.send("error",{msg:e})}async getTeXConfig(){return this.runRequest("get-tex-config",{})}async getSelection(){return this.runRequest("get-selection",{})}async search(e){(await this.contents).findInPage(e),this.lastSearchText=e}async findNext(){if(!this.lastSearchText)return;(await this.contents).findInPage(this.lastSearchText,{findNext:!0})}hasSearch(){return!!this.lastSearchText}async stopSearch(){const e=await this.contents;this.lastSearchText=void 0,e.stopFindInPage("keepSelection")}async updateStyles(){if(this.stylesReady)return this.send("style",{styles:(0,te.getPreviewStyles)(!0,this.clientStyle)})}async runRequest(e,t){const n=this.replyCallbackId++,r=new Promise((t=>{this.replyCallbacks.set(n,{request:e,callback:e=>{this.replyCallbacks.delete(n),t(e)}})})),i=Object.assign({id:n},t);return await this.send(e,i),r}async send(e,t){(await this.contents).send(e,t)}addListeners(e){for(const[t,n]of Object.entries(e))this.listeners[t]=(e,t,...r)=>{this.id===t&&n(...r)},s.ipcMain.on(t,this.listeners[t])}}ee=xe,Z.WebContentsHandler=ee,Se(xe,"_id",0);class Pe extends Z.WebContentsHandler{constructor(e,t){const n=document.createElement("webview");super(new Promise((e=>{const t=()=>{n.removeEventListener("dom-ready",t),e(s.webContents.fromId(n.getWebContentsId()))};n.addEventListener("dom-ready",t)})),(()=>{atom.contextMenu.showForEvent({target:this._element})}),e,t),this._element=document.createElement("div"),this._element.style.width="100%",this._element.style.height="100%",n.style.display="none",this._observer=new ResizeObserver((()=>{requestAnimationFrame(this.updatePosition.bind(this))})),this._observer.observe(this._element),this.dragStart=()=>{n.style.pointerEvents="none"},this.dragEnd=()=>{n.style.pointerEvents="auto"},window.addEventListener("dragstart",this.dragStart),window.addEventListener("dragend",this.dragEnd),n.disablewebsecurity=!0,n.nodeintegration=!0,n.src="about:blank",n.style.position="absolute",n.style.zIndex="0",this._webview=n,atom.views.getView(atom.workspace).appendChild(n)}registerViewEvents(e){this._webview.addEventListener("focus",(()=>{const t=atom.workspace.paneForItem(e);t&&(t.activate(),this._webview.focus())}));const t=atom.views.getView(e);this._observer2=new MutationObserver((e=>{for(const n of e)Array.from(n.addedNodes).includes(t)&&this.updatePosition()})),this._observer2.observe(atom.views.getView(atom.workspace).querySelector("atom-workspace-axis"),{childList:!0,subtree:!0})}get element(){return this._element}destroy(){this.destroyed||(super.destroy(),window.removeEventListener("dragstart",this.dragStart),window.removeEventListener("dragend",this.dragEnd),this._observer.disconnect(),this._observer2&&this._observer2.disconnect(),this._element.remove(),this._webview.remove())}updatePosition(){const e=this._element.getBoundingClientRect();this._webview.style.display="",this._webview.style.left=`${e.left}px`,this._webview.style.top=`${e.top}px`,this._webview.style.right=`${e.right}px`,this._webview.style.bottom=`${e.bottom}px`,this._webview.style.width=`${e.width}px`,this._webview.style.height=`${e.height}px`,this._webview.style.pointerEvents=this._element.style.pointerEvents,this._webview.style.opacity=this._element.style.opacity}}Q=Pe,X.WebviewHandler=Q;var Oe=ci(N),Ce={};Object.defineProperty(Ce,"__esModule",{value:!0});var Me=Kr;Ce.getUserMacrosPath=Me;var Ee=function(e=atom.getConfigDirPath()){return function(e){try{const t=Jr.readFileSync(e).toString("utf-8");return function(e){const t=/^[^a-zA-Z\d\s]$|^[a-zA-Z]*$/,n={};for(const r of Object.keys(e)){const i=e[r];r.match(t)&&Qr(i)?n[r]=i:atom.notifications.addWarning(`Markdown-Preview-Plus failed to load LaTeX macro named '${r}'. Please see the [LaTeX guide](https://github.com/atom-community/markdown-preview-plus/blob/master/docs/math.md#macro-names)`)}return n}(Vr.parse(t)||{})}catch(t){const n=t;return console.warn(`Error reading Latex Macros file '${e}': ${void 0!==n.stack?n.stack:n}`),console.error(`Failed to load Latex Macros from '${e}'`,{detail:n.message,dismissable:!0}),{}}}(Kr(e))};Ce.loadUserMacros=Ee;var Ie=Gr(_);function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Te(e,t,n){return t&&Le(e.prototype,t),n&&Le(e,n),e}function Ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Re(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&De(e,t)}function Fe(e){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function De(e,t){return(De=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Be(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function We(e,t,n){return(We=Be()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&De(i,n.prototype),i}).apply(null,arguments)}function $e(e){var t="function"==typeof Map?new Map:void 0;return($e=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return We(e,arguments,Fe(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),De(r,e)})(e)}function ze(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ue(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?ze(e):t}function qe(e){var t=Be();return function(){var n,r=Fe(e);if(t){var i=Fe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ue(this,n)}}function He(e,t,n){return(He="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Fe(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Ve(e,t){return Ye(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||Ge(e,t)||Xe()}function Je(e){return Ye(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Ge(e)||Xe()}function Ye(e){if(Array.isArray(e))return e}function Ge(e,t){if(e){if("string"==typeof e)return Ke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ke(e,t):void 0}}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Qe(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Ge(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}var Ze="&",et="#",tt="!",nt="-",rt=".",it="ALIAS",ot="BLANK_LINE",at="BLOCK_FOLDED",st="BLOCK_LITERAL",ut="COMMENT",ct="DIRECTIVE",lt="DOCUMENT",ft="FLOW_MAP",dt="FLOW_SEQ",ht="MAP",pt="MAP_KEY",vt="MAP_VALUE",mt="PLAIN",gt="QUOTE_DOUBLE",yt="QUOTE_SINGLE",wt="SEQ",bt="SEQ_ITEM",kt={MAP:"tag:yaml.org,2002:map",SEQ:"tag:yaml.org,2002:seq",STR:"tag:yaml.org,2002:str"};function _t(e){for(var t=[0],n=e.indexOf("\n");-1!==n;)n+=1,t.push(n),n=e.indexOf("\n",n);return t}function St(e){var t,n;return"string"==typeof e?(t=_t(e),n=e):(Array.isArray(e)&&(e=e[0]),e&&e.context&&(e.lineStarts||(e.lineStarts=_t(e.context.src)),t=e.lineStarts,n=e.context.src)),{lineStarts:t,src:n}}function xt(e,t){if("number"!=typeof e||e<0)return null;var n=St(t),r=n.lineStarts,i=n.src;if(!r||!i||e>i.length)return null;for(var o=0;o<r.length;++o){var a=r[o];if(e<a)return{line:o,col:e-r[o-1]+1};if(e===a)return{line:o+1,col:1}}var s=r.length;return{line:s,col:e-r[s-1]+1}}function Pt(e,t){var n=St(t),r=n.lineStarts,i=n.src;if(!r||!(e>=1)||e>r.length)return null;for(var o=r[e-1],a=r[e];a&&a>o&&"\n"===i[a-1];)--a;return i.slice(o,a)}var Ot=function(){function e(t,n){Ae(this,e),this.start=t,this.end=n||t}return Te(e,[{key:"isEmpty",value:function(){return"number"!=typeof this.start||!this.end||this.end<=this.start}},{key:"setOrigRange",value:function(e,t){var n=this.start,r=this.end;if(0===e.length||r<=e[0])return this.origStart=n,this.origEnd=r,t;for(var i=t;i<e.length&&!(e[i]>n);)++i;this.origStart=n+i;for(var o=i;i<e.length&&!(e[i]>=r);)++i;return this.origEnd=r+i,o}}],[{key:"copy",value:function(t){return new e(t.start,t.end)}}]),e}(),Ct=function(){function e(t,n,r){Ae(this,e),Object.defineProperty(this,"context",{value:r||null,writable:!0}),this.error=null,this.range=null,this.valueRange=null,this.props=n||[],this.type=t,this.value=null}return Te(e,[{key:"getPropValue",value:function(e,t,n){if(!this.context)return null;var r=this.context.src,i=this.props[e];return i&&r[i.start]===t?r.slice(i.start+(n?1:0),i.end):null}},{key:"anchor",get:function(){for(var e=0;e<this.props.length;++e){var t=this.getPropValue(e,Ze,!0);if(null!=t)return t}return null}},{key:"comment",get:function(){for(var e=[],t=0;t<this.props.length;++t){var n=this.getPropValue(t,et,!0);null!=n&&e.push(n)}return e.length>0?e.join("\n"):null}},{key:"commentHasRequiredWhitespace",value:function(t){var n=this.context.src;if(this.header&&t===this.header.end)return!1;if(!this.valueRange)return!1;var r=this.valueRange.end;return t!==r||e.atBlank(n,r-1)}},{key:"hasComment",get:function(){if(this.context)for(var e=this.context.src,t=0;t<this.props.length;++t)if(e[this.props[t].start]===et)return!0;return!1}},{key:"hasProps",get:function(){if(this.context)for(var e=this.context.src,t=0;t<this.props.length;++t)if(e[this.props[t].start]!==et)return!0;return!1}},{key:"includesTrailingLines",get:function(){return!1}},{key:"jsonLike",get:function(){return-1!==[ft,dt,gt,yt].indexOf(this.type)}},{key:"rangeAsLinePos",get:function(){if(this.range&&this.context){var e=xt(this.range.start,this.context.root);if(e)return{start:e,end:xt(this.range.end,this.context.root)}}}},{key:"rawValue",get:function(){if(!this.valueRange||!this.context)return null;var e=this.valueRange,t=e.start,n=e.end;return this.context.src.slice(t,n)}},{key:"tag",get:function(){for(var e=0;e<this.props.length;++e){var t=this.getPropValue(e,tt,!1);if(null!=t){if("<"===t[1])return{verbatim:t.slice(2,-1)};var n=Ve(t.match(/^(.*!)([^!]*)$/),3);return n[0],{handle:n[1],suffix:n[2]}}}return null}},{key:"valueRangeContainsNewline",get:function(){if(!this.valueRange||!this.context)return!1;for(var e=this.valueRange,t=e.start,n=e.end,r=this.context.src,i=t;i<n;++i)if("\n"===r[i])return!0;return!1}},{key:"parseComment",value:function(t){var n=this.context.src;if(n[t]===et){var r=e.endOfLine(n,t+1),i=new Ot(t,r);return this.props.push(i),r}return t}},{key:"setOrigRanges",value:function(e,t){return this.range&&(t=this.range.setOrigRange(e,t)),this.valueRange&&this.valueRange.setOrigRange(e,t),this.props.forEach((function(n){return n.setOrigRange(e,t)})),t}},{key:"toString",value:function(){var t=this.context.src,n=this.range,r=this.value;if(null!=r)return r;var i=t.slice(n.start,n.end);return e.addStringTerminator(t,n.end,i)}}],[{key:"addStringTerminator",value:function(t,n,r){if("\n"===r[r.length-1])return r;var i=e.endOfWhiteSpace(t,n);return i>=t.length||"\n"===t[i]?r+"\n":r}},{key:"atDocumentBoundary",value:function(e,t,n){var r=e[t];if(!r)return!0;var i=e[t-1];if(i&&"\n"!==i)return!1;if(n){if(r!==n)return!1}else if(r!==nt&&r!==rt)return!1;var o=e[t+1],a=e[t+2];if(o!==r||a!==r)return!1;var s=e[t+3];return!s||"\n"===s||"\t"===s||" "===s}},{key:"endOfIdentifier",value:function(e,t){for(var n=e[t],r="<"===n,i=r?["\n","\t"," ",">"]:["\n","\t"," ","[","]","{","}",","];n&&-1===i.indexOf(n);)n=e[t+=1];return r&&">"===n&&(t+=1),t}},{key:"endOfIndent",value:function(e,t){for(var n=e[t];" "===n;)n=e[t+=1];return t}},{key:"endOfLine",value:function(e,t){for(var n=e[t];n&&"\n"!==n;)n=e[t+=1];return t}},{key:"endOfWhiteSpace",value:function(e,t){for(var n=e[t];"\t"===n||" "===n;)n=e[t+=1];return t}},{key:"startOfLine",value:function(e,t){var n=e[t-1];if("\n"===n)return t;for(;n&&"\n"!==n;)n=e[t-=1];return t+1}},{key:"endOfBlockIndent",value:function(t,n,r){var i=e.endOfIndent(t,r);if(i>r+n)return i;var o=e.endOfWhiteSpace(t,i),a=t[o];return a&&"\n"!==a?null:o}},{key:"atBlank",value:function(e,t,n){var r=e[t];return"\n"===r||"\t"===r||" "===r||n&&!r}},{key:"nextNodeIsIndented",value:function(e,t,n){return!(!e||t<0)&&(t>0||n&&"-"===e)}},{key:"normalizeOffset",value:function(t,n){var r=t[n];return r?"\n"!==r&&"\n"===t[n-1]?n-1:e.endOfWhiteSpace(t,n):n}},{key:"foldNewline",value:function(t,n,r){for(var i=0,o=!1,a="",s=t[n+1];" "===s||"\t"===s||"\n"===s;){switch(s){case"\n":i=0,n+=1,a+="\n";break;case"\t":i<=r&&(o=!0),n=e.endOfWhiteSpace(t,n+2)-1;break;case" ":i+=1,n+=1}s=t[n+1]}return a||(a=" "),s&&i<=r&&(o=!0),{fold:a,offset:n,error:o}}}]),e}(),Mt=function(e){Re(n,$e(Error));var t=qe(n);function n(e,r,i){var o;if(Ae(this,n),!(i&&r instanceof Ct))throw new Error("Invalid arguments for new ".concat(e));return(o=t.call(this)).name=e,o.message=i,o.source=r,o}return Te(n,[{key:"makePretty",value:function(){if(this.source){this.nodeType=this.source.type;var e=this.source.context&&this.source.context.root;if("number"==typeof this.offset){this.range=new Ot(this.offset,this.offset+1);var t=e&&xt(this.offset,e);if(t){var n={line:t.line,col:t.col+1};this.linePos={start:t,end:n}}delete this.offset}else this.range=this.source.range,this.linePos=this.source.rangeAsLinePos;if(this.linePos){var r=this.linePos.start,i=r.line,o=r.col;this.message+=" at line ".concat(i,", column ").concat(o);var a=e&&function(e,t){var n=e.start,r=e.end,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:80,o=Pt(n.line,t);if(!o)return null;var a=n.col;if(o.length>i)if(a<=i-10)o=o.substr(0,i-1)+"…";else{var s=Math.round(i/2);o.length>a+s&&(o=o.substr(0,a+s-1)+"…"),a-=o.length-i,o="…"+o.substr(1-i)}var u=1,c="";r&&(r.line===n.line&&a+(r.col-n.col)<=i+1?u=r.col-n.col:(u=Math.min(o.length+1,i)-a,c="…"));var l=a>1?" ".repeat(a-1):"",f="^".repeat(u);return"".concat(o,"\n").concat(l).concat(f).concat(c)}(this.linePos,e);a&&(this.message+=":\n\n".concat(a,"\n"))}delete this.source}}}]),n}(),Et=function(e){Re(n,Mt);var t=qe(n);function n(e,r){return Ae(this,n),t.call(this,"YAMLReferenceError",e,r)}return n}(),It=function(e){Re(n,Mt);var t=qe(n);function n(e,r){return Ae(this,n),t.call(this,"YAMLSemanticError",e,r)}return n}(),jt=function(e){Re(n,Mt);var t=qe(n);function n(e,r){return Ae(this,n),t.call(this,"YAMLSyntaxError",e,r)}return n}(),At=function(e){Re(n,Mt);var t=qe(n);function n(e,r){return Ae(this,n),t.call(this,"YAMLWarning",e,r)}return n}(),Lt=function(e){Re(n,Ct);var t=qe(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Te(n,[{key:"strValue",get:function(){if(!this.valueRange||!this.context)return null;for(var e=this.valueRange,t=e.start,n=e.end,r=this.context.src,i=r[n-1];t<n&&("\n"===i||"\t"===i||" "===i);)i=r[--n-1];for(var o="",a=t;a<n;++a){var s=r[a];if("\n"===s){var u=Ct.foldNewline(r,a,-1);o+=u.fold,a=u.offset}else if(" "===s||"\t"===s){for(var c=a,l=r[a+1];a<n&&(" "===l||"\t"===l);)l=r[(a+=1)+1];"\n"!==l&&(o+=a>c?r.slice(c,a+1):s)}else o+=s}var f=r[t];switch(f){case"\t":return{errors:[new It(this,"Plain value cannot start with a tab character")],str:o};case"@":case"`":var d="Plain value cannot start with reserved character ".concat(f);return{errors:[new It(this,d)],str:o};default:return o}}},{key:"parseBlockValue",value:function(e){for(var t=this.context,r=t.indent,i=t.inFlow,o=t.src,a=e,s=e,u=o[a];"\n"===u&&!Ct.atDocumentBoundary(o,a+1);u=o[a]){var c=Ct.endOfBlockIndent(o,r,a+1);if(null===c||"#"===o[c])break;a="\n"===o[c]?c:s=n.endOfLine(o,c,i)}return this.valueRange.isEmpty()&&(this.valueRange.start=e),this.valueRange.end=s,s}},{key:"parse",value:function(e,t){this.context=e;var r=e.inFlow,i=e.src,o=t,a=i[o];return a&&"#"!==a&&"\n"!==a&&(o=n.endOfLine(i,t,r)),this.valueRange=new Ot(t,o),o=Ct.endOfWhiteSpace(i,o),o=this.parseComment(o),this.hasComment&&!this.valueRange.isEmpty()||(o=this.parseBlockValue(o)),o}}],[{key:"endOfLine",value:function(e,t,n){for(var r=e[t],i=t;r&&"\n"!==r&&(!n||"["!==r&&"]"!==r&&"{"!==r&&"}"!==r&&","!==r);){var o=e[i+1];if(":"===r&&(!o||"\n"===o||"\t"===o||" "===o||n&&","===o))break;if((" "===r||"\t"===r)&&"#"===o)break;i+=1,r=o}return i}}]),n}(),Tt=function(e){Re(n,Ct);var t=qe(n);function n(){return Ae(this,n),t.call(this,ot)}return Te(n,[{key:"includesTrailingLines",get:function(){return!0}},{key:"parse",value:function(e,t){return this.context=e,this.range=new Ot(t,t+1),t+1}}]),n}(),Nt=function(e){Re(n,Ct);var t=qe(n);function n(e,r){var i;return Ae(this,n),(i=t.call(this,e,r)).node=null,i}return Te(n,[{key:"includesTrailingLines",get:function(){return!!this.node&&this.node.includesTrailingLines}},{key:"parse",value:function(e,t){this.context=e;var n=e.parseNode,r=e.src,i=e.atLineStart,o=e.lineStart;i||this.type!==bt||(this.error=new It(this,"Sequence items must not have preceding content on the same line"));for(var a=i?t-o:e.indent,s=Ct.endOfWhiteSpace(r,t+1),u=r[s],c="#"===u,l=[],f=null;"\n"===u||"#"===u;){if("#"===u){var d=Ct.endOfLine(r,s+1);l.push(new Ot(s,d)),s=d}else{i=!0,o=s+1,"\n"===r[Ct.endOfWhiteSpace(r,o)]&&0===l.length&&(o=(f=new Tt).parse({src:r},o)),s=Ct.endOfIndent(r,o)}u=r[s]}if(Ct.nextNodeIsIndented(u,s-(o+a),this.type!==bt)?this.node=n({atLineStart:i,inCollection:!1,indent:a,lineStart:o,parent:this},s):u&&o>t+1&&(s=o-1),this.node){if(f){var h=e.parent.items||e.parent.contents;h&&h.push(f)}l.length&&Array.prototype.push.apply(this.props,l),s=this.node.range.end}else if(c){var p=l[0];this.props.push(p),s=p.end}else s=Ct.endOfLine(r,t+1);var v=this.node?this.node.valueRange.end:s;return this.valueRange=new Ot(t,v),s}},{key:"setOrigRanges",value:function(e,t){return t=He(Fe(n.prototype),"setOrigRanges",this).call(this,e,t),this.node?this.node.setOrigRanges(e,t):t}},{key:"toString",value:function(){var e=this.context.src,t=this.node,n=this.range,r=this.value;if(null!=r)return r;var i=t?e.slice(n.start,t.range.start)+String(t):e.slice(n.start,n.end);return Ct.addStringTerminator(e,n.end,i)}}]),n}(),Rt=function(e){Re(n,Ct);var t=qe(n);function n(){return Ae(this,n),t.call(this,ut)}return Te(n,[{key:"parse",value:function(e,t){this.context=e;var n=this.parseComment(t);return this.range=new Ot(t,n),n}}]),n}();function Ft(e){for(var t=e;t instanceof Nt;)t=t.node;if(!(t instanceof Dt))return null;for(var n=t.items.length,r=-1,i=n-1;i>=0;--i){var o=t.items[i];if(o.type===ut){var a=o.context,s=a.indent,u=a.lineStart;if(s>0&&o.range.start>=u+s)break;r=i}else{if(o.type!==ot)break;r=i}}if(-1===r)return null;for(var c=t.items.splice(r,n-r),l=c[0].range.start;t.range.end=l,t.valueRange&&t.valueRange.end>l&&(t.valueRange.end=l),t!==e;)t=t.context.parent;return c}var Dt=function(e){Re(n,Ct);var t=qe(n);function n(e){var r;Ae(this,n),r=t.call(this,e.type===bt?wt:ht);for(var i=e.props.length-1;i>=0;--i)if(e.props[i].start<e.context.lineStart){r.props=e.props.slice(0,i+1),e.props=e.props.slice(i+1);var o=e.props[0]||e.valueRange;e.range.start=o.start;break}r.items=[e];var a=Ft(e);return a&&Array.prototype.push.apply(r.items,a),r}return Te(n,[{key:"includesTrailingLines",get:function(){return this.items.length>0}},{key:"parse",value:function(e,t){this.context=e;var r=e.parseNode,i=e.src,o=Ct.startOfLine(i,t),a=this.items[0];a.context.parent=this,this.valueRange=Ot.copy(a.valueRange);for(var s=a.range.start-a.context.lineStart,u=t,c=i[u=Ct.normalizeOffset(i,u)],l=Ct.endOfWhiteSpace(i,o)===u,f=!1;c;){for(;"\n"===c||"#"===c;){if(l&&"\n"===c&&!f){var d=new Tt;if(u=d.parse({src:i},u),this.valueRange.end=u,u>=i.length){c=null;break}this.items.push(d),u-=1}else if("#"===c){if(u<o+s&&!n.nextContentHasIndent(i,u,s))return u;var h=new Rt;if(u=h.parse({indent:s,lineStart:o,src:i},u),this.items.push(h),this.valueRange.end=u,u>=i.length){c=null;break}}if(o=u+1,u=Ct.endOfIndent(i,o),Ct.atBlank(i,u)){var p=Ct.endOfWhiteSpace(i,u),v=i[p];v&&"\n"!==v&&"#"!==v||(u=p)}c=i[u],l=!0}if(!c)break;if(u!==o+s&&(l||":"!==c)){if(u<o+s){o>t&&(u=o);break}if(!this.error){this.error=new jt(this,"All collection items must start at the same column")}}if(a.type===bt){if("-"!==c){o>t&&(u=o);break}}else if("-"===c&&!this.error){var m=i[u+1];if(!m||"\n"===m||"\t"===m||" "===m){this.error=new jt(this,"A collection cannot be both a mapping and a sequence")}}var g=r({atLineStart:l,inCollection:!0,indent:s,lineStart:o,parent:this},u);if(!g)return u;if(this.items.push(g),this.valueRange.end=g.valueRange.end,c=i[u=Ct.normalizeOffset(i,g.range.end)],l=!1,f=g.includesTrailingLines,c){for(var y=u-1,w=i[y];" "===w||"\t"===w;)w=i[--y];"\n"===w&&(o=y+1,l=!0)}var b=Ft(g);b&&Array.prototype.push.apply(this.items,b)}return u}},{key:"setOrigRanges",value:function(e,t){return t=He(Fe(n.prototype),"setOrigRanges",this).call(this,e,t),this.items.forEach((function(n){t=n.setOrigRanges(e,t)})),t}},{key:"toString",value:function(){var e=this.context.src,t=this.items,n=this.range,r=this.value;if(null!=r)return r;for(var i=e.slice(n.start,t[0].range.start)+String(t[0]),o=1;o<t.length;++o){var a=t[o],s=a.context,u=s.atLineStart,c=s.indent;if(u)for(var l=0;l<c;++l)i+=" ";i+=String(a)}return Ct.addStringTerminator(e,n.end,i)}}],[{key:"nextContentHasIndent",value:function(e,t,r){var i=Ct.endOfLine(e,t)+1,o=e[t=Ct.endOfWhiteSpace(e,i)];return!!o&&(t>=i+r||("#"===o||"\n"===o)&&n.nextContentHasIndent(e,t,r))}}]),n}(),Bt=function(e){Re(n,Ct);var t=qe(n);function n(){var e;return Ae(this,n),(e=t.call(this,ct)).name=null,e}return Te(n,[{key:"parameters",get:function(){var e=this.rawValue;return e?e.trim().split(/[ \t]+/):[]}},{key:"parseName",value:function(e){for(var t=this.context.src,n=e,r=t[n];r&&"\n"!==r&&"\t"!==r&&" "!==r;)r=t[n+=1];return this.name=t.slice(e,n),n}},{key:"parseParameters",value:function(e){for(var t=this.context.src,n=e,r=t[n];r&&"\n"!==r&&"#"!==r;)r=t[n+=1];return this.valueRange=new Ot(e,n),n}},{key:"parse",value:function(e,t){this.context=e;var n=this.parseName(t+1);return n=this.parseParameters(n),n=this.parseComment(n),this.range=new Ot(t,n),n}}]),n}(),Wt=function(e){Re(n,Ct);var t=qe(n);function n(){var e;return Ae(this,n),(e=t.call(this,lt)).directives=null,e.contents=null,e.directivesEndMarker=null,e.documentEndMarker=null,e}return Te(n,[{key:"parseDirectives",value:function(e){var t=this.context.src;this.directives=[];for(var r=!0,i=!1,o=e;!Ct.atDocumentBoundary(t,o,nt);)switch(t[o=n.startCommentOrEndBlankLine(t,o)]){case"\n":if(r){var a=new Tt;(o=a.parse({src:t},o))<t.length&&this.directives.push(a)}else o+=1,r=!0;break;case"#":var s=new Rt;o=s.parse({src:t},o),this.directives.push(s),r=!1;break;case"%":var u=new Bt;o=u.parse({parent:this,src:t},o),this.directives.push(u),i=!0,r=!1;break;default:return i?this.error=new It(this,"Missing directives-end indicator line"):this.directives.length>0&&(this.contents=this.directives,this.directives=[]),o}return t[o]?(this.directivesEndMarker=new Ot(o,o+3),o+3):(i?this.error=new It(this,"Missing directives-end indicator line"):this.directives.length>0&&(this.contents=this.directives,this.directives=[]),o)}},{key:"parseContents",value:function(e){var t=this.context,r=t.parseNode,i=t.src;this.contents||(this.contents=[]);for(var o=e;"-"===i[o-1];)o-=1;var a=Ct.endOfWhiteSpace(i,e),s=o===e;for(this.valueRange=new Ot(a);!Ct.atDocumentBoundary(i,a,rt);){switch(i[a]){case"\n":if(s){var u=new Tt;(a=u.parse({src:i},a))<i.length&&this.contents.push(u)}else a+=1,s=!0;o=a;break;case"#":var c=new Rt;a=c.parse({src:i},a),this.contents.push(c),s=!1;break;default:var l=Ct.endOfIndent(i,a),f=r({atLineStart:s,indent:-1,inFlow:!1,inCollection:!1,lineStart:o,parent:this},l);if(!f)return this.valueRange.end=l;this.contents.push(f),a=f.range.end,s=!1;var d=Ft(f);d&&Array.prototype.push.apply(this.contents,d)}a=n.startCommentOrEndBlankLine(i,a)}if(this.valueRange.end=a,i[a]&&(this.documentEndMarker=new Ot(a,a+3),i[a+=3])){if("#"===i[a=Ct.endOfWhiteSpace(i,a)]){var h=new Rt;a=h.parse({src:i},a),this.contents.push(h)}switch(i[a]){case"\n":a+=1;break;case void 0:break;default:this.error=new jt(this,"Document end marker line cannot have a non-comment suffix")}}return a}},{key:"parse",value:function(e,t){e.root=this,this.context=e;var n=65279===e.src.charCodeAt(t)?t+1:t;return n=this.parseDirectives(n),n=this.parseContents(n)}},{key:"setOrigRanges",value:function(e,t){return t=He(Fe(n.prototype),"setOrigRanges",this).call(this,e,t),this.directives.forEach((function(n){t=n.setOrigRanges(e,t)})),this.directivesEndMarker&&(t=this.directivesEndMarker.setOrigRange(e,t)),this.contents.forEach((function(n){t=n.setOrigRanges(e,t)})),this.documentEndMarker&&(t=this.documentEndMarker.setOrigRange(e,t)),t}},{key:"toString",value:function(){var e=this.contents,t=this.directives,n=this.value;if(null!=n)return n;var r=t.join("");return e.length>0&&((t.length>0||e[0].type===ut)&&(r+="---\n"),r+=e.join("")),"\n"!==r[r.length-1]&&(r+="\n"),r}}],[{key:"startCommentOrEndBlankLine",value:function(e,t){var n=Ct.endOfWhiteSpace(e,t),r=e[n];return"#"===r||"\n"===r?n:t}}]),n}(),$t=function(e){Re(n,Ct);var t=qe(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Te(n,[{key:"parse",value:function(e,t){this.context=e;var n=e.src,r=Ct.endOfIdentifier(n,t+1);return this.valueRange=new Ot(t+1,r),r=Ct.endOfWhiteSpace(n,r),r=this.parseComment(r)}}]),n}(),zt="CLIP",Ut="KEEP",qt="STRIP",Ht=function(e){Re(n,Ct);var t=qe(n);function n(e,r){var i;return Ae(this,n),(i=t.call(this,e,r)).blockIndent=null,i.chomping=zt,i.header=null,i}return Te(n,[{key:"includesTrailingLines",get:function(){return this.chomping===Ut}},{key:"strValue",get:function(){if(!this.valueRange||!this.context)return null;var e=this.valueRange,t=e.start,n=e.end,r=this.context,i=r.indent,o=r.src;if(this.valueRange.isEmpty())return"";for(var a=null,s=o[n-1];"\n"===s||"\t"===s||" "===s;){if((n-=1)<=t){if(this.chomping===Ut)break;return""}"\n"===s&&(a=n),s=o[n-1]}var u=n+1;a&&(this.chomping===Ut?(u=a,n=this.valueRange.end):n=a);for(var c=i+this.blockIndent,l=this.type===at,f=!0,d="",h="",p=!1,v=t;v<n;++v){for(var m=0;m<c&&" "===o[v];++m)v+=1;var g=o[v];if("\n"===g)"\n"===h?d+="\n":h="\n";else{var y=Ct.endOfLine(o,v),w=o.slice(v,y);v=y,l&&(" "===g||"\t"===g)&&v<u?(" "===h?h="\n":p||f||"\n"!==h||(h="\n\n"),d+=h+w,h=y<n&&o[y]||"",p=!0):(d+=h+w,h=l&&v<u?" ":"\n",p=!1),f&&""!==w&&(f=!1)}}return this.chomping===qt?d:d+"\n"}},{key:"parseBlockHeader",value:function(e){for(var t=this.context.src,n=e+1,r="";;){var i=t[n];switch(i){case"-":this.chomping=qt;break;case"+":this.chomping=Ut;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r+=i;break;default:return this.blockIndent=Number(r)||null,this.header=new Ot(e,n),n}n+=1}}},{key:"parseBlockValue",value:function(e){for(var t=this.context,n=t.indent,r=t.src,i=!!this.blockIndent,o=e,a=e,s=1,u=r[o];"\n"===u&&(o+=1,!Ct.atDocumentBoundary(r,o));u=r[o]){var c=Ct.endOfBlockIndent(r,n,o);if(null===c)break;var l=r[c],f=c-(o+n);if(this.blockIndent){if(l&&"\n"!==l&&f<this.blockIndent){if("#"===r[c])break;if(!this.error){var d="Block scalars must not be less indented than their ".concat(i?"explicit indentation indicator":"first line");this.error=new It(this,d)}}}else if("\n"!==r[c]){if(f<s){this.error=new It(this,"Block scalars with more-indented leading empty lines must use an explicit indentation indicator")}this.blockIndent=f}else f>s&&(s=f);o="\n"===r[c]?c:a=Ct.endOfLine(r,c)}return this.chomping!==Ut&&(o=r[a]?a+1:a),this.valueRange=new Ot(e+1,o),o}},{key:"parse",value:function(e,t){this.context=e;var n=e.src,r=this.parseBlockHeader(t);return r=Ct.endOfWhiteSpace(n,r),r=this.parseComment(r),r=this.parseBlockValue(r)}},{key:"setOrigRanges",value:function(e,t){return t=He(Fe(n.prototype),"setOrigRanges",this).call(this,e,t),this.header?this.header.setOrigRange(e,t):t}}]),n}(),Vt=function(e){Re(n,Ct);var t=qe(n);function n(e,r){var i;return Ae(this,n),(i=t.call(this,e,r)).items=null,i}return Te(n,[{key:"prevNodeIsJsonLike",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.items.length,t=this.items[e-1];return!!t&&(t.jsonLike||t.type===ut&&this.prevNodeIsJsonLike(e-1))}},{key:"parse",value:function(e,t){this.context=e;var n=e.parseNode,r=e.src,i=e.indent,o=e.lineStart,a=r[t];this.items=[{char:a,offset:t}];var s=Ct.endOfWhiteSpace(r,t+1);for(a=r[s];a&&"]"!==a&&"}"!==a;){switch(a){case"\n":if(o=s+1,"\n"===r[Ct.endOfWhiteSpace(r,o)]){var u=new Tt;o=u.parse({src:r},o),this.items.push(u)}if((s=Ct.endOfIndent(r,o))<=o+i&&(a=r[s],s<o+i||"]"!==a&&"}"!==a)){this.error=new It(this,"Insufficient indentation in flow collection")}break;case",":this.items.push({char:a,offset:s}),s+=1;break;case"#":var c=new Rt;s=c.parse({src:r},s),this.items.push(c);break;case"?":case":":var l=r[s+1];if("\n"===l||"\t"===l||" "===l||","===l||":"===a&&this.prevNodeIsJsonLike()){this.items.push({char:a,offset:s}),s+=1;break}default:var f=n({atLineStart:!1,inCollection:!1,inFlow:!0,indent:-1,lineStart:o,parent:this},s);if(!f)return this.valueRange=new Ot(t,s),s;this.items.push(f),s=Ct.normalizeOffset(r,f.range.end)}a=r[s=Ct.endOfWhiteSpace(r,s)]}return this.valueRange=new Ot(t,s+1),a&&(this.items.push({char:a,offset:s}),s=Ct.endOfWhiteSpace(r,s+1),s=this.parseComment(s)),s}},{key:"setOrigRanges",value:function(e,t){return t=He(Fe(n.prototype),"setOrigRanges",this).call(this,e,t),this.items.forEach((function(n){if(n instanceof Ct)t=n.setOrigRanges(e,t);else if(0===e.length)n.origOffset=n.offset;else{for(var r=t;r<e.length&&!(e[r]>n.offset);)++r;n.origOffset=n.offset+r,t=r}})),t}},{key:"toString",value:function(){var e=this.context.src,t=this.items,n=this.range,r=this.value;if(null!=r)return r;var i=t.filter((function(e){return e instanceof Ct})),o="",a=n.start;return i.forEach((function(t){var n=e.slice(a,t.range.start);a=t.range.end,"\n"===(o+=n+String(t))[o.length-1]&&"\n"!==e[a-1]&&"\n"===e[a]&&(a+=1)})),o+=e.slice(a,n.end),Ct.addStringTerminator(e,n.end,o)}}]),n}(),Jt=function(e){Re(n,Ct);var t=qe(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Te(n,[{key:"strValue",get:function(){if(!this.valueRange||!this.context)return null;var e=[],t=this.valueRange,n=t.start,r=t.end,i=this.context,o=i.indent,a=i.src;'"'!==a[r-1]&&e.push(new jt(this,'Missing closing "quote'));for(var s="",u=n+1;u<r-1;++u){var c=a[u];if("\n"===c){Ct.atDocumentBoundary(a,u+1)&&e.push(new It(this,"Document boundary indicators are not allowed within string values"));var l=Ct.foldNewline(a,u,o);s+=l.fold,u=l.offset,l.error&&e.push(new It(this,"Multi-line double-quoted string needs to be sufficiently indented"))}else if("\\"===c)switch(a[u+=1]){case"0":s+="\0";break;case"a":s+="";break;case"b":s+="\b";break;case"e":s+="";break;case"f":s+="\f";break;case"n":s+="\n";break;case"r":s+="\r";break;case"t":s+="\t";break;case"v":s+="\v";break;case"N":s+="";break;case"_":s+=" ";break;case"L":s+="\u2028";break;case"P":s+="\u2029";break;case" ":s+=" ";break;case'"':s+='"';break;case"/":s+="/";break;case"\\":s+="\\";break;case"\t":s+="\t";break;case"x":s+=this.parseCharCode(u+1,2,e),u+=2;break;case"u":s+=this.parseCharCode(u+1,4,e),u+=4;break;case"U":s+=this.parseCharCode(u+1,8,e),u+=8;break;case"\n":for(;" "===a[u+1]||"\t"===a[u+1];)u+=1;break;default:e.push(new jt(this,"Invalid escape sequence ".concat(a.substr(u-1,2)))),s+="\\"+a[u]}else if(" "===c||"\t"===c){for(var f=u,d=a[u+1];" "===d||"\t"===d;)d=a[(u+=1)+1];"\n"!==d&&(s+=u>f?a.slice(f,u+1):c)}else s+=c}return e.length>0?{errors:e,str:s}:s}},{key:"parseCharCode",value:function(e,t,n){var r=this.context.src,i=r.substr(e,t),o=i.length===t&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;return isNaN(o)?(n.push(new jt(this,"Invalid escape sequence ".concat(r.substr(e-2,t+2)))),r.substr(e-2,t+2)):String.fromCodePoint(o)}},{key:"parse",value:function(e,t){this.context=e;var r=e.src,i=n.endOfQuote(r,t+1);return this.valueRange=new Ot(t,i),i=Ct.endOfWhiteSpace(r,i),i=this.parseComment(i)}}],[{key:"endOfQuote",value:function(e,t){for(var n=e[t];n&&'"'!==n;)n=e[t+="\\"===n?2:1];return t+1}}]),n}(),Yt=function(e){Re(n,Ct);var t=qe(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Te(n,[{key:"strValue",get:function(){if(!this.valueRange||!this.context)return null;var e=[],t=this.valueRange,n=t.start,r=t.end,i=this.context,o=i.indent,a=i.src;"'"!==a[r-1]&&e.push(new jt(this,"Missing closing 'quote"));for(var s="",u=n+1;u<r-1;++u){var c=a[u];if("\n"===c){Ct.atDocumentBoundary(a,u+1)&&e.push(new It(this,"Document boundary indicators are not allowed within string values"));var l=Ct.foldNewline(a,u,o);s+=l.fold,u=l.offset,l.error&&e.push(new It(this,"Multi-line single-quoted string needs to be sufficiently indented"))}else if("'"===c)s+=c,"'"!==a[u+=1]&&e.push(new jt(this,"Unescaped single quote? This should not happen."));else if(" "===c||"\t"===c){for(var f=u,d=a[u+1];" "===d||"\t"===d;)d=a[(u+=1)+1];"\n"!==d&&(s+=u>f?a.slice(f,u+1):c)}else s+=c}return e.length>0?{errors:e,str:s}:s}},{key:"parse",value:function(e,t){this.context=e;var r=e.src,i=n.endOfQuote(r,t+1);return this.valueRange=new Ot(t,i),i=Ct.endOfWhiteSpace(r,i),i=this.parseComment(i)}}],[{key:"endOfQuote",value:function(e,t){for(var n=e[t];n;)if("'"===n){if("'"!==e[t+1])break;n=e[t+=2]}else n=e[t+=1];return t+1}}]),n}();function Gt(e,t){switch(e){case it:return new $t(e,t);case at:case st:return new Ht(e,t);case ft:case dt:return new Vt(e,t);case pt:case vt:case bt:return new Nt(e,t);case ut:case mt:return new Lt(e,t);case gt:return new Jt(e,t);case yt:return new Yt(e,t);default:return null}}var Kt=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.atLineStart,o=r.inCollection,a=r.inFlow,s=r.indent,u=r.lineStart,c=r.parent;Ae(this,e),Ne(this,"parseNode",(function(n,r){if(Ct.atDocumentBoundary(t.src,r))return null;var i=new e(t,n),o=i.parseProps(r),a=o.props,s=o.type,u=o.valueStart,c=Gt(s,a),l=c.parse(i,u);if(c.range=new Ot(r,l),l<=r&&(c.error=new Error("Node#parse consumed no characters"),c.error.parseEnd=l,c.error.source=c,c.range.end=r+1),i.nodeStartsCollection(c)){c.error||i.atLineStart||i.parent.type!==lt||(c.error=new jt(c,"Block collection must not have preceding content here (e.g. directives-end indicator)"));var f=new Dt(c);return l=f.parse(new e(i),l),f.range=new Ot(r,l),f}return c})),this.atLineStart=null!=i?i:n.atLineStart||!1,this.inCollection=null!=o?o:n.inCollection||!1,this.inFlow=null!=a?a:n.inFlow||!1,this.indent=null!=s?s:n.indent,this.lineStart=null!=u?u:n.lineStart,this.parent=null!=c?c:n.parent||{},this.root=n.root,this.src=n.src}return Te(e,[{key:"nodeStartsCollection",value:function(e){var t=this.inCollection,n=this.inFlow,r=this.src;if(t||n)return!1;if(e instanceof Nt)return!0;var i=e.range.end;return"\n"!==r[i]&&"\n"!==r[i-1]&&":"===r[i=Ct.endOfWhiteSpace(r,i)]}},{key:"parseProps",value:function(t){for(var n=this.inFlow,r=this.parent,i=this.src,o=[],a=!1,s=i[t=this.atLineStart?Ct.endOfIndent(i,t):Ct.endOfWhiteSpace(i,t)];s===Ze||s===et||s===tt||"\n"===s;){if("\n"===s){var u=t,c=void 0;do{c=u+1,u=Ct.endOfIndent(i,c)}while("\n"===i[u]);var l=u-(c+this.indent),f=r.type===bt&&r.context.atLineStart;if("#"!==i[u]&&!Ct.nextNodeIsIndented(i[u],l,!f))break;this.atLineStart=!0,this.lineStart=c,a=!1,t=u}else if(s===et){var d=Ct.endOfLine(i,t+1);o.push(new Ot(t,d)),t=d}else{var h=Ct.endOfIdentifier(i,t+1);s===tt&&","===i[h]&&/^[a-zA-Z0-9-]+\.[a-zA-Z0-9-]+,\d\d\d\d(-\d\d){0,2}\/\S/.test(i.slice(t+1,h+13))&&(h=Ct.endOfIdentifier(i,h+5)),o.push(new Ot(t,h)),a=!0,t=Ct.endOfWhiteSpace(i,h)}s=i[t]}return a&&":"===s&&Ct.atBlank(i,t+1,!0)&&(t-=1),{props:o,type:e.parseType(i,t,n),valueStart:t}}}],[{key:"parseType",value:function(e,t,n){switch(e[t]){case"*":return it;case">":return at;case"|":return st;case"{":return ft;case"[":return dt;case"?":return!n&&Ct.atBlank(e,t+1,!0)?pt:mt;case":":return!n&&Ct.atBlank(e,t+1,!0)?vt:mt;case"-":return!n&&Ct.atBlank(e,t+1,!0)?bt:mt;case'"':return gt;case"'":return yt;default:return mt}}}]),e}();function Xt(e){var t=[];-1!==e.indexOf("\r")&&(e=e.replace(/\r\n?/g,(function(e,n){return e.length>1&&t.push(n),"\n"})));var n=[],r=0;do{var i=new Wt,o=new Kt({src:e});r=i.parse(o,r),n.push(i)}while(r<e.length);return n.setOrigRanges=function(){if(0===t.length)return!1;for(var e=1;e<t.length;++e)t[e]-=e;for(var r=0,i=0;i<n.length;++i)r=n[i].setOrigRanges(t,r);return t.splice(0,t.length),!0},n.toString=function(){return n.join("...\n")},n}function Qt(e,t,n){return n?-1===n.indexOf("\n")?"".concat(e," #").concat(n):"".concat(e,"\n")+n.replace(/^/gm,"".concat(t||"","#")):e}var Zt=function e(){Ae(this,e)};function en(e,t,n){if(Array.isArray(e))return e.map((function(e,t){return en(e,String(t),n)}));if(e&&"function"==typeof e.toJSON){var r=n&&n.anchors&&n.anchors.get(e);r&&(n.onCreate=function(e){r.res=e,delete n.onCreate});var i=e.toJSON(t,n);return r&&n.onCreate&&n.onCreate(i),i}return n&&n.keep||"bigint"!=typeof e?e:Number(e)}var tn=function(e){Re(n,Zt);var t=qe(n);function n(e){var r;return Ae(this,n),(r=t.call(this)).value=e,r}return Te(n,[{key:"toJSON",value:function(e,t){return t&&t.keep?this.value:en(this.value,e,t)}},{key:"toString",value:function(){return String(this.value)}}]),n}();function nn(e,t,n){for(var r=n,i=t.length-1;i>=0;--i){var o=t[i];if(Number.isInteger(o)&&o>=0){var a=[];a[o]=r,r=a}else{var s={};Object.defineProperty(s,o,{value:r,writable:!0,enumerable:!0,configurable:!0}),r=s}}return e.createNode(r,!1)}var rn=function(e){return null==e||"object"===je(e)&&e[Symbol.iterator]().next().done},on=function(e){Re(n,Zt);var t=qe(n);function n(e){var r;return Ae(this,n),Ne(ze(r=t.call(this)),"items",[]),r.schema=e,r}return Te(n,[{key:"addIn",value:function(e,t){if(rn(e))this.add(t);else{var r=Je(e),i=r[0],o=r.slice(1),a=this.get(i,!0);if(a instanceof n)a.addIn(o,t);else{if(void 0!==a||!this.schema)throw new Error("Expected YAML collection at ".concat(i,". Remaining path: ").concat(o));this.set(i,nn(this.schema,o,t))}}}},{key:"deleteIn",value:function(e){var t=Je(e),r=t[0],i=t.slice(1);if(0===i.length)return this.delete(r);var o=this.get(r,!0);if(o instanceof n)return o.deleteIn(i);throw new Error("Expected YAML collection at ".concat(r,". Remaining path: ").concat(i))}},{key:"getIn",value:function(e,t){var r=Je(e),i=r[0],o=r.slice(1),a=this.get(i,!0);return 0===o.length?!t&&a instanceof tn?a.value:a:a instanceof n?a.getIn(o,t):void 0}},{key:"hasAllNullValues",value:function(){return this.items.every((function(e){if(!e||"PAIR"!==e.type)return!1;var t=e.value;return null==t||t instanceof tn&&null==t.value&&!t.commentBefore&&!t.comment&&!t.tag}))}},{key:"hasIn",value:function(e){var t=Je(e),r=t[0],i=t.slice(1);if(0===i.length)return this.has(r);var o=this.get(r,!0);return o instanceof n&&o.hasIn(i)}},{key:"setIn",value:function(e,t){var r=Je(e),i=r[0],o=r.slice(1);if(0===o.length)this.set(i,t);else{var a=this.get(i,!0);if(a instanceof n)a.setIn(o,t);else{if(void 0!==a||!this.schema)throw new Error("Expected YAML collection at ".concat(i,". Remaining path: ").concat(o));this.set(i,nn(this.schema,o,t))}}}},{key:"toJSON",value:function(){return null}},{key:"toString",value:function(e,t,r,i){var o=this,a=t.blockItem,s=t.flowChars,u=t.isMap,c=t.itemIndent,l=e,f=l.indent,d=l.indentStep,h=l.stringify,p=this.type===ft||this.type===dt||e.inFlow;p&&(c+=d);var v=u&&this.hasAllNullValues();e=Object.assign({},e,{allNullValues:v,indent:c,inFlow:p,type:null});var m,g=!1,y=!1,w=this.items.reduce((function(t,n,r){var i;n&&(!g&&n.spaceBefore&&t.push({type:"comment",str:""}),n.commentBefore&&n.commentBefore.match(/^.*$/gm).forEach((function(e){t.push({type:"comment",str:"#".concat(e)})})),n.comment&&(i=n.comment),p&&(!g&&n.spaceBefore||n.commentBefore||n.comment||n.key&&(n.key.commentBefore||n.key.comment)||n.value&&(n.value.commentBefore||n.value.comment))&&(y=!0)),g=!1;var a=h(n,e,(function(){return i=null}),(function(){return g=!0}));return p&&!y&&a.includes("\n")&&(y=!0),p&&r<o.items.length-1&&(a+=","),a=Qt(a,c,i),g&&(i||p)&&(g=!1),t.push({type:"item",str:a}),t}),[]);if(0===w.length)m=s.start+s.end;else if(p){var b=s.start,k=s.end,_=w.map((function(e){return e.str}));if(y||_.reduce((function(e,t){return e+t.length+2}),2)>n.maxFlowStringSingleLineLength){m=b;var S,x=Qe(_);try{for(x.s();!(S=x.n()).done;){var P=S.value;m+=P?"\n".concat(d).concat(f).concat(P):"\n"}}catch(e){x.e(e)}finally{x.f()}m+="\n".concat(f).concat(k)}else m="".concat(b," ").concat(_.join(" ")," ").concat(k)}else{var O=w.map(a);m=O.shift();var C,M=Qe(O);try{for(M.s();!(C=M.n()).done;){var E=C.value;m+=E?"\n".concat(f).concat(E):"\n"}}catch(e){M.e(e)}finally{M.f()}}return this.comment?(m+="\n"+this.comment.replace(/^/gm,"".concat(f,"#")),r&&r()):g&&i&&i(),m}}]),n}();function an(e){var t=e instanceof tn?e.value:e;return t&&"string"==typeof t&&(t=Number(t)),Number.isInteger(t)&&t>=0?t:null}Ne(on,"maxFlowStringSingleLineLength",60);var sn=function(e){Re(n,on);var t=qe(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Te(n,[{key:"add",value:function(e){this.items.push(e)}},{key:"delete",value:function(e){var t=an(e);return"number"==typeof t&&this.items.splice(t,1).length>0}},{key:"get",value:function(e,t){var n=an(e);if("number"==typeof n){var r=this.items[n];return!t&&r instanceof tn?r.value:r}}},{key:"has",value:function(e){var t=an(e);return"number"==typeof t&&t<this.items.length}},{key:"set",value:function(e,t){var n=an(e);if("number"!=typeof n)throw new Error("Expected a valid index, not ".concat(e,"."));this.items[n]=t}},{key:"toJSON",value:function(e,t){var n=[];t&&t.onCreate&&t.onCreate(n);var r,i=0,o=Qe(this.items);try{for(o.s();!(r=o.n()).done;){var a=r.value;n.push(en(a,String(i++),t))}}catch(e){o.e(e)}finally{o.f()}return n}},{key:"toString",value:function(e,t,r){return e?He(Fe(n.prototype),"toString",this).call(this,e,{blockItem:function(e){return"comment"===e.type?e.str:"- ".concat(e.str)},flowChars:{start:"[",end:"]"},isMap:!1,itemIndent:(e.indent||"")+"  "},t,r):JSON.stringify(this)}}]),n}(),un=function(e){Re(n,Zt);var t=qe(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Ae(this,n),(r=t.call(this)).key=e,r.value=i,r.type=n.Type.PAIR,r}return Te(n,[{key:"commentBefore",get:function(){return this.key instanceof Zt?this.key.commentBefore:void 0},set:function(e){if(null==this.key&&(this.key=new tn(null)),!(this.key instanceof Zt)){throw new Error("Pair.commentBefore is an alias for Pair.key.commentBefore. To set it, the key must be a Node.")}this.key.commentBefore=e}},{key:"addToJSMap",value:function(e,t){var n=en(this.key,"",e);if(t instanceof Map){var r=en(this.value,n,e);t.set(n,r)}else if(t instanceof Set)t.add(n);else{var i=function(e,t,n){return null===t?"":"object"!==je(t)?String(t):e instanceof Zt&&n&&n.doc?e.toString({anchors:Object.create(null),doc:n.doc,indent:"",indentStep:n.indentStep,inFlow:!0,inStringifyKey:!0,stringify:n.stringify}):JSON.stringify(t)}(this.key,n,e),o=en(this.value,i,e);i in t?Object.defineProperty(t,i,{value:o,writable:!0,enumerable:!0,configurable:!0}):t[i]=o}return t}},{key:"toJSON",value:function(e,t){var n=t&&t.mapAsMap?new Map:{};return this.addToJSMap(t,n)}},{key:"toString",value:function(e,t,n){if(!e||!e.doc)return JSON.stringify(this);var r=e.doc.options,i=r.indent,o=r.indentSeq,a=r.simpleKeys,s=this.key,u=this.value,c=s instanceof Zt&&s.comment;if(a){if(c)throw new Error("With simple keys, key nodes cannot have comments");if(s instanceof on){throw new Error("With simple keys, collection cannot be used as a key value")}}var l=!a&&(!s||c||(s instanceof Zt?s instanceof on||s.type===at||s.type===st:"object"===je(s))),f=e,d=f.doc,h=f.indent,p=f.indentStep,v=f.stringify;e=Object.assign({},e,{implicitKey:!l,indent:h+p});var m=!1,g=v(s,e,(function(){return c=null}),(function(){return m=!0}));if(g=Qt(g,e.indent,c),!l&&g.length>1024){if(a)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");l=!0}if(e.allNullValues&&!a)return this.comment?(g=Qt(g,e.indent,this.comment),t&&t()):m&&!c&&n&&n(),e.inFlow&&!l?g:"? ".concat(g);g=l?"? ".concat(g,"\n").concat(h,":"):"".concat(g,":"),this.comment&&(g=Qt(g,e.indent,this.comment),t&&t());var y="",w=null;if(u instanceof Zt){if(u.spaceBefore&&(y="\n"),u.commentBefore){var b=u.commentBefore.replace(/^/gm,"".concat(e.indent,"#"));y+="\n".concat(b)}w=u.comment}else u&&"object"===je(u)&&(u=d.schema.createNode(u,!0));e.implicitKey=!1,!l&&!this.comment&&u instanceof tn&&(e.indentAtStart=g.length+1),m=!1,!o&&i>=2&&!e.inFlow&&!l&&u instanceof sn&&u.type!==dt&&!u.tag&&!d.anchors.getName(u)&&(e.indent=e.indent.substr(2));var k=v(u,e,(function(){return w=null}),(function(){return m=!0})),_=" ";if(y||this.comment)_="".concat(y,"\n").concat(e.indent);else if(!l&&u instanceof on){("["===k[0]||"{"===k[0])&&!k.includes("\n")||(_="\n".concat(e.indent))}else"\n"===k[0]&&(_="");return m&&!w&&n&&n(),Qt(g+_+k,e.indent,w)}}]),n}();Ne(un,"Type",{PAIR:"PAIR",MERGE_PAIR:"MERGE_PAIR"});var cn=function e(t,n){if(t instanceof ln){var r=n.get(t.source);return r.count*r.aliasCount}if(t instanceof on){var i,o=0,a=Qe(t.items);try{for(a.s();!(i=a.n()).done;){var s=e(i.value,n);s>o&&(o=s)}}catch(e){a.e(e)}finally{a.f()}return o}if(t instanceof un){var u=e(t.key,n),c=e(t.value,n);return Math.max(u,c)}return 1},ln=function(e){Re(n,Zt);var t=qe(n);function n(e){var r;return Ae(this,n),(r=t.call(this)).source=e,r.type=it,r}return Te(n,[{key:"tag",set:function(e){throw new Error("Alias nodes cannot have tags")}},{key:"toJSON",value:function(e,t){if(!t)return en(this.source,e,t);var n=t.anchors,r=t.maxAliasCount,i=n.get(this.source);if(!i||void 0===i.res){var o="This should not happen: Alias anchor was not resolved?";throw this.cstNode?new Et(this.cstNode,o):new ReferenceError(o)}if(r>=0&&(i.count+=1,0===i.aliasCount&&(i.aliasCount=cn(this.source,n)),i.count*i.aliasCount>r)){var a="Excessive alias count indicates a resource exhaustion attack";throw this.cstNode?new Et(this.cstNode,a):new ReferenceError(a)}return i.res}},{key:"toString",value:function(e){return n.stringify(this,e)}}],[{key:"stringify",value:function(e,t){var n=e.range,r=e.source,i=t.anchors,o=t.doc,a=t.implicitKey,s=t.inStringifyKey,u=Object.keys(i).find((function(e){return i[e]===r}));if(!u&&s&&(u=o.anchors.getName(r)||o.anchors.newName()),u)return"*".concat(u).concat(a?" ":"");var c=o.anchors.getName(r)?"Alias node must be after source node":"Source node not found for alias node";throw new Error("".concat(c," [").concat(n,"]"))}}]),n}();function fn(e,t){var n,r=t instanceof tn?t.value:t,i=Qe(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o instanceof un){if(o.key===t||o.key===r)return o;if(o.key&&o.key.value===r)return o}}}catch(e){i.e(e)}finally{i.f()}}Ne(ln,"default",!0);var dn=function(e){Re(n,on);var t=qe(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Te(n,[{key:"add",value:function(e,t){e?e instanceof un||(e=new un(e.key||e,e.value)):e=new un(e);var n=fn(this.items,e.key),r=this.schema&&this.schema.sortMapEntries;if(n){if(!t)throw new Error("Key ".concat(e.key," already set"));n.value=e.value}else if(r){var i=this.items.findIndex((function(t){return r(e,t)<0}));-1===i?this.items.push(e):this.items.splice(i,0,e)}else this.items.push(e)}},{key:"delete",value:function(e){var t=fn(this.items,e);return!!t&&this.items.splice(this.items.indexOf(t),1).length>0}},{key:"get",value:function(e,t){var n=fn(this.items,e),r=n&&n.value;return!t&&r instanceof tn?r.value:r}},{key:"has",value:function(e){return!!fn(this.items,e)}},{key:"set",value:function(e,t){this.add(new un(e,t),!0)}},{key:"toJSON",value:function(e,t,n){var r=n?new n:t&&t.mapAsMap?new Map:{};t&&t.onCreate&&t.onCreate(r);var i,o=Qe(this.items);try{for(o.s();!(i=o.n()).done;){i.value.addToJSMap(t,r)}}catch(e){o.e(e)}finally{o.f()}return r}},{key:"toString",value:function(e,t,r){if(!e)return JSON.stringify(this);var i,o=Qe(this.items);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(!(a instanceof un))throw new Error("Map items must all be pairs; found ".concat(JSON.stringify(a)," instead"))}}catch(e){o.e(e)}finally{o.f()}return He(Fe(n.prototype),"toString",this).call(this,e,{blockItem:function(e){return e.str},flowChars:{start:"{",end:"}"},isMap:!0,itemIndent:e.indent||""},t,r)}}]),n}(),hn=function(e){Re(n,un);var t=qe(n);function n(e){var r;if(Ae(this,n),e instanceof un){var i=e.value;i instanceof sn||((i=new sn).items.push(e.value),i.range=e.value.range),(r=t.call(this,e.key,i)).range=e.range}else r=t.call(this,new tn("<<"),new sn);return r.type=un.Type.MERGE_PAIR,Ue(r)}return Te(n,[{key:"addToJSMap",value:function(e,t){var n,r=Qe(this.value.items);try{for(r.s();!(n=r.n()).done;){var i=n.value.source;if(!(i instanceof dn))throw new Error("Merge sources must be maps");var o,a=Qe(i.toJSON(null,e,Map));try{for(a.s();!(o=a.n()).done;){var s=Ve(o.value,2),u=s[0],c=s[1];t instanceof Map?t.has(u)||t.set(u,c):t instanceof Set?t.add(u):Object.prototype.hasOwnProperty.call(t,u)||Object.defineProperty(t,u,{value:c,writable:!0,enumerable:!0,configurable:!0})}}catch(e){a.e(e)}finally{a.f()}}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"toString",value:function(e,t){var r=this.value;if(r.items.length>1)return He(Fe(n.prototype),"toString",this).call(this,e,t);this.value=r.items[0];var i=He(Fe(n.prototype),"toString",this).call(this,e,t);return this.value=r,i}}]),n}(),pn={defaultType:st,lineWidth:76},vn={trueStr:"true",falseStr:"false"},mn={asBigInt:!1},gn={nullStr:"null"},yn={defaultType:mt,doubleQuoted:{jsonEncoding:!1,minMultiLineLength:40},fold:{lineWidth:80,minContentWidth:20}};function wn(e,t,n){var r,i=Qe(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=o.format,s=o.test,u=o.resolve;if(s){var c=e.match(s);if(c){var l=u.apply(null,c);return l instanceof tn||(l=new tn(l)),a&&(l.format=a),l}}}}catch(e){i.e(e)}finally{i.f()}return n&&(e=n(e)),new tn(e)}var bn=function(e,t){for(var n=e[t+1];" "===n||"\t"===n;){do{n=e[t+=1]}while(n&&"\n"!==n);n=e[t+1]}return t};function kn(e,t,n,r){var i=r.indentAtStart,o=r.lineWidth,a=void 0===o?80:o,s=r.minContentWidth,u=void 0===s?20:s,c=r.onFold,l=r.onOverflow;if(!a||a<0)return e;var f=Math.max(1+u,1+a-t.length);if(e.length<=f)return e;var d=[],h={},p=a-t.length;"number"==typeof i&&(i>a-Math.max(2,u)?d.push(0):p=a-i);var v,m=void 0,g=void 0,y=!1,w=-1,b=-1,k=-1;for("block"===n&&-1!==(w=bn(e,w))&&(p=w+f);v=e[w+=1];){if("quoted"===n&&"\\"===v){switch(b=w,e[w+1]){case"x":w+=3;break;case"u":w+=5;break;case"U":w+=9;break;default:w+=1}k=w}if("\n"===v)"block"===n&&(w=bn(e,w)),p=w+f,m=void 0;else{if(" "===v&&g&&" "!==g&&"\n"!==g&&"\t"!==g){var _=e[w+1];_&&" "!==_&&"\n"!==_&&"\t"!==_&&(m=w)}if(w>=p)if(m)d.push(m),p=m+f,m=void 0;else if("quoted"===n){for(;" "===g||"\t"===g;)g=v,v=e[w+=1],y=!0;var S=w>k+1?w-2:b-1;if(h[S])return e;d.push(S),h[S]=!0,p=S+f,m=void 0}else y=!0}g=v}if(y&&l&&l(),0===d.length)return e;c&&c();for(var x=e.slice(0,d[0]),P=0;P<d.length;++P){var O=d[P],C=d[P+1]||e.length;0===O?x="\n".concat(t).concat(e.slice(0,C)):("quoted"===n&&h[O]&&(x+="".concat(e[O],"\\")),x+="\n".concat(t).concat(e.slice(O+1,C)))}return x}var _n=function(e){var t=e.indentAtStart;return t?Object.assign({indentAtStart:t},yn.fold):yn.fold},Sn=function(e){return/^(%|---|\.\.\.)/m.test(e)};function xn(e,t){var n=t.implicitKey,r=yn.doubleQuoted,i=r.jsonEncoding,o=r.minMultiLineLength,a=JSON.stringify(e);if(i)return a;for(var s=t.indent||(Sn(e)?"  ":""),u="",c=0,l=0,f=a[l];f;f=a[++l])if(" "===f&&"\\"===a[l+1]&&"n"===a[l+2]&&(u+=a.slice(c,l)+"\\ ",c=l+=1,f="\\"),"\\"===f)switch(a[l+1]){case"u":u+=a.slice(c,l);var d=a.substr(l+2,4);switch(d){case"0000":u+="\\0";break;case"0007":u+="\\a";break;case"000b":u+="\\v";break;case"001b":u+="\\e";break;case"0085":u+="\\N";break;case"00a0":u+="\\_";break;case"2028":u+="\\L";break;case"2029":u+="\\P";break;default:"00"===d.substr(0,2)?u+="\\x"+d.substr(2):u+=a.substr(l,6)}c=(l+=5)+1;break;case"n":if(n||'"'===a[l+2]||a.length<o)l+=1;else{for(u+=a.slice(c,l)+"\n\n";"\\"===a[l+2]&&"n"===a[l+3]&&'"'!==a[l+4];)u+="\n",l+=2;u+=s," "===a[l+2]&&(u+="\\"),c=(l+=1)+1}break;default:l+=1}return u=c?u+a.slice(c):a,n?u:kn(u,s,"quoted",_n(t))}function Pn(e,t){if(t.implicitKey){if(/\n/.test(e))return xn(e,t)}else if(/[ \t]\n|\n[ \t]/.test(e))return xn(e,t);var n=t.indent||(Sn(e)?"  ":""),r="'"+e.replace(/'/g,"''").replace(/\n+/g,"$&\n".concat(n))+"'";return t.implicitKey?r:kn(r,n,"flow",_n(t))}function On(e,t,n,r){var i=e.comment,o=e.type,a=e.value;if(/\n[\t ]+$/.test(a)||/^\s*$/.test(a))return xn(a,t);var s=t.indent||(t.forceBlockIndent||Sn(a)?"  ":""),u=s?"2":"1",c=o!==at&&(o===st||!function(e,t,n){if(!t||t<0)return!1;var r=t-n,i=e.length;if(i<=r)return!1;for(var o=0,a=0;o<i;++o)if("\n"===e[o]){if(o-a>r)return!0;if(i-(a=o+1)<=r)return!1}return!0}(a,yn.fold.lineWidth,s.length)),l=c?"|":">";if(!a)return l+"\n";var f="",d="";if(a=a.replace(/[\n\t ]*$/,(function(e){var t=e.indexOf("\n");return-1===t?l+="-":a!==e&&t===e.length-1||(l+="+",r&&r()),d=e.replace(/\n$/,""),""})).replace(/^[\n ]*/,(function(e){-1!==e.indexOf(" ")&&(l+=u);var t=e.match(/ +$/);return t?(f=e.slice(0,-t[0].length),t[0]):(f=e,"")})),d&&(d=d.replace(/\n+(?!\n|$)/g,"$&".concat(s))),f&&(f=f.replace(/\n+/g,"$&".concat(s))),i&&(l+=" #"+i.replace(/ ?[\r\n]+/g," "),n&&n()),!a)return"".concat(l).concat(u,"\n").concat(s).concat(d);if(c)return a=a.replace(/\n+/g,"$&".concat(s)),"".concat(l,"\n").concat(s).concat(f).concat(a).concat(d);a=a.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,"$&".concat(s));var h=kn("".concat(f).concat(a).concat(d),s,"block",yn.fold);return"".concat(l,"\n").concat(s).concat(h)}function Cn(e,t,n,r){var i=yn.defaultType,o=t.implicitKey,a=t.inFlow,s=e,u=s.type,c=s.value;"string"!=typeof c&&(c=String(c),e=Object.assign({},e,{value:c}));var l=function(i){switch(i){case at:case st:return On(e,t,n,r);case gt:return xn(c,t);case yt:return Pn(c,t);case mt:return function(e,t,n,r){var i=e.comment,o=e.type,a=e.value,s=t.actualString,u=t.implicitKey,c=t.indent,l=t.inFlow;if(u&&/[\n[\]{},]/.test(a)||l&&/[[\]{},]/.test(a))return xn(a,t);if(!a||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(a))return u||l||-1===a.indexOf("\n")?-1!==a.indexOf('"')&&-1===a.indexOf("'")?Pn(a,t):xn(a,t):On(e,t,n,r);if(!u&&!l&&o!==mt&&-1!==a.indexOf("\n"))return On(e,t,n,r);if(""===c&&Sn(a))return t.forceBlockIndent=!0,On(e,t,n,r);var f=a.replace(/\n+/g,"$&\n".concat(c));if(s){var d=t.doc.schema.tags;if("string"!=typeof wn(f,d,d.scalarFallback).value)return xn(a,t)}var h=u?f:kn(f,c,"flow",_n(t));return!i||l||-1===h.indexOf("\n")&&-1===i.indexOf("\n")?h:(n&&n(),function(e,t,n){if(!n)return e;var r=n.replace(/[\s\S]^/gm,"$&".concat(t,"#"));return"#".concat(r,"\n").concat(t).concat(e)}(h,c,i))}(e,t,n,r);default:return null}};u!==gt&&/[\x00-\x08\x0b-\x1f\x7f-\x9f]/.test(c)?u=gt:!o&&!a||u!==at&&u!==st||(u=gt);var f=l(u);if(null===f&&null===(f=l(i)))throw new Error("Unsupported default string type ".concat(i));return f}function Mn(e){var t=e.format,n=e.minFractionDigits,r=e.tag,i=e.value;if("bigint"==typeof i)return String(i);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";var o=JSON.stringify(i);if(!t&&n&&(!r||"tag:yaml.org,2002:float"===r)&&/^\d/.test(o)){var a=o.indexOf(".");a<0&&(a=o.length,o+=".");for(var s=n-(o.length-a-1);s-- >0;)o+="0"}return o}function En(e,t){var n,r,i;switch(t.type){case ft:n="}",r="flow map";break;case dt:n="]",r="flow sequence";break;default:return void e.push(new It(t,"Not a flow collection!?"))}for(var o=t.items.length-1;o>=0;--o){var a=t.items[o];if(!a||a.type!==ut){i=a;break}}if(i&&i.char!==n){var s,u="Expected ".concat(r," to end with ").concat(n);"number"==typeof i.offset?(s=new It(t,u)).offset=i.offset+1:(s=new It(i,u),i.range&&i.range.end&&(s.offset=i.range.end-i.range.start)),e.push(s)}}function In(e,t){var n=t.context.src[t.range.start-1];if("\n"!==n&&"\t"!==n&&" "!==n){e.push(new It(t,"Comments must be separated from other tokens by white space characters"))}}function jn(e,t){var n=String(t),r=n.substr(0,8)+"..."+n.substr(-8);return new It(e,'The "'.concat(r,'" key is too long'))}function An(e,t){var n,r=Qe(t);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.afterKey,a=i.before,s=i.comment,u=e.items[a];u?(o&&u.value&&(u=u.value),void 0===s?!o&&u.commentBefore||(u.spaceBefore=!0):u.commentBefore?u.commentBefore+="\n"+s:u.commentBefore=s):void 0!==s&&(e.comment?e.comment+="\n"+s:e.comment=s)}}catch(e){r.e(e)}finally{r.f()}}function Ln(e,t){var n=t.strValue;return n?"string"==typeof n?n:(n.errors.forEach((function(n){n.source||(n.source=t),e.errors.push(n)})),n.str):""}function Tn(e,t){var n=t.tag,r=t.type,i=!1;if(n){var o=n.handle,a=n.suffix,s=n.verbatim;if(s){if("!"!==s&&"!!"!==s)return s;var u="Verbatim tags aren't resolved, so ".concat(s," is invalid.");e.errors.push(new It(t,u))}else if("!"!==o||a)try{return function(e,t){var n=t.tag,r=n.handle,i=n.suffix,o=e.tagPrefixes.find((function(e){return e.handle===r}));if(!o){var a=e.getDefaults().tagPrefixes;if(a&&(o=a.find((function(e){return e.handle===r}))),!o)throw new It(t,"The ".concat(r," tag handle is non-default and was not declared."))}if(!i)throw new It(t,"The ".concat(r," tag has no suffix."));if("!"===r&&"1.0"===(e.version||e.options.version)){if("^"===i[0])return e.warnings.push(new At(t,"YAML 1.0 ^ tag expansion is not supported")),i;if(/[:/]/.test(i)){var s=i.match(/^([a-z0-9-]+)\/(.*)/i);return s?"tag:".concat(s[1],".yaml.org,2002:").concat(s[2]):"tag:".concat(i)}}return o.prefix+decodeURIComponent(i)}(e,t)}catch(t){e.errors.push(t)}else i=!0}switch(r){case at:case st:case gt:case yt:return kt.STR;case ft:case ht:return kt.MAP;case dt:case wt:return kt.SEQ;case mt:return i?kt.STR:null;default:return null}}function Nn(e,t,n){var r,i=e.schema.tags,o=[],a=Qe(i);try{for(a.s();!(r=a.n()).done;){var s=r.value;if(s.tag===n){if(!s.test){var u=s.resolve(e,t);return u instanceof on?u:new tn(u)}o.push(s)}}}catch(e){a.e(e)}finally{a.f()}var c=Ln(e,t);return"string"==typeof c&&o.length>0?wn(c,o,i.scalarFallback):null}function Rn(e,t,n){try{var r=Nn(e,t,n);if(r)return n&&t.tag&&(r.tag=n),r}catch(n){return n.source||(n.source=t),e.errors.push(n),null}try{var i=function(e){switch(e.type){case ft:case ht:return kt.MAP;case dt:case wt:return kt.SEQ;default:return kt.STR}}(t);if(!i)throw new Error("The tag ".concat(n," is unavailable"));var o="The tag ".concat(n," is unavailable, falling back to ").concat(i);e.warnings.push(new At(t,o));var a=Nn(e,t,i);return a.tag=n,a}catch(n){var s=new Et(t,n.message);return s.stack=n.stack,e.errors.push(s),null}}function Fn(e,t){var n,r={before:[],after:[]},i=!1,o=!1,a=Qe(function(e){if(!e)return!1;var t=e.type;return t===pt||t===vt||t===bt}(t.context.parent)?t.context.parent.props.concat(t.props):t.props);try{for(a.s();!(n=a.n()).done;){var s=n.value,u=s.start,c=s.end;switch(t.context.src[u]){case et:if(!t.commentHasRequiredWhitespace(u)){e.push(new It(t,"Comments must be separated from other tokens by white space characters"))}var l=t.header,f=t.valueRange;(f&&(u>f.start||l&&u>l.start)?r.after:r.before).push(t.context.src.slice(u+1,c));break;case Ze:if(i){e.push(new It(t,"A node can have at most one anchor"))}i=!0;break;case tt:if(o){e.push(new It(t,"A node can have at most one tag"))}o=!0}}}catch(e){a.e(e)}finally{a.f()}return{comments:r,hasAnchor:i,hasTag:o}}function Dn(e,t){if(!t)return null;t.error&&e.errors.push(t.error);var n=Fn(e.errors,t),r=n.comments,i=n.hasAnchor,o=n.hasTag;if(i){var a=e.anchors,s=t.anchor,u=a.getNode(s);u&&(a.map[a.newName(s)]=u),a.map[s]=t}if(t.type===it&&(i||o)){e.errors.push(new It(t,"An alias node must not specify any properties"))}var c=function(e,t){var n=e.anchors,r=e.errors,i=e.schema;if(t.type===it){var o=t.rawValue,a=n.getNode(o);if(!a){var s="Aliased anchor not found: ".concat(o);return r.push(new Et(t,s)),null}var u=new ln(a);return n._cstAliases.push(u),u}var c=Tn(e,t);if(c)return Rn(e,t,c);if(t.type!==mt){var l="Failed to resolve ".concat(t.type," node here");return r.push(new jt(t,l)),null}try{return wn(Ln(e,t),i.tags,i.tags.scalarFallback)}catch(e){return e.source||(e.source=t),r.push(e),null}}(e,t);if(c){c.range=[t.range.start,t.range.end],e.options.keepCstNodes&&(c.cstNode=t),e.options.keepNodeTypes&&(c.type=t.type);var l=r.before.join("\n");l&&(c.commentBefore=c.commentBefore?"".concat(c.commentBefore,"\n").concat(l):l);var f=r.after.join("\n");f&&(c.comment=c.comment?"".concat(c.comment,"\n").concat(f):f)}return t.resolved=c}function Bn(e,t){if(t.type!==ht&&t.type!==ft){var n="A ".concat(t.type," node cannot be resolved as a mapping");return e.errors.push(new jt(t,n)),null}var r=t.type===ft?function(e,t){for(var n=[],r=[],i=void 0,o=!1,a="{",s=0;s<t.items.length;++s){var u=t.items[s];if("string"==typeof u.char){var c=u.char,l=u.offset;if("?"===c&&void 0===i&&!o){o=!0,a=":";continue}if(":"===c){if(void 0===i&&(i=null),":"===a){a=",";continue}}else if(o&&(void 0===i&&","!==c&&(i=null),o=!1),void 0!==i&&(r.push(new un(i)),i=void 0,","===c)){a=":";continue}if("}"===c){if(s===t.items.length-1)continue}else if(c===a){a=":";continue}var f="Flow map contains an unexpected ".concat(c),d=new jt(t,f);d.offset=l,e.errors.push(d)}else u.type===ot?n.push({afterKey:!!i,before:r.length}):u.type===ut?(In(e.errors,u),n.push({afterKey:!!i,before:r.length,comment:u.comment})):void 0===i?(","===a&&e.errors.push(new It(u,"Separator , missing in flow map")),i=Dn(e,u)):(","!==a&&e.errors.push(new It(u,"Indicator : missing in flow map entry")),r.push(new un(i,Dn(e,u))),i=void 0,o=!1)}En(e.errors,t),void 0!==i&&r.push(new un(i));return{comments:n,items:r}}(e,t):function(e,t){for(var n=[],r=[],i=void 0,o=null,a=0;a<t.items.length;++a){var s=t.items[a];switch(s.type){case ot:n.push({afterKey:!!i,before:r.length});break;case ut:n.push({afterKey:!!i,before:r.length,comment:s.comment});break;case pt:void 0!==i&&r.push(new un(i)),s.error&&e.errors.push(s.error),i=Dn(e,s.node),o=null;break;case vt:if(void 0===i&&(i=null),s.error&&e.errors.push(s.error),!s.context.atLineStart&&s.node&&s.node.type===ht&&!s.node.context.atLineStart){var u="Nested mappings are not allowed in compact mappings";e.errors.push(new It(s.node,u))}var c=s.node;if(!c&&s.props.length>0){(c=new Lt(mt,[])).context={parent:s,src:s.context.src};var l=s.range.start+1;if(c.range={start:l,end:l},c.valueRange={start:l,end:l},"number"==typeof s.range.origStart){var f=s.range.origStart+1;c.range.origStart=c.range.origEnd=f,c.valueRange.origStart=c.valueRange.origEnd=f}}var d=new un(i,Dn(e,c));Wn(s,d),r.push(d),i&&"number"==typeof o&&s.range.start>o+1024&&e.errors.push(jn(t,i)),i=void 0,o=null;break;default:void 0!==i&&r.push(new un(i)),i=Dn(e,s),o=s.range.start,s.error&&e.errors.push(s.error);e:for(var h=a+1;;++h){var p=t.items[h];switch(p&&p.type){case ot:case ut:continue e;case vt:break e;default:var v="Implicit map keys need to be followed by map values";e.errors.push(new It(s,v));break e}}if(s.valueRangeContainsNewline){var m="Implicit map keys need to be on a single line";e.errors.push(new It(s,m))}}}void 0!==i&&r.push(new un(i));return{comments:n,items:r}}(e,t),i=r.comments,o=r.items,a=new dn;a.items=o,An(a,i);for(var s=!1,u=0;u<o.length;++u){var c=o[u].key;if(c instanceof on&&(s=!0),e.schema.merge&&c&&"<<"===c.value){o[u]=new hn(o[u]);var l=o[u].value.items,f=null;l.some((function(e){if(e instanceof ln){var t=e.source.type;return t!==ht&&t!==ft&&(f="Merge nodes aliases can only point to maps")}return f="Merge nodes can only have Alias nodes as values"})),f&&e.errors.push(new It(t,f))}else for(var d=u+1;d<o.length;++d){var h=o[d].key;if(c===h||c&&h&&Object.prototype.hasOwnProperty.call(c,"value")&&c.value===h.value){var p='Map keys must be unique; "'.concat(c,'" is repeated');e.errors.push(new It(t,p));break}}}if(s&&!e.options.mapAsMap){e.warnings.push(new At(t,"Keys with collection values will be stringified as YAML due to JS Object restrictions. Use mapAsMap: true to avoid this."))}return t.resolved=a,a}function Wn(e,t){if(function(e){var t=e.context,n=t.lineStart,r=t.node,i=t.src,o=e.props;if(0===o.length)return!1;var a=o[0].start;if(r&&a>r.valueRange.start)return!1;if(i[a]!==et)return!1;for(var s=n;s<a;++s)if("\n"===i[s])return!1;return!0}(e)){var n=e.getPropValue(0,et,!0),r=!1,i=t.value.commentBefore;if(i&&i.startsWith(n))t.value.commentBefore=i.substr(n.length+1),r=!0;else{var o=t.value.comment;!e.node&&o&&o.startsWith(n)&&(t.value.comment=o.substr(n.length+1),r=!0)}r&&(t.comment=n)}}function $n(e,t){if(t.type!==wt&&t.type!==dt){var n="A ".concat(t.type," node cannot be resolved as a sequence");return e.errors.push(new jt(t,n)),null}var r=t.type===dt?function(e,t){for(var n=[],r=[],i=!1,o=void 0,a=null,s="[",u=null,c=0;c<t.items.length;++c){var l=t.items[c];if("string"==typeof l.char){var f=l.char,d=l.offset;if(":"===f||!i&&void 0===o||(i&&void 0===o&&(o=s?r.pop():null),r.push(new un(o)),i=!1,o=void 0,a=null),f===s)s=null;else if(s||"?"!==f){if("["!==s&&":"===f&&void 0===o){if(","===s){if((o=r.pop())instanceof un){var h=new It(t,"Chaining flow sequence pairs is invalid");h.offset=d,e.errors.push(h)}if(!i&&"number"==typeof a){var p=l.range?l.range.start:l.offset;p>a+1024&&e.errors.push(jn(t,o));for(var v=u.context.src,m=a;m<p;++m)if("\n"===v[m]){var g="Implicit keys of flow sequence pairs need to be on a single line";e.errors.push(new It(u,g));break}}}else o=null;a=null,i=!1,s=null}else if("["===s||"]"!==f||c<t.items.length-1){var y="Flow sequence contains an unexpected ".concat(f),w=new jt(t,y);w.offset=d,e.errors.push(w)}}else i=!0}else if(l.type===ot)n.push({before:r.length});else if(l.type===ut)In(e.errors,l),n.push({comment:l.comment,before:r.length});else{if(s){var b="Expected a ".concat(s," in flow sequence");e.errors.push(new It(l,b))}var k=Dn(e,l);void 0===o?(r.push(k),u=l):(r.push(new un(o,k)),o=void 0),a=l.range.start,s=","}}En(e.errors,t),void 0!==o&&r.push(new un(o));return{comments:n,items:r}}(e,t):function(e,t){for(var n=[],r=[],i=0;i<t.items.length;++i){var o=t.items[i];switch(o.type){case ot:n.push({before:r.length});break;case ut:n.push({comment:o.comment,before:r.length});break;case bt:if(o.error&&e.errors.push(o.error),r.push(Dn(e,o.node)),o.hasProps){var a="Sequence items cannot have tags or anchors before the - indicator";e.errors.push(new It(o,a))}break;default:o.error&&e.errors.push(o.error),e.errors.push(new jt(o,"Unexpected ".concat(o.type," node in sequence")))}}return{comments:n,items:r}}(e,t),i=r.comments,o=r.items,a=new sn;if(a.items=o,An(a,i),!e.options.mapAsMap&&o.some((function(e){return e instanceof un&&e.key instanceof on}))){e.warnings.push(new At(t,"Keys with collection values will be stringified as YAML due to JS Object restrictions. Use mapAsMap: true to avoid this."))}return t.resolved=a,a}var zn={identify:function(e){return e instanceof Uint8Array},default:!1,tag:"tag:yaml.org,2002:binary",resolve:function(e,t){var n=Ln(e,t);if("function"==typeof Buffer)return Buffer.from(n,"base64");if("function"==typeof atob){for(var r=atob(n.replace(/[\n\r]/g,"")),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}return e.errors.push(new Et(t,"This environment does not support reading binary tags; either Buffer or atob is required")),null},options:pn,stringify:function(e,t,n,r){var i,o=e.comment,a=e.type,s=e.value;if("function"==typeof Buffer)i=s instanceof Buffer?s.toString("base64"):Buffer.from(s.buffer).toString("base64");else{if("function"!=typeof btoa)throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");for(var u="",c=0;c<s.length;++c)u+=String.fromCharCode(s[c]);i=btoa(u)}if(a||(a=pn.defaultType),a===gt)s=i;else{for(var l=pn.lineWidth,f=Math.ceil(i.length/l),d=new Array(f),h=0,p=0;h<f;++h,p+=l)d[h]=i.substr(p,l);s=d.join(a===st?"\n":" ")}return Cn({comment:o,type:a,value:s},t,n,r)}};function Un(e,t){for(var n=$n(e,t),r=0;r<n.items.length;++r){var i=n.items[r];if(!(i instanceof un)){if(i instanceof dn){if(i.items.length>1){throw new It(t,"Each pair must have its own sequence indicator")}var o=i.items[0]||new un;i.commentBefore&&(o.commentBefore=o.commentBefore?"".concat(i.commentBefore,"\n").concat(o.commentBefore):i.commentBefore),i.comment&&(o.comment=o.comment?"".concat(i.comment,"\n").concat(o.comment):i.comment),i=o}n.items[r]=i instanceof un?i:new un(i)}}return n}function qn(e,t,n){var r=new sn(e);r.tag="tag:yaml.org,2002:pairs";var i,o=Qe(t);try{for(o.s();!(i=o.n()).done;){var a=i.value,s=void 0,u=void 0;if(Array.isArray(a)){if(2!==a.length)throw new TypeError("Expected [key, value] tuple: ".concat(a));s=a[0],u=a[1]}else if(a&&a instanceof Object){var c=Object.keys(a);if(1!==c.length)throw new TypeError("Expected { key: value } tuple: ".concat(a));u=a[s=c[0]]}else s=a;var l=e.createPair(s,u,n);r.items.push(l)}}catch(e){o.e(e)}finally{o.f()}return r}var Hn={default:!1,tag:"tag:yaml.org,2002:pairs",resolve:Un,createNode:qn},Vn=function(e){Re(n,sn);var t=qe(n);function n(){var e;return Ae(this,n),Ne(ze(e=t.call(this)),"add",dn.prototype.add.bind(ze(e))),Ne(ze(e),"delete",dn.prototype.delete.bind(ze(e))),Ne(ze(e),"get",dn.prototype.get.bind(ze(e))),Ne(ze(e),"has",dn.prototype.has.bind(ze(e))),Ne(ze(e),"set",dn.prototype.set.bind(ze(e))),e.tag=n.tag,e}return Te(n,[{key:"toJSON",value:function(e,t){var n=new Map;t&&t.onCreate&&t.onCreate(n);var r,i=Qe(this.items);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=void 0,s=void 0;if(o instanceof un?(a=en(o.key,"",t),s=en(o.value,a,t)):a=en(o,"",t),n.has(a))throw new Error("Ordered maps must not include duplicate keys");n.set(a,s)}}catch(e){i.e(e)}finally{i.f()}return n}}]),n}();Ne(Vn,"tag","tag:yaml.org,2002:omap");var Jn={identify:function(e){return e instanceof Map},nodeClass:Vn,default:!1,tag:"tag:yaml.org,2002:omap",resolve:function(e,t){var n,r=Un(e,t),i=[],o=Qe(r.items);try{for(o.s();!(n=o.n()).done;){var a=n.value.key;if(a instanceof tn){if(i.includes(a.value)){throw new It(t,"Ordered maps must not include duplicate keys")}i.push(a.value)}}}catch(e){o.e(e)}finally{o.f()}return Object.assign(new Vn,r)},createNode:function(e,t,n){var r=qn(e,t,n),i=new Vn;return i.items=r.items,i}},Yn=function(e){Re(n,dn);var t=qe(n);function n(){var e;return Ae(this,n),(e=t.call(this)).tag=n.tag,e}return Te(n,[{key:"add",value:function(e){var t=e instanceof un?e:new un(e);fn(this.items,t.key)||this.items.push(t)}},{key:"get",value:function(e,t){var n=fn(this.items,e);return!t&&n instanceof un?n.key instanceof tn?n.key.value:n.key:n}},{key:"set",value:function(e,t){if("boolean"!=typeof t)throw new Error("Expected boolean value for set(key, value) in a YAML set, not ".concat(je(t)));var n=fn(this.items,e);n&&!t?this.items.splice(this.items.indexOf(n),1):!n&&t&&this.items.push(new un(e))}},{key:"toJSON",value:function(e,t){return He(Fe(n.prototype),"toJSON",this).call(this,e,t,Set)}},{key:"toString",value:function(e,t,r){if(!e)return JSON.stringify(this);if(this.hasAllNullValues())return He(Fe(n.prototype),"toString",this).call(this,e,t,r);throw new Error("Set items must all have null values")}}]),n}();Ne(Yn,"tag","tag:yaml.org,2002:set");var Gn={identify:function(e){return e instanceof Set},nodeClass:Yn,default:!1,tag:"tag:yaml.org,2002:set",resolve:function(e,t){var n=Bn(e,t);if(!n.hasAllNullValues())throw new It(t,"Set items must all have null values");return Object.assign(new Yn,n)},createNode:function(e,t,n){var r,i=new Yn,o=Qe(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;i.items.push(e.createPair(a,null,n))}}catch(e){o.e(e)}finally{o.f()}return i}},Kn=function(e,t){var n=t.split(":").reduce((function(e,t){return 60*e+Number(t)}),0);return"-"===e?-n:n},Xn=function(e){var t=e.value;if(isNaN(t)||!isFinite(t))return Mn(t);var n="";t<0&&(n="-",t=Math.abs(t));var r=[t%60];return t<60?r.unshift(0):(t=Math.round((t-r[0])/60),r.unshift(t%60),t>=60&&(t=Math.round((t-r[0])/60),r.unshift(t))),n+r.map((function(e){return e<10?"0"+String(e):String(e)})).join(":").replace(/000000\d*$/,"")},Qn={identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^([-+]?)([0-9][0-9_]*(?::[0-5]?[0-9])+)$/,resolve:function(e,t,n){return Kn(t,n.replace(/_/g,""))},stringify:Xn},Zn={identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^([-+]?)([0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*)$/,resolve:function(e,t,n){return Kn(t,n.replace(/_/g,""))},stringify:Xn},er={identify:function(e){return e instanceof Date},default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^(?:([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?)$"),resolve:function(e,t,n,r,i,o,a,s,u){s&&(s=(s+"00").substr(1,3));var c=Date.UTC(t,n-1,r,i||0,o||0,a||0,s||0);if(u&&"Z"!==u){var l=Kn(u[0],u.slice(1));Math.abs(l)<30&&(l*=60),c-=6e4*l}return new Date(c)},stringify:function(e){return e.value.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")}};function tr(e){var t="undefined"!=typeof process&&process.env||{};return e?"undefined"!=typeof YAML_SILENCE_DEPRECATION_WARNINGS?!YAML_SILENCE_DEPRECATION_WARNINGS:!t.YAML_SILENCE_DEPRECATION_WARNINGS:"undefined"!=typeof YAML_SILENCE_WARNINGS?!YAML_SILENCE_WARNINGS:!t.YAML_SILENCE_WARNINGS}function nr(e,t){if(tr(!1)){var n="undefined"!=typeof process&&process.emitWarning;n?n(e,t):console.warn(t?"".concat(t,": ").concat(e):e)}}var rr={};var ir={createNode:function(e,t,n){var r=new dn(e);if(t instanceof Map){var i,o=Qe(t);try{for(o.s();!(i=o.n()).done;){var a=Ve(i.value,2),s=a[0],u=a[1];r.items.push(e.createPair(s,u,n))}}catch(e){o.e(e)}finally{o.f()}}else if(t&&"object"===je(t))for(var c=0,l=Object.keys(t);c<l.length;c++){var f=l[c];r.items.push(e.createPair(f,t[f],n))}return"function"==typeof e.sortMapEntries&&r.items.sort(e.sortMapEntries),r},default:!0,nodeClass:dn,tag:"tag:yaml.org,2002:map",resolve:Bn};var or={createNode:function(e,t,n){var r=new sn(e);if(t&&t[Symbol.iterator]){var i,o=Qe(t);try{for(o.s();!(i=o.n()).done;){var a=i.value,s=e.createNode(a,n.wrapScalars,null,n);r.items.push(s)}}catch(e){o.e(e)}finally{o.f()}}return r},default:!0,nodeClass:sn,tag:"tag:yaml.org,2002:seq",resolve:$n},ar=[ir,or,{identify:function(e){return"string"==typeof e},default:!0,tag:"tag:yaml.org,2002:str",resolve:Ln,stringify:function(e,t,n,r){return Cn(e,t=Object.assign({actualString:!0},t),n,r)},options:yn}],sr=function(e){return"bigint"==typeof e||Number.isInteger(e)},ur=function(e,t,n){return mn.asBigInt?BigInt(e):parseInt(t,n)};function cr(e,t,n){var r=e.value;return sr(r)&&r>=0?n+r.toString(t):Mn(e)}var lr={identify:function(e){return null==e},createNode:function(e,t,n){return n.wrapScalars?new tn(null):null},default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:function(){return null},options:gn,stringify:function(){return gn.nullStr}},fr={identify:function(e){return"boolean"==typeof e},default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:function(e){return"t"===e[0]||"T"===e[0]},options:vn,stringify:function(e){return e.value?vn.trueStr:vn.falseStr}},dr={identify:function(e){return sr(e)&&e>=0},default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o([0-7]+)$/,resolve:function(e,t){return ur(e,t,8)},options:mn,stringify:function(e){return cr(e,8,"0o")}},hr={identify:sr,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:function(e){return ur(e,e,10)},options:mn,stringify:Mn},pr={identify:function(e){return sr(e)&&e>=0},default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x([0-9a-fA-F]+)$/,resolve:function(e,t){return ur(e,t,16)},options:mn,stringify:function(e){return cr(e,16,"0x")}},vr={identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.inf|(\.nan))$/i,resolve:function(e,t){return t?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY},stringify:Mn},mr={identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:function(e){return parseFloat(e)},stringify:function(e){var t=e.value;return Number(t).toExponential()}},gr={identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.([0-9]+)|[0-9]+\.([0-9]*))$/,resolve:function(e,t,n){var r=t||n,i=new tn(parseFloat(e));return r&&"0"===r[r.length-1]&&(i.minFractionDigits=r.length),i},stringify:Mn},yr=ar.concat([lr,fr,dr,hr,pr,vr,mr,gr]),wr=function(e){return"bigint"==typeof e||Number.isInteger(e)},br=function(e){var t=e.value;return JSON.stringify(t)},kr=[ir,or,{identify:function(e){return"string"==typeof e},default:!0,tag:"tag:yaml.org,2002:str",resolve:Ln,stringify:br},{identify:function(e){return null==e},createNode:function(e,t,n){return n.wrapScalars?new tn(null):null},default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:function(){return null},stringify:br},{identify:function(e){return"boolean"==typeof e},default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:function(e){return"true"===e},stringify:br},{identify:wr,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:function(e){return mn.asBigInt?BigInt(e):parseInt(e,10)},stringify:function(e){var t=e.value;return wr(t)?t.toString():JSON.stringify(t)}},{identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:function(e){return parseFloat(e)},stringify:br}];kr.scalarFallback=function(e){throw new SyntaxError("Unresolved plain scalar ".concat(JSON.stringify(e)))};var _r=function(e){return e.value?vn.trueStr:vn.falseStr},Sr=function(e){return"bigint"==typeof e||Number.isInteger(e)};function xr(e,t,n){var r=t.replace(/_/g,"");if(mn.asBigInt){switch(n){case 2:r="0b".concat(r);break;case 8:r="0o".concat(r);break;case 16:r="0x".concat(r)}var i=BigInt(r);return"-"===e?BigInt(-1)*i:i}var o=parseInt(r,n);return"-"===e?-1*o:o}function Pr(e,t,n){var r=e.value;if(Sr(r)){var i=r.toString(t);return r<0?"-"+n+i.substr(1):n+i}return Mn(e)}var Or=ar.concat([{identify:function(e){return null==e},createNode:function(e,t,n){return n.wrapScalars?new tn(null):null},default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:function(){return null},options:gn,stringify:function(){return gn.nullStr}},{identify:function(e){return"boolean"==typeof e},default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:function(){return!0},options:vn,stringify:_r},{identify:function(e){return"boolean"==typeof e},default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:function(){return!1},options:vn,stringify:_r},{identify:Sr,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^([-+]?)0b([0-1_]+)$/,resolve:function(e,t,n){return xr(t,n,2)},stringify:function(e){return Pr(e,2,"0b")}},{identify:Sr,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^([-+]?)0([0-7_]+)$/,resolve:function(e,t,n){return xr(t,n,8)},stringify:function(e){return Pr(e,8,"0")}},{identify:Sr,default:!0,tag:"tag:yaml.org,2002:int",test:/^([-+]?)([0-9][0-9_]*)$/,resolve:function(e,t,n){return xr(t,n,10)},stringify:Mn},{identify:Sr,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^([-+]?)0x([0-9a-fA-F_]+)$/,resolve:function(e,t,n){return xr(t,n,16)},stringify:function(e){return Pr(e,16,"0x")}},{identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.inf|(\.nan))$/i,resolve:function(e,t){return t?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY},stringify:Mn},{identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?([0-9][0-9_]*)?(\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:function(e){return parseFloat(e.replace(/_/g,""))},stringify:function(e){var t=e.value;return Number(t).toExponential()}},{identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.([0-9_]*)$/,resolve:function(e,t){var n=new tn(parseFloat(e.replace(/_/g,"")));if(t){var r=t.replace(/_/g,"");"0"===r[r.length-1]&&(n.minFractionDigits=r.length)}return n},stringify:Mn}],zn,Jn,Hn,Gn,Qn,Zn,er),Cr={core:yr,failsafe:ar,json:kr,yaml11:Or},Mr={binary:zn,bool:fr,float:gr,floatExp:mr,floatNaN:vr,floatTime:Zn,int:hr,intHex:pr,intOct:dr,intTime:Qn,map:ir,null:lr,omap:Jn,pairs:Hn,seq:or,set:Gn,timestamp:er};function Er(e,t,n){if(e instanceof Zt)return e;var r=n.defaultPrefix,i=n.onTagObj,o=n.prevObjects,a=n.schema,s=n.wrapScalars;t&&t.startsWith("!!")&&(t=r+t.slice(2));var u=function(e,t,n){if(t){var r=n.filter((function(e){return e.tag===t})),i=r.find((function(e){return!e.format}))||r[0];if(!i)throw new Error("Tag ".concat(t," not found"));return i}return n.find((function(t){return(t.identify&&t.identify(e)||t.class&&e instanceof t.class)&&!t.format}))}(e,t,a.tags);if(!u){if("function"==typeof e.toJSON&&(e=e.toJSON()),!e||"object"!==je(e))return s?new tn(e):e;u=e instanceof Map?ir:e[Symbol.iterator]?or:ir}i&&(i(u),delete n.onTagObj);var c={value:void 0,node:void 0};if(e&&"object"===je(e)&&o){var l=o.get(e);if(l){var f=new ln(l);return n.aliasNodes.push(f),f}c.value=e,o.set(e,c)}return c.node=u.createNode?u.createNode(n.schema,e,n):s?new tn(e):e,t&&c.node instanceof Zt&&(c.node.tag=t),c.node}var Ir=function(e,t){return e.key<t.key?-1:e.key>t.key?1:0},jr=function(){function e(t){var n=t.customTags,r=t.merge,i=t.schema,o=t.sortMapEntries,a=t.tags;Ae(this,e),this.merge=!!r,this.name=i,this.sortMapEntries=!0===o?Ir:o||null,!n&&a&&function(e,t){if(!rr[e]&&tr(!0)){rr[e]=!0;var n="The option '".concat(e,"' will be removed in a future release");nr(n+=t?", use '".concat(t,"' instead."):".","DeprecationWarning")}}("tags","customTags"),this.tags=function(e,t,n,r){var i=e[r.replace(/\W/g,"")];if(!i){var o=Object.keys(e).map((function(e){return JSON.stringify(e)})).join(", ");throw new Error('Unknown schema "'.concat(r,'"; use one of ').concat(o))}if(Array.isArray(n)){var a,s=Qe(n);try{for(s.s();!(a=s.n()).done;){var u=a.value;i=i.concat(u)}}catch(e){s.e(e)}finally{s.f()}}else"function"==typeof n&&(i=n(i.slice()));for(var c=0;c<i.length;++c){var l=i[c];if("string"==typeof l){var f=t[l];if(!f){var d=Object.keys(t).map((function(e){return JSON.stringify(e)})).join(", ");throw new Error('Unknown custom tag "'.concat(l,'"; use one of ').concat(d))}i[c]=f}}return i}(Cr,Mr,n||a,i)}return Te(e,[{key:"createNode",value:function(t,n,r,i){var o={defaultPrefix:e.defaultPrefix,schema:this,wrapScalars:n};return Er(t,r,i?Object.assign(i,o):o)}},{key:"createPair",value:function(e,t,n){n||(n={wrapScalars:!0});var r=this.createNode(e,n.wrapScalars,null,n),i=this.createNode(t,n.wrapScalars,null,n);return new un(r,i)}}]),e}();Ne(jr,"defaultPrefix","tag:yaml.org,2002:"),Ne(jr,"defaultTags",kt);var Ar={anchorPrefix:"a",customTags:null,indent:2,indentSeq:!0,keepCstNodes:!1,keepNodeTypes:!0,keepBlobsInJSON:!0,mapAsMap:!1,maxAliasCount:100,prettyErrors:!1,simpleKeys:!1,version:"1.2"},Lr={get binary(){return pn},set binary(e){Object.assign(pn,e)},get bool(){return vn},set bool(e){Object.assign(vn,e)},get int(){return mn},set int(e){Object.assign(mn,e)},get null(){return gn},set null(e){Object.assign(gn,e)},get str(){return yn},set str(e){Object.assign(yn,e)}},Tr={"1.0":{schema:"yaml-1.1",merge:!0,tagPrefixes:[{handle:"!",prefix:"tag:yaml.org,2002:"},{handle:"!!",prefix:"tag:private.yaml.org,2002:"}]},1.1:{schema:"yaml-1.1",merge:!0,tagPrefixes:[{handle:"!",prefix:"!"},{handle:"!!",prefix:"tag:yaml.org,2002:"}]},1.2:{schema:"core",merge:!1,tagPrefixes:[{handle:"!",prefix:"!"},{handle:"!!",prefix:"tag:yaml.org,2002:"}]}};function Nr(e,t){if("1.0"===(e.version||e.options.version)){var n=t.match(/^tag:private\.yaml\.org,2002:([^:/]+)$/);if(n)return"!"+n[1];var r=t.match(/^tag:([a-zA-Z0-9-]+)\.yaml\.org,2002:(.*)/);return r?"!".concat(r[1],"/").concat(r[2]):"!".concat(t.replace(/^tag:/,""))}var i=e.tagPrefixes.find((function(e){return 0===t.indexOf(e.prefix)}));if(!i){var o=e.getDefaults().tagPrefixes;i=o&&o.find((function(e){return 0===t.indexOf(e.prefix)}))}if(!i)return"!"===t[0]?t:"!<".concat(t,">");var a=t.substr(i.prefix.length).replace(/[!,[\]{}]/g,(function(e){return{"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"}[e]}));return i.handle+a}function Rr(e,t,n,r){var i,o=t.doc,a=o.anchors,s=o.schema;if(!(e instanceof Zt)){var u={aliasNodes:[],onTagObj:function(e){return i=e},prevObjects:new Map};e=s.createNode(e,!0,null,u);var c,l=Qe(u.aliasNodes);try{for(l.s();!(c=l.n()).done;){var f=c.value;f.source=f.source.node;var d=a.getName(f.source);d||(d=a.newName(),a.map[d]=f.source)}}catch(e){l.e(e)}finally{l.f()}}if(e instanceof un)return e.toString(t,n,r);i||(i=function(e,t){if(t instanceof ln)return ln;if(t.tag){var n=e.filter((function(e){return e.tag===t.tag}));if(n.length>0)return n.find((function(e){return e.format===t.format}))||n[0]}var r,i;if(t instanceof tn){i=t.value;var o=e.filter((function(e){return e.identify&&e.identify(i)||e.class&&i instanceof e.class}));r=o.find((function(e){return e.format===t.format}))||o.find((function(e){return!e.format}))}else i=t,r=e.find((function(e){return e.nodeClass&&i instanceof e.nodeClass}));if(!r){var a=i&&i.constructor?i.constructor.name:je(i);throw new Error("Tag not resolved for ".concat(a," value"))}return r}(s.tags,e));var h=function(e,t,n){var r=n.anchors,i=n.doc,o=[],a=i.anchors.getName(e);return a&&(r[a]=e,o.push("&".concat(a))),e.tag?o.push(Nr(i,e.tag)):t.default||o.push(Nr(i,t.tag)),o.join(" ")}(e,i,t);h.length>0&&(t.indentAtStart=(t.indentAtStart||0)+h.length+1);var p="function"==typeof i.stringify?i.stringify(e,t,n,r):e instanceof tn?Cn(e,t,n,r):e.toString(t,n,r);return h?e instanceof tn||"{"===p[0]||"["===p[0]?"".concat(h," ").concat(p):"".concat(h,"\n").concat(t.indent).concat(p):p}var Fr=function(){function e(t){Ae(this,e),Ne(this,"map",Object.create(null)),this.prefix=t}return Te(e,[{key:"createAlias",value:function(e,t){return this.setAnchor(e,t),new ln(e)}},{key:"createMergePair",value:function(){for(var e=this,t=new hn,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.value.items=r.map((function(t){if(t instanceof ln){if(t.source instanceof dn)return t}else if(t instanceof dn)return e.createAlias(t);throw new Error("Merge sources must be Map nodes or their Aliases")})),t}},{key:"getName",value:function(e){var t=this.map;return Object.keys(t).find((function(n){return t[n]===e}))}},{key:"getNames",value:function(){return Object.keys(this.map)}},{key:"getNode",value:function(e){return this.map[e]}},{key:"newName",value:function(e){e||(e=this.prefix);for(var t=Object.keys(this.map),n=1;;++n){var r="".concat(e).concat(n);if(!t.includes(r))return r}}},{key:"resolveNodes",value:function(){var e=this.map,t=this._cstAliases;Object.keys(e).forEach((function(t){e[t]=e[t].resolved})),t.forEach((function(e){e.source=e.source.resolved})),delete this._cstAliases}},{key:"setAnchor",value:function(t,n){if(null!=t&&!e.validAnchorNode(t))throw new Error("Anchors may only be set for Scalar, Seq and Map nodes");if(n&&/[\x00-\x19\s,[\]{}]/.test(n))throw new Error("Anchor names must not contain whitespace or control characters");var r=this.map,i=t&&Object.keys(r).find((function(e){return r[e]===t}));if(i){if(!n)return i;i!==n&&(delete r[i],r[n]=t)}else{if(!n){if(!t)return null;n=this.newName()}r[n]=t}return n}}],[{key:"validAnchorNode",value:function(e){return e instanceof tn||e instanceof sn||e instanceof dn}}]),e}(),Dr=function e(t,n){if(t&&"object"===je(t)){var r=t.tag;t instanceof on?(r&&(n[r]=!0),t.items.forEach((function(t){return e(t,n)}))):t instanceof un?(e(t.key,n),e(t.value,n)):t instanceof tn&&r&&(n[r]=!0)}return n},Br=function(e){return Object.keys(Dr(e,{}))};function Wr(e,t){var n=e.tagPrefixes,r=Ve(t.parameters,2),i=r[0],o=r[1];if(!i||!o){throw new It(t,"Insufficient parameters given for %TAG directive")}if(n.some((function(e){return e.handle===i}))){throw new It(t,"The %TAG directive must only be given at most once per handle in the same document.")}return{handle:i,prefix:o}}function $r(e,t){var n=Ve(t.parameters,1)[0];if("YAML:1.0"===t.name&&(n="1.0"),!n){throw new It(t,"Insufficient parameters given for %YAML directive")}if(!Tr[n]){var r=e.version||e.options.version,i="Document will be parsed as YAML ".concat(r," rather than YAML ").concat(n);e.warnings.push(new At(t,i))}return n}function zr(e){if(e instanceof on)return!0;throw new Error("Expected a YAML collection as document contents")}var Ur=function(){function e(t){Ae(this,e),this.anchors=new Fr(t.anchorPrefix),this.commentBefore=null,this.comment=null,this.contents=null,this.directivesEndMarker=null,this.errors=[],this.options=t,this.schema=null,this.tagPrefixes=[],this.version=null,this.warnings=[]}return Te(e,[{key:"add",value:function(e){return zr(this.contents),this.contents.add(e)}},{key:"addIn",value:function(e,t){zr(this.contents),this.contents.addIn(e,t)}},{key:"delete",value:function(e){return zr(this.contents),this.contents.delete(e)}},{key:"deleteIn",value:function(e){return rn(e)?null!=this.contents&&(this.contents=null,!0):(zr(this.contents),this.contents.deleteIn(e))}},{key:"getDefaults",value:function(){return e.defaults[this.version]||e.defaults[this.options.version]||{}}},{key:"get",value:function(e,t){return this.contents instanceof on?this.contents.get(e,t):void 0}},{key:"getIn",value:function(e,t){return rn(e)?!t&&this.contents instanceof tn?this.contents.value:this.contents:this.contents instanceof on?this.contents.getIn(e,t):void 0}},{key:"has",value:function(e){return this.contents instanceof on&&this.contents.has(e)}},{key:"hasIn",value:function(e){return rn(e)?void 0!==this.contents:this.contents instanceof on&&this.contents.hasIn(e)}},{key:"set",value:function(e,t){zr(this.contents),this.contents.set(e,t)}},{key:"setIn",value:function(e,t){rn(e)?this.contents=t:(zr(this.contents),this.contents.setIn(e,t))}},{key:"setSchema",value:function(e,t){if(e||t||!this.schema){"number"==typeof e&&(e=e.toFixed(1)),"1.0"===e||"1.1"===e||"1.2"===e?(this.version?this.version=e:this.options.version=e,delete this.options.schema):e&&"string"==typeof e&&(this.options.schema=e),Array.isArray(t)&&(this.options.customTags=t);var n=Object.assign({},this.getDefaults(),this.options);this.schema=new jr(n)}}},{key:"parse",value:function(e,t){this.options.keepCstNodes&&(this.cstNode=e),this.options.keepNodeTypes&&(this.type="DOCUMENT");var n=e.directives,r=void 0===n?[]:n,i=e.contents,o=void 0===i?[]:i,a=e.directivesEndMarker,s=e.error,u=e.valueRange;if(s&&(s.source||(s.source=this),this.errors.push(s)),function(e,t,n){var r,i=[],o=!1,a=Qe(t);try{for(a.s();!(r=a.n()).done;){var s=r.value,u=s.comment,c=s.name;switch(c){case"TAG":try{e.tagPrefixes.push(Wr(e,s))}catch(t){e.errors.push(t)}o=!0;break;case"YAML":case"YAML:1.0":e.version&&e.errors.push(new It(s,"The %YAML directive must only be given at most once per document."));try{e.version=$r(e,s)}catch(t){e.errors.push(t)}o=!0;break;default:if(c){var l="YAML only supports %TAG and %YAML directives, and not %".concat(c);e.warnings.push(new At(s,l))}}u&&i.push(u)}}catch(e){a.e(e)}finally{a.f()}n&&!o&&"1.1"===(e.version||n.version||e.options.version)&&(e.tagPrefixes=n.tagPrefixes.map((function(e){return{handle:e.handle,prefix:e.prefix}})),e.version=n.version);e.commentBefore=i.join("\n")||null}(this,r,t),a&&(this.directivesEndMarker=!0),this.range=u?[u.start,u.end]:null,this.setSchema(),this.anchors._cstAliases=[],function(e,t){var n,r={before:[],after:[]},i=void 0,o=!1,a=Qe(t);try{for(a.s();!(n=a.n()).done;){var s=n.value;if(s.valueRange){if(void 0!==i){e.errors.push(new jt(s,"Document contains trailing content not separated by a ... or --- line"));break}var u=Dn(e,s);o&&(u.spaceBefore=!0,o=!1),i=u}else null!==s.comment?(void 0===i?r.before:r.after).push(s.comment):s.type===ot&&(o=!0,void 0===i&&r.before.length>0&&!e.commentBefore&&(e.commentBefore=r.before.join("\n"),r.before=[]))}}catch(e){a.e(e)}finally{a.f()}if(e.contents=i||null,i){var c=r.before.join("\n");if(c){var l=i instanceof on&&i.items[0]?i.items[0]:i;l.commentBefore=l.commentBefore?"".concat(c,"\n").concat(l.commentBefore):c}e.comment=r.after.join("\n")||null}else e.comment=r.before.concat(r.after).join("\n")||null}(this,o),this.anchors.resolveNodes(),this.options.prettyErrors){var c,l=Qe(this.errors);try{for(l.s();!(c=l.n()).done;){var f=c.value;f instanceof Mt&&f.makePretty()}}catch(e){l.e(e)}finally{l.f()}var d,h=Qe(this.warnings);try{for(h.s();!(d=h.n()).done;){var p=d.value;p instanceof Mt&&p.makePretty()}}catch(e){h.e(e)}finally{h.f()}}return this}},{key:"listNonDefaultTags",value:function(){return Br(this.contents).filter((function(e){return 0!==e.indexOf(jr.defaultPrefix)}))}},{key:"setTagPrefix",value:function(e,t){if("!"!==e[0]||"!"!==e[e.length-1])throw new Error("Handle must start and end with !");if(t){var n=this.tagPrefixes.find((function(t){return t.handle===e}));n?n.prefix=t:this.tagPrefixes.push({handle:e,prefix:t})}else this.tagPrefixes=this.tagPrefixes.filter((function(t){return t.handle!==e}))}},{key:"toJSON",value:function(e,t){var n=this,r=this.options,i=r.keepBlobsInJSON,o=r.mapAsMap,a=r.maxAliasCount,s=i&&("string"!=typeof e||!(this.contents instanceof tn)),u={doc:this,indentStep:"  ",keep:s,mapAsMap:s&&!!o,maxAliasCount:a,stringify:Rr},c=Object.keys(this.anchors.map);c.length>0&&(u.anchors=new Map(c.map((function(e){return[n.anchors.map[e],{alias:[],aliasCount:0,count:1}]}))));var l=en(this.contents,e,u);if("function"==typeof t&&u.anchors){var f,d=Qe(u.anchors.values());try{for(d.s();!(f=d.n()).done;){var h=f.value,p=h.count;t(h.res,p)}}catch(e){d.e(e)}finally{d.f()}}return l}},{key:"toString",value:function(){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");var e=this.options.indent;if(!Number.isInteger(e)||e<=0){var t=JSON.stringify(e);throw new Error('"indent" option must be a positive integer, not '.concat(t))}this.setSchema();var n=[],r=!1;if(this.version){var i="%YAML 1.2";"yaml-1.1"===this.schema.name&&("1.0"===this.version?i="%YAML:1.0":"1.1"===this.version&&(i="%YAML 1.1")),n.push(i),r=!0}var o=this.listNonDefaultTags();this.tagPrefixes.forEach((function(e){var t=e.handle,i=e.prefix;o.some((function(e){return 0===e.indexOf(i)}))&&(n.push("%TAG ".concat(t," ").concat(i)),r=!0)})),(r||this.directivesEndMarker)&&n.push("---"),this.commentBefore&&(!r&&this.directivesEndMarker||n.unshift(""),n.unshift(this.commentBefore.replace(/^/gm,"#")));var a={anchors:Object.create(null),doc:this,indent:"",indentStep:" ".repeat(e),stringify:Rr},s=!1,u=null;if(this.contents){this.contents instanceof Zt&&(this.contents.spaceBefore&&(r||this.directivesEndMarker)&&n.push(""),this.contents.commentBefore&&n.push(this.contents.commentBefore.replace(/^/gm,"#")),a.forceBlockIndent=!!this.comment,u=this.contents.comment);var c=u?null:function(){return s=!0},l=Rr(this.contents,a,(function(){return u=null}),c);n.push(Qt(l,"",u))}else void 0!==this.contents&&n.push(Rr(this.contents,a));return this.comment&&(s&&!u||""===n[n.length-1]||n.push(""),n.push(this.comment.replace(/^/gm,"#"))),n.join("\n")+"\n"}}]),e}();Ne(Ur,"defaults",Tr);var qr=function(e){Re(n,Ur);var t=qe(n);function n(e){return Ae(this,n),t.call(this,Object.assign({},Ar,e))}return n}();function Hr(e,t){var n=Xt(e),r=new qr(t).parse(n[0]);if(n.length>1){r.errors.unshift(new It(n[1],"Source contains multiple documents; please use YAML.parseAllDocuments()"))}return r}var Vr=Gr({createNode:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;void 0===n&&"string"==typeof t&&(n=t,t=!0);var r=Object.assign({},Ur.defaults[Ar.version],Ar),i=new jr(r);return i.createNode(e,t,n)},defaultOptions:Ar,Document:qr,parse:function(e,t){var n=Hr(e,t);if(n.warnings.forEach((function(e){return nr(e)})),n.errors.length>0)throw n.errors[0];return n.toJSON()},parseAllDocuments:function(e,t){var n,r,i=[],o=Qe(Xt(e));try{for(o.s();!(r=o.n()).done;){var a=r.value,s=new qr(t);s.parse(a,n),i.push(s),n=s}}catch(e){o.e(e)}finally{o.f()}return i},parseCST:Xt,parseDocument:Hr,scalarOptions:Lr,stringify:function(e,t){var n=new qr(t);return n.contents=e,String(n)}}),Jr=Gr(l);function Yr(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Yr=function(e){return e?n:t})(e)}function Gr(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=Yr(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}function Kr(e){const t=Ie.join(e,"markdown-preview-plus.yaml");if(!(0,q.isFileSync)(t)){const n=Ie.join(e,"markdown-preview-plus.cson");if((0,q.isFileSync)(n)){const e=[{text:"Edit new YAML",onDidClick:function(){(0,q.handlePromise)(atom.workspace.open(t))}},{text:"Show old CSON",onDidClick:function(){(0,q.handlePromise)(atom.workspace.open(n))}}];try{const r=Vr.parseDocument(Jr.readFileSync(n).toString("utf-8"),{keepCstNodes:!0});Jr.writeFileSync(t,r.toString(),{encoding:"utf-8"}),Object.keys(r.toJSON()).length>0&&atom.notifications.addInfo(`${n} converted to YAML and re-saved as ${t}`,{detail:`markdown-preview-plus.cson was converted to YAML. The backup is kept as ${n}`,dismissable:!0,buttons:e})}catch(n){Xr(t),atom.notifications.addWarning("Error converting markdown-preview-plus.cson",{dismissable:!0,detail:n.toString(),description:"Failed to convert markdown-preview-plus.cson to YAML; please make the conversion manually",buttons:e})}}else console.debug("Creating markdown-preview-plus.yaml, this is a one-time operation."),Xr(t)}return t}function Xr(e){const t=Ie.join((0,q.packagePath)(),"assets","macros-template.yaml"),n=Jr.readFileSync(t,"utf8");Jr.writeFileSync(e,n)}function Qr(e){if(Array.isArray(e)){const t=e[0],n=e[1];return"number"==typeof n&&(n%1==0&&"string"==typeof t)}return"string"==typeof e}var Zr={};Object.defineProperty(Zr,"__esModule",{value:!0});var ei=function(e){var t;return null!==(t=window["markdown-preview-plus-tests"])&&void 0!==t&&t.clipboardWrite?window["markdown-preview-plus-tests"].clipboardWrite(e):ii.write(e)};Zr.write=ei;var ti=function(e){var t;return null!==(t=window["markdown-preview-plus-tests"])&&void 0!==t&&t.clipboardWrite?window["markdown-preview-plus-tests"].clipboardWrite(e):atom.clipboard.write(e)};Zr.writePlain=ti;var ni=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=ri(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(a);function ri(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(ri=function(e){return e?n:t})(e)}const ii="linux"===process.platform&&"renderer"===process.type?ni.remote.clipboard:ni.clipboard;var oi=ci(Zr);var ai,si=(ai=function(e){if("string"!=typeof e||e.length<=7||"file://"!==e.substring(0,7))throw new TypeError("must pass in a file:// URI to convert to a file path");const t=decodeURI(e.substring(7)),n=t.indexOf("/");let r=t.substring(0,n),i=t.substring(n+1);return"localhost"===r&&(r=""),r&&(r=S+S+r),i=i.replace(/^(.+)\|/,"$1:"),"\\"===S&&(i=i.replace(/\//g,"\\")),/^.+:/.test(i)||(i=S+i),r+i})&&ai.__esModule?ai:{default:ai};function ui(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(ui=function(e){return e?n:t})(e)}function ci(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=ui(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}function li(e){e&&e.catch((e=>{console.error(e),atom.notifications.addFatalError(e.toString(),{detail:e.message,stack:e.stack,dismissable:!0})}))}function fi(){return atom.config.get("markdown-preview-plus")}let di;function hi(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(hi=function(e){return e?n:t})(e)}function pi(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=hi(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}function vi(e,t){const n=U.join(e,"../",t);if(z.existsSync(n))return n;{const r=U.join(n,"..");return r!==e&&!atom.project.getPaths().includes(r)&&vi(r,t)}}function mi(e,t){const n={maxBuffer:1/0};void 0!==e&&(n.cwd=U.dirname(e));const r=(0,q.atomConfig)().pandocConfig,i={from:r.pandocMarkdownFlavor,to:"html",mathjax:t?"atom://markdown-preview-plus/node_modules/mathjax/MathJax.js":void 0,filter:r.pandocFilters};if(r.pandocBibliography){i.filter.push("pandoc-citeproc");let t=e&&vi(e,r.pandocBIBFile);t||(t=r.pandocBIBFileFallback),i.bibliography=t||void 0;let n=e&&vi(e,r.pandocCSLFile);n||(n=r.pandocCSLFileFallback),i.csl=n||void 0}return{args:i,opts:n}}function gi(e,t){return t&&(e=function(e){const t=document.createElement("div");return t.innerHTML=e,t.querySelectorAll(".math").forEach((function(e){let t=e.innerText;const n=t.indexOf("\\[")>-1?"; mode=display":"";return t=t.replace(/\\[[()\]]/g,""),e.outerHTML=`<span class="math"><script type='math/tex${n}'>${t}<\/script></span>`})),t.innerHTML}(e)),(0,q.atomConfig)().pandocConfig.pandocRemoveReferences&&(e=function(e){const t=document.createElement("div");return t.innerHTML=e,t.querySelectorAll(".references").forEach((e=>{e.remove()})),t.innerHTML}(e)),e}function yi(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?t.push(...r.map((e=>`--${n}=${e}`))):r&&t.push(`--${n}=${r}`);const n=[];for(const e of[...t,...(0,q.atomConfig)().pandocConfig.pandocArguments]){const t=e.replace(/^(--[\w\-]+)\s(.+)$/i,"$1=$2");"-"===t.substr(0,1)&&n.push(t)}return n}W={setPandocOptions:mi,getArguments:yi,findFileRecursive:vi},D.testing=W;var wi=Hi(D),bi={};Object.defineProperty(bi,"__esModule",{value:!0});var ki=void 0;bi.MarkdownItWorker=ki;var _i=function(e){return e&&e.__esModule?e:{default:e}}(_);function Si(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const xi={useLazyHeaders:!0,useCheckBoxes:!0,useToc:!1,useEmoji:!1,breakOnSingleNewline:!1,typographicReplacements:!0,useCriticMarkup:!1,useFootnote:!0,useImsize:!1,inlineMathSeparators:["$","$"],blockMathSeparators:["$$","$$"],tocDepth:0,useAttributes:!0,useSpans:!0,useDivs:!0,useDeflist:!0,useFontmatter:!0,useImplicitFigures:!0,useSubscript:!0,useSuperscript:!0,parseDisplayMathInline:!0,tableCaptions:!0};class Pi{constructor(){if(Si(this,"requestId",0),Si(this,"replyCallbacks",new Map),Si(this,"disposables",new v),this.workerPath=_i.default.join((0,q.packagePath)(),"dist","worker","main.js"),this.worker=this.initWorker(),atom.inDevMode()){const e=new g(this.workerPath);this.disposables.add(e.onDidChange((()=>{this.teardownWorker(),this.worker=this.initWorker(),this.configure(atom.config.get("markdown-preview-plus.markdownItConfig"))})))}this.disposables.add(atom.config.onDidChange("markdown-preview-plus.renderer",(({newValue:e})=>{"pandoc"===e?this.configure(xi):this.configure((0,q.atomConfig)().markdownItConfig)})),atom.config.observe("markdown-preview-plus.markdownItConfig",(e=>{"markdown-it"===(0,q.atomConfig)().renderer&&this.configure(e)})))}static destroy(){Pi._instance&&(Pi._instance.teardownWorker(),Pi._instance.disposables.dispose(),Pi._instance=void 0)}static async render(e,t){return Pi.instance().request({cmd:"render",text:e,rL:t})}static async getTokens(e,t){return Pi.instance().request({cmd:"getTokens",text:e,rL:t})}static instance(){return Pi._instance||(Pi._instance=new Pi),Pi._instance}initWorker(){const e=new Worker(this.workerPath);return e.onmessage=e=>{if("id"in e.data){const t=this.replyCallbacks.get(e.data.id);t&&t.resolve(e.data.result)}else if("evt"in e.data)switch(e.data.evt){case"odd-separators":t=e.data.arr,n=e.data.option,atom.notifications.addWarning("Invalid math delimiter configuration"+(n?`in ${n}`:""),{detail:`Expected even number of elements, but got "${t.join(", ")}"`,dismissable:!0})}var t,n},e}teardownWorker(){this.worker.onmessage=null,this.worker.terminate();for(const{reject:e}of Array.from(this.replyCallbacks.values()))e(new Error("Worker terminated"))}configure(e){this.worker.postMessage({cmd:"config",arg:e})}async request(e){const t=this.requestId++,n=new Promise(((e,n)=>{this.replyCallbacks.set(t,{resolve:n=>{this.replyCallbacks.delete(t),e(n)},reject:e=>{this.replyCallbacks.delete(t),n(e)}})})),r=Object.assign({id:t},e);return this.worker.postMessage(r),n}}ki=Pi,bi.MarkdownItWorker=ki;var Oi={};Object.defineProperty(Oi,"__esModule",{value:!0});var Ci=function(e){return e.querySelectorAll("img[src],audio[src],video[src],link[href]")};Oi.getMedia=Ci;var Mi={};Object.defineProperty(Mi,"__esModule",{value:!0});var Ei=async function(e,t){const n=atom.config.get("markdown-preview-plus.previewConfig.highlighter");if("none"===n)return e;const r=atom.config.get("editor.fontFamily");if(r)for(const t of Array.from(e.querySelectorAll("code")))t.style.fontFamily=r;const i=(0,q.atomConfig)().codeTabWidth||atom.config.get("editor.tabLength");return await Promise.all(Array.from(e.querySelectorAll("pre")).map((async e=>{const r=null!==e.firstElementChild?e.firstElementChild:e,o=r.className&&e.className?e.className:r.className||e.className,[a,...s]=o?o.replace(/^(lang-|sourceCode )/,"").split(" "):[t];e.style.tabSize=i.toString();const u=await async function(e,t){await new Promise(setImmediate);const n=performance.now();let r=n,i=r;return async function(){if(i=performance.now(),i-r>e&&(await new Promise(setImmediate),r=i),i-n>t){const e=new Error("Max time reached");let t="The highlighter took too long to complete and was terminated.\nSome code blocks may be incomplete.";throw"tree-sitter-compatible"===atom.config.get("markdown-preview-plus.previewConfig.highlighter")&&(t+=" You're currently using tree-view-compatible highlighter, you may try\nswitching to legacy highlighter instead."),atom.notifications.addError("Markdown-Preview-Plus: Highlighter took more than 5 seconds to complete",{dismissable:!0,description:t,stack:e.stack}),e}}}(100,5e3),c=r.textContent.replace(/\r?\n$/,"");"legacy"===n?e.innerHTML=await async function(e,t,n){const r=(0,Li.hightlightLines)(e.split("\n"),(0,Ii.scopeForFenceName)(t),"text.plain.null-grammar"),i=[];let o=r.next();for(;!o.done;){i.push(o.value);try{await n()}catch(e){console.error(e);break}o=r.next()}return i.join("\n")}(c,a,u):"tree-sitter-compatible"===n&&(e.innerHTML=await async function(e,t,n,r){const i=new y;try{const o=atom.grammars.grammarForId((0,Ii.scopeForFenceName)(t)),a=atom.grammars.languageModeForGrammarAndBuffer(o,i);i.setLanguageMode(a),i.setText(e);const s=i.getEndPosition();a.startTokenizing&&a.startTokenizing(),await async function(e){return new Promise((t=>{if(e.fullyTokenized||e.tree)t();else if(e.onDidTokenize){const n=e.onDidTokenize((()=>{n.dispose(),t()}))}else t()}))}(a);const u=a.buildHighlightIterator();if(u.getOpenScopeIds&&u.getCloseScopeIds){let e={row:0,column:0};u.seek(e);const t=[];for(;e.row<s.row||e.row===s.row&&e.column<=s.column;){t.push(...u.getCloseScopeIds().map((e=>"</span>")),...u.getOpenScopeIds().map((e=>`<span class="${a.classNameForScopeId(e)}">`)));try{u.moveToSuccessor()}catch(e){console.error(e);const t=e;atom.notifications.addFatalError("Internal error in highlighter",{dismissable:!0,stack:t.stack,description:`${t.message}. You're currently using tree-view-compatible highlighter, you may try\n    switching to legacy highlighter instead.`,detail:t.toString()});break}const n=u.getPosition();t.push(Ui(i.getTextInRange([e,n])));try{await r()}catch(e){console.error(e);break}e=n}return t.join("")}return n}finally{i.destroy()}}(c,a,r.innerHTML,u)),e.classList.add("editor-colors"),a&&e.classList.add(`lang-${a}`),s.length>0&&e.classList.add(...s)}))),e};Mi.highlightCodeBlocks=Ei;var Ii={};Object.defineProperty(Ii,"__esModule",{value:!0});var ji=function(e){const t=e.toLowerCase();return Ai[t]||`source.${t}`};Ii.scopeForFenceName=ji;const Ai={sh:"source.shell",bash:"source.shell",c:"source.c","c++":"source.cpp",cpp:"source.cpp",coffee:"source.coffee",coffeescript:"source.coffee","coffee-script":"source.coffee",cs:"source.cs",csharp:"source.cs",css:"source.css",scss:"source.css.scss",sass:"source.sass",erlang:"source.erl",go:"source.go",html:"text.html.basic",java:"source.java",js:"source.js",javascript:"source.js",json:"source.json",less:"source.less",mustache:"text.html.mustache",objc:"source.objc","objective-c":"source.objc",php:"text.html.php",py:"source.python",python:"source.python",rb:"source.ruby",ruby:"source.ruby",text:"text.plain",toml:"source.toml",xml:"text.xml",yaml:"source.yaml",yml:"source.yaml"};var Li={};Object.defineProperty(Li,"__esModule",{value:!0});var Ti=(Ri=void 0,Li.isEqualArray=Ri);function Ni(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}Li.hightlightLines=Ti;var Ri=Ni;function Fi(e){switch(e){case"&":return"&amp;";case'"':return"&quot;";case"'":return"&#39;";case"<":return"&lt;";case">":return"&gt;";case" ":return"&nbsp;";default:return e}}function Di(e){return e.replace(/[&"'<>]/g,Fi)}function Bi(e){return e.replace(/[&"'<> ]/g,Fi)}function Wi(e,t,n){e.push(t),n.push(`<span class="${t.replace(/\.+/g," ")}">`)}function $i(e,t){e.pop(),t.push("</span>")}function zi(e,t,n){let r=e.length-t.length;if(r>0)for(;r--;)$i(e,n);let i=0;for(let r=e.length;r>=0;--r){if(Ni(e.slice(0,r),t.slice(0,r))){i=r;break}$i(e,n)}for(let r=i;r<t.length;++r)Wi(e,t[r],n)}function Ui(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function qi(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(qi=function(e){return e?n:t})(e)}function Hi(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=qi(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}Li.isEqualArray=Ri,Ti=function*(e,t,n,r){const i=atom.grammars.textmateRegistry||atom.grammars;if(!i)throw new Error("No Atom grammar registry found");const o=i.grammarForScopeName(t)||(n?i.grammarForScopeName(n):void 0);if(!o)throw new Error(`Grammar ${t} not found, and no ${n} grammar`);const a=r?Bi:Di,s=e[Symbol.iterator]();let u=s.next(),c=null;const l=[];for(;!u.done;){const e=o.tokenizeLine(u.value,c);c=e.ruleStack;const t=[];for(const{value:n,scopes:r}of e.tokens){zi(l,r.map((e=>`syntax--${e.replace(/\./g,".syntax--")}`)),t),t.push(a(n))}for(;l.length>0;)$i(l,t);yield t.join(""),u=s.next()}},Li.hightlightLines=Ti;const{resourcePath:Vi}=atom.getLoadSettings();function Ji(e){const t="relativized"===e.behaviour;switch(e.behaviour){case"relativized":case"absolutized":Yi(e.doc,e.filePath,t,e.savePath)}}function Yi(e,t,n,r,i){const[o]=atom.project.relativizePath(t||""),a=(0,Oi.getMedia)(e);Array.from(a).map((function(e){let a;a="LINK"===e.tagName?"href":"src";let s=e.getAttribute(a);if(s){if("pandoc"!==(0,q.atomConfig)().renderer&&(s=decodeURI(s)),s.match(/^(https?|atom|data):/))return;if(process.resourcesPath&&s.startsWith(process.resourcesPath))return;if(s.startsWith(Vi))return;if(s.startsWith((0,q.packagePath)()))return;if("/"===s[0]){if(!(0,q.isFileSync)(s))try{null!==o&&(s=F.join(o,s.substring(1)))}catch(e){}}else t&&(s=F.resolve(F.dirname(t),s));if(n&&(void 0!==t||void 0!==r)){const e=void 0!==r?r:t;s=F.relative(F.dirname(e),s)}if(i){const e=i.watch(s);void 0!==e&&(s=`${s}?v=${e}`)}e[a]=s}}))}var Gi=Fo(N),Ki=Fo(te),Xi={};Object.defineProperty(Xi,"__esModule",{value:!0});var Qi=async function(e,t,n,r,i){const o=(0,q.atomConfig)();return new Promise((a=>{const s="none"===o.saveConfig.saveToPDFOptions.styleOverride?o.style:o.saveConfig.saveToPDFOptions.styleOverride,u=new X.WebviewHandler(s,(async()=>{const s=o.saveConfig.saveToPDFOptions,c="Custom"===s.pageSize?function(e){if(!e)return;const t=/^([\d.,]+)(cm|mm|in)?x([\d.,]+)(cm|mm|in)?$/i,n=e.replace(/\s*/g,"").match(t);if(n){const e=parseFloat(n[1]),t=n[2],r=parseFloat(n[3]),i=n[4];return{width:Zi(e,t),height:Zi(r,i)}}return}(s.customPageSize):s.pageSize;if(void 0===c)throw new Error(`Failed to parse custom page size: ${s.customPageSize}`);const l=!!await u.getSelection()&&s.printSelectionOnly,f={...s,pageSize:c,printSelectionOnly:l},[d,p]=function(e){switch(e){case"A3":return[297,420];case"A4":return[210,297];case"A5":return[148,210];case"Legal":return[216,356];case"Letter":return[216,279];case"Tabloid":return[279,432];default:return[e.width/1e3,e.height/1e3]}}(f.pageSize),v=o.mathConfig,m=o.saveConfig.saveToPDFOptions.latexRenderer,g="Same as live preview"===m?v.latexRenderer:m;await u.init({userMacros:(0,Ce.loadUserMacros)(),mathJaxConfig:{...v,latexRenderer:g},context:"pdf-export",pdfExportOptions:{width:f.landscape?p:d}}),await u.setBasePath(t);const y=await(0,N.render)({text:e,filePath:t,grammar:n,renderLaTeX:r,renderErrors:!1,mode:"normal"});await u.update(y.documentElement.outerHTML,r),await u.fullyReady();try{const e=await u.printToPDF(f);await new Promise(((t,n)=>{h(i,e,(e=>{e?n(e):t()}))}))}catch(e){const t=e;atom.notifications.addError("Failed saving to PDF",{description:t.toString(),dismissable:!0,stack:t.stack})}u.destroy(),a()}));u.element.style.pointerEvents="none",u.element.style.position="absolute",u.element.style.top="0",u.element.style.opacity="0",u.element.style.height="100vh",u.element.style.width="100vw";atom.views.getView(atom.workspace).appendChild(u.element),u.updatePosition()}))};function Zi(e,t){return e*function(e="mm"){switch(e){case"mm":return 1e3;case"cm":return 1e4;case"in":return 25400}}(t)}Xi.saveAsPDF=Qi;var eo={};Object.defineProperty(eo,"__esModule",{value:!0});var to=async function(e=""){let t;const n=document.activeElement,r=new v;try{return await new Promise((n=>{const i=atom.workspace.buildTextEditor({mini:!0,placeholderText:e}),o=atom.views.getView(i);let a=!0;setTimeout((()=>{a=!1}),100),o.onblur=()=>{a?o.focus():atom.commands.dispatch(o,"core:cancel")},r.add(atom.commands.add(o,{"core:confirm":()=>{n(i.getText())},"core:cancel":()=>{o.onblur=null,n(void 0)}})),t=atom.workspace.addModalPanel({item:i,visible:!0}),o.focus()}))}finally{r.dispose(),t&&t.destroy(),n&&n.focus()}};eo.modalTextEditorView=to;var no={};Object.defineProperty(no,"__esModule",{value:!0});var ro=void 0;function io(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}no.BrowserWindowHandler=ro;const oo=[{label:"Sync Source",command:"markdown-preview-plus:sync-source"},{label:"Search Selection in Source",command:"markdown-preview-plus:search-selection-in-source"},{label:"Find in Preview...",command:"markdown-preview-plus:find-in-preview"},{label:"Find Next",command:"markdown-preview-plus:find-next"},{label:"Copy As HTML",command:"core:copy"},{label:"Save As…",command:"core:save-as"},{label:"Open in main window",command:"markdown-preview-plus:main-window"},{label:"Open Dev Tools",command:"markdown-preview-plus:open-dev-tools"},{label:"Toggle math rendering",command:"markdown-preview-plus:toggle-render-latex"}];class ao extends Z.WebContentsHandler{constructor(e,t){const n=new s.BrowserWindow({webPreferences:{webSecurity:!1,nodeIntegration:!0}});ao.windows.add(n),n.on("close",(()=>this.destroy())),n.setMenuBarVisibility(!1),super(Promise.resolve(n.webContents),(()=>{this.menu&&this.menu.popup({window:n})}),e,t),this.window=n,this._element=document.createElement("div")}get element(){return this._element}static clean(){const e=Array.from(ao.windows);for(const t of e)t.close();const t=Array.from(ao.views.keys());for(const e of t)e.destroy()}static viewForURI(e){return Array.from(ao.views.keys()).find((t=>t.getURI()===e))}static windowForView(e){return ao.views.get(e)}registerViewEvents(e){ao.views.set(e,this.window);const t=e.onDidDestroy((()=>{ao.views.delete(e),t.dispose()})),n=atom.views.getView(e);this.disposables.add(atom.commands.add(n,{"core:save-as":()=>{const t=atom.applicationDelegate.showSaveDialog(e.getSaveDialogOptions());t&&e.saveAs(t)},"markdown-preview-plus:main-window":()=>{e.openMainWindow()}})),this.menu=s.Menu.buildFromTemplate(oo.map((({label:e,command:t})=>({label:e,click:()=>atom.commands.dispatch(n,t)}))))}destroy(){this.destroyed||(super.destroy(),this.window.destroy(),ao.windows.delete(this.window))}}ro=ao,no.BrowserWindowHandler=ro,io(ao,"windows",new Set),io(ao,"views",new Map);var so={};Object.defineProperty(so,"__esModule",{value:!0}),Object.defineProperty(so,"MarkdownPreviewControllerEditor",{enumerable:!0,get:function(){return uo.MarkdownPreviewControllerEditor}}),Object.defineProperty(so,"MarkdownPreviewControllerFile",{enumerable:!0,get:function(){return Oo.MarkdownPreviewControllerFile}}),Object.defineProperty(so,"MarkdownPreviewControllerText",{enumerable:!0,get:function(){return jo.MarkdownPreviewControllerText}}),Object.defineProperty(so,"MarkdownPreviewController",{enumerable:!0,get:function(){return lo.MarkdownPreviewController}});var uo={};Object.defineProperty(uo,"__esModule",{value:!0});var co=void 0;uo.MarkdownPreviewControllerEditor=co;var lo={};Object.defineProperty(lo,"__esModule",{value:!0});var fo=void 0;function ho(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}lo.MarkdownPreviewController=fo;fo=class{constructor(){ho(this,"disposables",new v),ho(this,"emitter",new p),this.disposables.add(this.emitter)}destroy(){this.emitter.emit("did-destroy"),this.disposables.dispose()}didScrollPreview(e,t){}getScrollSyncParams(){}onDidChange(e){return this.emitter.on("did-change",e)}onDidChangePath(e){return this.emitter.on("did-change-path",e)}onDidDestroy(e){return this.emitter.on("did-destroy",e)}onScrollSync(e){return this.emitter.on("scroll-sync",e)}onSearch(e){return this.emitter.on("search",e)}onSync(e){return this.emitter.on("sync",e)}onActivate(e){return this.emitter.on("activate",e)}},lo.MarkdownPreviewController=fo;var po={};Object.defineProperty(po,"__esModule",{value:!0});var vo=function(e){const t=ko(e);return t||new I.MarkdownPreviewView(new so.MarkdownPreviewControllerEditor(e))};po.createEditorView=vo;var mo=ko;po.viewForEditor=mo;var go=_o;po.viewForFile=go;var yo=function(e){const t=_o(e);return t||new I.MarkdownPreviewView(new so.MarkdownPreviewControllerFile(e))};po.createFileView=yo;var wo=function(e){return new I.MarkdownPreviewView(new so.MarkdownPreviewControllerText(Promise.resolve(e)))};po.createTextView=wo;var bo=async function(e){const t=atom.workspace.getActivePane(),n={searchAllPanes:!0},r=(0,q.atomConfig)().previewConfig.previewSplitPaneDir;"none"!==r&&(n.split=r);const i=await atom.workspace.open(e,n);t.isDestroyed()||t.activate();return i};function ko(e){return So(`markdown-preview-plus://editor/${e.id}`)}function _o(e){return So(`markdown-preview-plus://file/${e}`)}function So(e){const t=atom.workspace.paneForURI(e);if(t){const n=t.itemForURI(e);if(n)return n}return no.BrowserWindowHandler.viewForURI(e)}function xo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}po.openPreviewPane=bo;class Po extends lo.MarkdownPreviewController{constructor(e){super(),xo(this,"type","editor"),xo(this,"text",""),this.editor=e,this.text=e.getText(),(0,q.handlePromise)(this.handleEditorEvents())}serialize(){return{deserializer:"markdown-preview-plus/MarkdownPreviewView",editorId:this.editor&&this.editor.id}}getTitle(){return`${this.editor.getTitle()} Preview`}getURI(){return`markdown-preview-plus://editor/${this.editor.id}`}getPath(){return this.editor.getPath()}async getMarkdownSource(){return this.text}getGrammar(){return this.editor.getGrammar()}onDidChange(e){return this.emitter.on("did-change",e)}didScrollPreview(e,t){if(this.shouldScrollSync("preview"))if(0===e)this.editor.scrollToBufferPosition([e,0]);else if(t>=this.editor.getLastBufferRow()-1)this.editor.scrollToBufferPosition([t,0]);else{const n=m.fromObject([[e,0],[t,0]]);this.editor.scrollToScreenRange(this.editor.screenRangeForBufferRange(n),{center:!1})}}getScrollSyncParams(){try{const[e,t]=this.editor.getVisibleRowRange();return{firstLine:this.editor.bufferRowForScreenRow(e),lastLine:this.editor.bufferRowForScreenRow(t)}}catch(e){return void console.error(e)}}openSource(e){void 0!==e&&this.editor.setCursorBufferPosition([e,0]);const t=atom.workspace.paneForItem(this.editor);t&&(t.activateItem(this.editor),t.activate())}async handleEditorEvents(){this.disposables.add(atom.workspace.onDidChangeActiveTextEditor((e=>{(0,q.atomConfig)().previewConfig.activatePreviewWithEditor&&e===this.editor&&this.emitter.emit("activate",atom.workspace.paneForItem(e))})),this.editor.getBuffer().onDidStopChanging((()=>{(0,q.atomConfig)().previewConfig.liveUpdate&&this.changeHandler(),(0,q.atomConfig)().syncConfig.syncPreviewOnChange&&this.syncPreviewHelper(!1)})),this.editor.onDidChangePath((()=>{this.emitter.emit("did-change-path",this.getPath())})),this.editor.onDidDestroy((()=>{this.destroy()})),this.editor.getBuffer().onDidSave((()=>{(0,q.atomConfig)().previewConfig.liveUpdate||this.changeHandler()})),this.editor.getBuffer().onDidReload((()=>{(0,q.atomConfig)().previewConfig.liveUpdate||this.changeHandler()})),atom.views.getView(this.editor).onDidChangeScrollTop((()=>{if(!this.shouldScrollSync("editor"))return;const e=this.getScrollSyncParams();void 0!==e&&this.emitter.emit("scroll-sync",e)})),atom.commands.add(atom.views.getView(this.editor),{"markdown-preview-plus:sync-preview":()=>{this.syncPreviewHelper(!0)},"markdown-preview-plus:search-selection-in-preview":()=>{const e=this.editor.getSelectedText();this.emitter.emit("search",e)}}))}changeHandler(){this.text=this.editor.getText(),this.emitter.emit("did-change")}syncPreviewHelper(e){const t=this.editor.getCursorBufferPosition().row;this.emitter.emit("sync",[t,e])}shouldScrollSync(e){const t=(0,q.atomConfig)().syncConfig;if(!t.syncEditorOnPreviewScroll||!t.syncPreviewOnEditorScroll)return t.syncEditorOnPreviewScroll&&"preview"===e||t.syncPreviewOnEditorScroll&&"editor"===e;if("editor"===e){const e=this.editor;if(!e)return!1;return!!s.getCurrentWindow().isFocused()&&e===atom.workspace.getActivePaneItem()}if("preview"===e){const e=(0,po.viewForEditor)(this.editor);if(!e)return!1;const t=no.BrowserWindowHandler.windowForView(e);return t?t.isFocused():e===atom.workspace.getActivePaneItem()}return!1}}co=Po,uo.MarkdownPreviewControllerEditor=co;var Oo={};Object.defineProperty(Oo,"__esModule",{value:!0});var Co=void 0;Oo.MarkdownPreviewControllerFile=Co;var Mo=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=Eo(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(_);function Eo(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Eo=function(e){return e?n:t})(e)}class Io extends lo.MarkdownPreviewController{constructor(e){super(),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"type","file"),this.file=new g(e),this.disposables.add(this.file.onDidChange((()=>{this.emitter.emit("did-change")})))}serialize(){return{deserializer:"markdown-preview-plus/MarkdownPreviewView",filePath:this.file.getPath()}}getTitle(){const e=this.getPath();return`${e?Mo.basename(e):"Markdown File"} Preview`}getURI(){return`markdown-preview-plus://file/${this.getPath()}`}getPath(){return this.file.getPath()}getGrammar(){}async getMarkdownSource(){const e=await this.file.read();return null!==e?e:""}}Co=Io,Oo.MarkdownPreviewControllerFile=Co;var jo={};Object.defineProperty(jo,"__esModule",{value:!0});var Ao=void 0;function Lo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}jo.MarkdownPreviewControllerText=Ao;class To extends lo.MarkdownPreviewController{constructor(e){super(),Lo(this,"type","text"),Lo(this,"text",""),this.textPromise=e,(0,q.handlePromise)(e.then((e=>{this.text=e})))}serialize(){return{deserializer:"markdown-preview-plus/MarkdownPreviewView",text:this.text}}getTitle(){return"Markdown Preview"}getURI(){return"markdown-preview-plus://text/"}getPath(){}getGrammar(){}async getMarkdownSource(){return this.textPromise}}Ao=To,jo.MarkdownPreviewControllerText=Ao;var No=Fo(Zr);function Ro(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Ro=function(e){return e?n:t})(e)}function Fo(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=Ro(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}function Do(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Bo{get type(){return this.controller.type}constructor(e,t=(0,q.atomConfig)().mathConfig.enableLatexRenderingByDefault,n=X.WebviewHandler){Do(this,"emitter",new p),Do(this,"disposables",new v),Do(this,"destroyed",!1),Do(this,"loading",!0),Do(this,"changeHandler",(()=>{(0,q.handlePromise)(this.renderMarkdown());const e=atom.workspace.paneForItem(this);void 0!==e&&e!==atom.workspace.getActivePane()&&e.activateItem(this)})),this.controller=e,this.renderLaTeX=t,this.disposables.add(this.emitter);const r=(0,q.atomConfig)();this.handler=new n(r.style,(async()=>{await this.handler.init({userMacros:(0,Ce.loadUserMacros)(),mathJaxConfig:r.mathConfig,context:"live-preview"}),await this.handler.setBasePath(this.getPath()),await this.handler.setNativeKeys(r.previewConfig.nativePageScrollKeys),this.emitter.emit("did-change-title"),this.emitter.emit("did-init")})),this.disposables.add(atom.config.onDidChange("markdown-preview-plus.style",(e=>{(0,q.handlePromise)(this.handler.setClientStyle(e.newValue))}))),this.element=document.createElement("div"),this.element.tabIndex=-1,this.element.classList.add("markdown-preview-plus"),Bo.elementMap.set(this.element,this),this.subscribeController(),this._initialRenderPromsie=new Promise((e=>{this.disposables.add(this.emitter.on("did-init",(()=>{(0,q.handlePromise)(this.renderMarkdown().then((()=>{this.loading=!1,e()})))})))})),this.handler.element&&this.element.appendChild(this.handler.element),this.handler.registerViewEvents(this),this.disposables.add(this.handler.onDidDestroy((()=>this.destroy()))),this.handleEvents()}static viewForElement(e){return Bo.elementMap.get(e)}serialize(){return this.controller.serialize()}destroy(){this.destroyed||(this.destroyed=!0,this.emitter.emit("did-destroy"),this.disposables.dispose(),this.controller.destroy(),this.handler.destroy(),Bo.elementMap.delete(this.element),this.element.remove())}onDidDestroy(e){return this.emitter.on("did-destroy",e)}async runJS(e){return this.handler.runJS(e)}async initialRenderPromise(){await this._initialRenderPromsie}onDidChangeTitle(e){return this.emitter.on("did-change-title",e)}onDidChangeMarkdown(e){return this.emitter.on("did-change-markdown",e)}toggleRenderLatex(){this.renderLaTeX=!this.renderLaTeX,this.changeHandler()}getTitle(){return this.controller.getTitle()}getDefaultLocation(){return(0,q.atomConfig)().previewConfig.previewDock}getIconName(){return"markdown"}getURI(){return this.controller.getURI()}getPath(){return this.controller.getPath()}getSaveDialogOptions(){let e=this.getPath();if(void 0===e){const t=atom.project.getPaths()[0];e="untitled.md",t&&(e=A.join(t,e))}return e+="."+(0,q.atomConfig)().saveConfig.defaultSaveFormat,{defaultPath:e}}saveAs(e){if(void 0===e)return;if(this.loading)throw new Error("Preview is still loading");const{name:t,ext:n}=A.parse(e),i=(0,q.atomConfig)();if(".pdf"===n)(0,q.handlePromise)(this.getMarkdownSource().then((async t=>(await(0,Xi.saveAsPDF)(t,this.getPath(),this.getGrammar(),this.renderLaTeX,e),i.saveConfig.openOnSave.pdf?(0,q.shellOpen)(r(e).toString()):void 0))));else{const n=i.style;(0,q.handlePromise)(this.getHTMLToSave(e).then((async r=>{const o=Ki.mkHtml(t,r,this.renderLaTeX,await this.handler.getTeXConfig(),n);return T.writeFileSync(e,o),i.saveConfig.openOnSave.html?atom.workspace.open(e):void 0})))}}openMainWindow(){const e=this.createNewFromThis(X.WebviewHandler);(0,q.handlePromise)((0,po.openPreviewPane)(e)),Ki.destroy(this)}openNewWindow(){const e=this.createNewFromThis(no.BrowserWindowHandler);atom.views.getView(atom.workspace).appendChild(e.element),Ki.destroy(this)}createNewFromThis(e){const t=this.controller;return this.controller=new so.MarkdownPreviewControllerText(this.getMarkdownSource()),this.subscribeController(),new Bo(t,this.renderLaTeX,e)}async getMarkdownSource(){return this.controller.getMarkdownSource()}getGrammar(){return this.controller.getGrammar()}async openSource(e){const t=this.getPath();if(void 0===t)return;const n=await atom.workspace.open(t,{initialLine:e,searchAllPanes:!0});return atom.workspace.isTextEditor(n)?("editor"!==this.controller.type&&(this.controller.destroy(),this.controller=new so.MarkdownPreviewControllerEditor(n),this.subscribeController()),n):void 0}async syncPreview(e,t){return this.handler.sync(e,t)}handleEvents(){this.disposables.add(atom.grammars.onDidAddGrammar((()=>(0,L.debounce)((()=>{(0,q.handlePromise)(this.renderMarkdown())}),250))),atom.grammars.onDidUpdateGrammar((0,L.debounce)((()=>{(0,q.handlePromise)(this.renderMarkdown())}),250)),atom.commands.add(this.element,{"core:move-up":()=>this.handler.runJS('window.scrollBy({top:-30, behavior: "auto"})'),"core:move-down":()=>this.handler.runJS('window.scrollBy({top:30, behavior: "auto"})'),"core:move-left":()=>this.handler.runJS('window.scrollBy({left:-30, behavior: "auto"})'),"core:move-right":()=>this.handler.runJS('window.scrollBy({left:-30, behavior: "auto"})'),"core:page-up":()=>this.handler.runJS('window.scrollBy({top:-0.9*window.innerHeight, behavior: "auto"})'),"core:page-down":()=>this.handler.runJS('window.scrollBy({top:0.9*window.innerHeight, behavior: "auto"})'),"core:move-to-top":()=>this.handler.runJS('window.scrollBy({top:-document.body.scrollHeight, behavior: "smooth"})'),"core:move-to-bottom":()=>this.handler.runJS('window.scrollBy({top:document.body.scrollHeight, behavior: "smooth"})'),"core:cancel":e=>{this.handler.hasSearch()?(0,q.handlePromise)(this.handler.stopSearch()):e.abortKeyBinding()},"core:copy":()=>{(0,q.handlePromise)(this.copyToClipboard())},"markdown-preview-plus:open-dev-tools":()=>{(0,q.handlePromise)(this.handler.openDevTools())},"markdown-preview-plus:new-window":()=>{this.openNewWindow()},"markdown-preview-plus:print":()=>{(0,q.handlePromise)(this.handler.print())},"markdown-preview-plus:zoom-in":()=>{(0,q.handlePromise)(this.handler.zoomIn())},"markdown-preview-plus:zoom-out":()=>{(0,q.handlePromise)(this.handler.zoomOut())},"markdown-preview-plus:reset-zoom":()=>{(0,q.handlePromise)(this.handler.resetZoom())},"markdown-preview-plus:sync-source":e=>{(0,q.handlePromise)(this.handler.syncSource().then((e=>this.openSource(e))))},"markdown-preview-plus:search-selection-in-source":()=>{(0,q.handlePromise)(this.searchSelectionInSource())},"markdown-preview-plus:find-next":()=>{(0,q.handlePromise)(this.handler.findNext())},"markdown-preview-plus:find-in-preview":()=>{const e=s.getCurrentWindow(),t=s.BrowserWindow.getFocusedWindow();t!==e&&e.focus(),(0,q.handlePromise)((0,eo.modalTextEditorView)("Find in preview").then((n=>{if(t&&t!==e&&t.focus(),n)return this.handler.search(n)})))}}),atom.config.onDidChange("markdown-preview-plus.markdownItConfig",(()=>{"markdown-it"===(0,q.atomConfig)().renderer&&this.changeHandler()})),atom.config.onDidChange("markdown-preview-plus.pandocConfig",(()=>{"pandoc"===(0,q.atomConfig)().renderer&&this.changeHandler()})),atom.config.onDidChange("markdown-preview-plus.mathConfig.latexRenderer",(()=>(0,q.handlePromise)(this.handler.reload()))),atom.config.onDidChange("markdown-preview-plus.mathConfig.numberEquations",(()=>(0,q.handlePromise)(this.handler.reload()))),atom.config.onDidChange("markdown-preview-plus.previewConfig.nativePageScrollKeys",(({newValue:e})=>(0,q.handlePromise)(this.handler.setNativeKeys(e)))),atom.config.onDidChange("markdown-preview-plus.renderer",this.changeHandler),atom.config.onDidChange("markdown-preview-plus.previewConfig.highlighter",this.changeHandler),this.handler.emitter.on("did-scroll-preview",(({min:e,max:t})=>{this.controller.didScrollPreview(e,t)})))}async renderMarkdown(){return this.renderMarkdownText(await this.getMarkdownSource())}async getHTMLToSave(e){const t=await this.getMarkdownSource();return Gi.render({text:t,filePath:this.getPath(),grammar:this.getGrammar(),renderLaTeX:this.renderLaTeX,renderErrors:!1,mode:"save",savePath:e})}async renderMarkdownText(e){try{const t=await Gi.render({text:e,filePath:this.getPath(),grammar:this.getGrammar(),renderLaTeX:this.renderLaTeX,renderErrors:!0,mode:"normal",imageWatcher:this.handler.imageWatcher});if(this.destroyed)return;const n=(0,q.atomConfig)();await this.handler.update(t.documentElement.outerHTML,this.renderLaTeX,n.previewConfig.diffMethod,Ki.buildLineMap(t.querySelector("[data-pos]")?t:await bi.MarkdownItWorker.getTokens(e,this.renderLaTeX)),n.syncConfig.syncPreviewOnEditorScroll?this.controller.getScrollSyncParams():void 0),this.emitter.emit("did-change-markdown")}catch(e){await this.showError(e)}}async showError(e){return this.destroyed?void atom.notifications.addFatalError("Error reported on a destroyed Markdown Preview Plus view",{dismissable:!0,stack:e.stack,detail:e.message}):this.loading?void atom.notifications.addFatalError("Error reported when Markdown Preview Plus view is loading",{dismissable:!0,stack:e.stack,detail:e.message}):this.handler.error(e.message)}async copyToClipboard(){const e=await this.handler.getSelection();if(void 0!==e)atom.config.get("markdown-preview-plus.richClipboard")?await this.handler.runJS('document.execCommand("copy")'):No.writePlain(e);else{const e=await this.getMarkdownSource();await(0,q.copyHtml)(e,this.getPath(),this.renderLaTeX,(0,q.atomConfig)().style)}}async searchSelectionInSource(){const e=await this.handler.getSelection();if(!e)return;const t=await this.openSource();if(!t)return;const n=e.replace(/[\/\\^$*+?.()|[\]{}]/g,"\\$&").replace(/\n+$/,"").replace(/\s+/g,"\\s+"),r=new RegExp(n);let i=!1;t.scanInBufferRange(r,new m(t.getCursors()[0].getBufferPosition(),t.getBuffer().getRange().end),(e=>{t.scrollToBufferPosition(e.range.start),t.setSelectedBufferRange(e.range),i=!0,e.stop()})),i||t.scan(r,(e=>{t.scrollToBufferPosition(e.range.start),t.setSelectedBufferRange(e.range),e.stop()}))}subscribeController(){this.controllerDisposables&&(this.disposables.remove(this.controllerDisposables),this.controllerDisposables.dispose()),this.controllerDisposables=new v,this.disposables.add(this.controllerDisposables),this.controllerDisposables.add(this.controller.onDidChange(this.changeHandler),this.controller.onDidChangePath((e=>{(0,q.handlePromise)(this.handler.setBasePath(e)),this.emitter.emit("did-change-title")})),this.controller.onDidDestroy((()=>{if((0,q.atomConfig)().previewConfig.closePreviewWithEditor)Ki.destroy(this);else{const e=this.controller.getPath();this.controller=e?new so.MarkdownPreviewControllerFile(e):new so.MarkdownPreviewControllerText(this.controller.getMarkdownSource()),this.subscribeController()}})),this.controller.onActivate((e=>{const t=atom.workspace.paneForItem(this);t&&t!==e&&t.activateItem(this)})),this.controller.onScrollSync((({firstLine:e,lastLine:t})=>{(0,q.handlePromise)(this.handler.scrollSync(e,t))})),this.controller.onSearch((e=>{(0,q.handlePromise)(this.handler.search(e))})),this.controller.onSync((([e,t])=>{(0,q.handlePromise)(this.syncPreview(e,t))})))}}j=Bo,I.MarkdownPreviewView=j,Do(Bo,"elementMap",new WeakMap);var Wo=po;Object.keys(Wo).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(E,e)||e in M&&M[e]===Wo[e]||Object.defineProperty(M,e,{enumerable:!0,get:function(){return Wo[e]}}))}));var $o=hs(_),zo=hs(q),Uo={};Object.defineProperty(Uo,"__esModule",{value:!0});var qo=void 0;function Ho(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Uo.PlaceholderView=qo;qo=class{constructor(e){Ho(this,"element",document.createElement("div")),Ho(this,"initialize",(()=>{const e=(0,te.editorForId)(this.editorId);if(!e)return;const t=atom.workspace.paneForItem(this);this._view=(0,M.createEditorView)(e),t&&(t.addItem(this._view),(0,q.handlePromise)(t.destroyItem(this)))})),this.editorId=e,this.element.classList.add("markdown-spinner"),setImmediate(this.initialize)}getView(){return this._view}getTitle(){return"Placeholder Markdown Preview Plus View"}getURI(){return"markdown-preview-plus://placeholder"}},Uo.PlaceholderView=qo;var Vo={};Object.defineProperty(Vo,"__esModule",{value:!0});var Jo=function(){const e=atom.config.get("markdown-preview-plus"),t=[];void 0!==atom.config.get("markdown-preview-plus.markdownItConfig.forceFullToc")&&(atom.notifications.addWarning("Markdown-preivew-plus warning",{description:"forceFullToc option is removed upstream"}),atom.config.unset("markdown-preview-plus.markdownItConfig.forceFullToc"));void 0!==e.useGitHubStyle&&(atom.config.set("markdown-preview-plus.style",e.useGitHubStyle?"github":"default"),Yo("useGitHubStyle"),t.push(!0));void 0!==e.enablePandoc&&(atom.config.set("markdown-preview-plus.renderer",e.enablePandoc?"pandoc":"markdown-it"),Yo("enablePandoc"),t.push(!0));return t.push(Go(e,"markdown-preview-plus.markdownItConfig.breakOnSingleNewline","breakOnSingleNewline"),Go(e,"markdown-preview-plus.previewConfig.liveUpdate","liveUpdate"),Go(e,"markdown-preview-plus.previewConfig.previewSplitPaneDir","previewSplitPaneDir"),Go(e,"markdown-preview-plus.previewConfig.previewDock","previewDock"),Go(e,"markdown-preview-plus.previewConfig.closePreviewWithEditor","closePreviewWithEditor"),Go(e,"markdown-preview-plus.previewConfig.activatePreviewWithEditor","activatePreviewWithEditor"),Go(e,"markdown-preview-plus.syncConfig.syncPreviewOnChange","syncPreviewOnChange"),Go(e,"markdown-preview-plus.syncConfig.syncPreviewOnEditorScroll","syncPreviewOnEditorScroll"),Go(e,"markdown-preview-plus.syncConfig.syncEditorOnPreviewScroll","syncEditorOnPreviewScroll"),Go(e,"markdown-preview-plus.mathConfig.enableLatexRenderingByDefault","enableLatexRenderingByDefault"),Go(e,"markdown-preview-plus.mathConfig.latexRenderer","latexRenderer"),Go(e,"markdown-preview-plus.mathConfig.numberEquations","numberEquations"),Go(e,"markdown-preview-plus.markdownItConfig.useLazyHeaders","useLazyHeaders"),Go(e,"markdown-preview-plus.markdownItConfig.useCheckBoxes","useCheckBoxes"),Go(e,"markdown-preview-plus.markdownItConfig.useEmoji","useEmoji"),Go(e,"markdown-preview-plus.markdownItConfig.useToc","useToc"),Go(e,"markdown-preview-plus.markdownItConfig.inlineMathSeparators","inlineMathSeparators"),Go(e,"markdown-preview-plus.markdownItConfig.blockMathSeparators","blockMathSeparators"),Go(e,"markdown-preview-plus.pandocConfig.useNativePandocCodeStyles","useNativePandocCodeStyles"),Go(e,"markdown-preview-plus.pandocConfig.pandocPath","pandocPath"),Go(e,"markdown-preview-plus.pandocConfig.pandocFilters","pandocFilters"),Go(e,"markdown-preview-plus.pandocConfig.pandocArguments","pandocArguments"),Go(e,"markdown-preview-plus.pandocConfig.pandocMarkdownFlavor","pandocMarkdownFlavor"),Go(e,"markdown-preview-plus.pandocConfig.pandocBibliography","pandocBibliography"),Go(e,"markdown-preview-plus.pandocConfig.pandocRemoveReferences","pandocRemoveReferences"),Go(e,"markdown-preview-plus.pandocConfig.pandocBIBFile","pandocBIBFile"),Go(e,"markdown-preview-plus.pandocConfig.pandocBIBFileFallback","pandocBIBFileFallback"),Go(e,"markdown-preview-plus.pandocConfig.pandocCSLFile","pandocCSLFile"),Go(e,"markdown-preview-plus.pandocConfig.pandocCSLFileFallback","pandocCSLFileFallback")),t.some((e=>!0===e))};function Yo(e){atom.config.unset(`markdown-preview-plus.${e}`)}function Go(e,t,n){return null!=e[n]&&(atom.config.set(t,e[n]),Yo(n),!0)}Vo.migrateConfig=Jo;var Ko={};Object.defineProperty(Ko,"__esModule",{value:!0});var Xo=async function(e){let t;const n=document.activeElement;try{return await new Promise((n=>{const r=new ss.default({items:e,elementForItem:e=>{const t=document.createElement("li");return t.innerText=e,t},didCancelSelection:()=>{n(void 0)},didConfirmSelection:e=>{n(e)},itemsClassList:["atom-typescript"]});t=atom.workspace.addModalPanel({item:r,visible:!0}),r.focus()}))}finally{t&&t.destroy(),n&&n.focus()}};Ko.selectListView=Xo;var Qo={},Zo=Qo&&Qo.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qo,"__esModule",{value:!0});var ea;const ta=ea={onCopy:"copy",onCut:"cut",onPaste:"paste",onCompositionEnd:"compositionend",onCompositionStart:"compositionstart",onCompositionUpdate:"compositionupdate",onKeyDown:"keydown",onKeyPress:"keypress",onKeyUp:"keyup",onFocus:"focus",onBlur:"blur",onChange:"change",onInput:"input",onSubmit:"submit",onClick:"click",onContextMenu:"contextmenu",onDoubleClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragEnter:"dragenter",onDragExit:"dragexit",onDragLeave:"dragleave",onDragOver:"dragover",onDragStart:"dragstart",onDrop:"drop",onMouseDown:"mousedown",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onSelect:"select",onTouchCancel:"touchcancel",onTouchEnd:"touchend",onTouchMove:"touchmove",onTouchStart:"touchstart",onScroll:"scroll",onWheel:"wheel",onAbort:"abort",onCanPlay:"canplay",onCanPlayThrough:"canplaythrough",onDurationChange:"durationchange",onEmptied:"emptied",onEncrypted:"encrypted",onEnded:"ended",onError:"error",onLoadedData:"loadeddata",onLoadedMetadata:"loadedmetadata",onLoadStart:"loadstart",onPause:"pause",onPlay:"play",onPlaying:"playing",onProgress:"progress",onRateChange:"ratechange",onSeeked:"seeked",onSeeking:"seeking",onStalled:"stalled",onSuspend:"suspend",onTimeUpdate:"timeupdate",onVolumeChange:"volumechange",onWaiting:"waiting",onLoad:"load",onAnimationStart:"animationstart",onAnimationEnd:"animationend",onAnimationIteration:"animationiteration",onTransitionEnd:"transitionend"};var na={};const ra=na=new Set(["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]);function ia(e,t,...n){let r=[];for(let e=0;e<n.length;){const t=n[e];switch(typeof t){case"string":case"number":n[e]={text:t},e++;break;case"object":Array.isArray(t)?n.splice(e,1,...t):t?(t.context||(r.push(t),t.ambiguous&&t.ambiguous.length&&(r=r.concat(t.ambiguous))),e++):n.splice(e,1);break;default:throw new Error(`Invalid child node: ${t}`)}}if(t){for(const e in t){const n=ta[e];n&&(t.on||(t.on={}),t.on[n]=t[e])}t.class&&(t.className=t.class)}return{tag:e,props:t,children:n,ambiguous:r}}const oa=["a","abbr","address","article","aside","audio","b","bdi","bdo","blockquote","body","button","canvas","caption","cite","code","colgroup","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","html","i","iframe","ins","kbd","label","legend","li","main","map","mark","menu","meter","nav","noscript","object","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","u","ul","var","video","area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];for(const e of oa)ia[e]=(t,...n)=>ia(e,t,...n);for(const e of ra)ia[e]=(t,...n)=>ia(e,t,...n);const aa=ia;var sa,ua;const ca=ea;var la={};la=new Map([["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["className","class"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["panose1","panose-1"],["paintOrder","paint-order"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xHeight","x-height"]]);var fa;const da=fa=function(e,t,n,r){n!==t&&("function"==typeof t?t(null):t&&r[t]===e&&delete r[t],"function"==typeof n?n(e):n&&(r[n]=e))};function ha(e,t,n,r,i){if(n)for(var o in n)"ref"!==o&&"on"!==o&&(o in ca||i&&o in i||("dataset"===o?ha(e.dataset,null,n&&n.dataset,null,null):"innerHTML"!==o&&t&&na.has(t.tag)?e.removeAttribute(la.get(o)||o):(e[o]="",delete e[o])));if(i)for(var o in i)if("ref"!==o&&"on"!==o&&!(o in ca)){var a=n&&n[o],s=i[o];"dataset"===o?pa(e.dataset,a,s,!1):"style"===o&&"string"!=typeof s?("string"==typeof a&&(e.style="",a=null),pa(e.style,a,s,!0)):"attributes"===o?va(e,a,s):s!==a&&("innerHTML"!==o&&r&&na.has(r.tag)?e.setAttribute(la.get(o)||o,s):r&&"input"===r.tag&&"value"===o&&e[o]===s||(e[o]=s))}}function pa(e,t,n,r){if(t)for(var i in t)n&&i in n||(r?e[i]="":delete e[i]);if(n)for(var i in n){const r=t&&t[i],o=n[i];o!==r&&(e[i]=o)}}function va(e,t,n){if(t)for(var r in t)n&&r in n||e.removeAttribute(r);if(n)for(var r in n){const i=t&&t[r],o=n[r];o!==i&&e.setAttribute(r,o)}}const ma=ua=function(e,t,n,r){const i=t&&t.props,o=n.props;let a,s;r&&(a=r.refs,s=r.listenerContext),ha(e,t,i,n,o),a&&da(e,i&&i.ref,o&&o.ref,a),function(e,t,n,r){const i=t&&t.props&&t.props.on,o=n.props&&n.props.on;for(const n in i)if(!o||!(n in o)){let r;r=t&&t.boundListeners&&t.boundListeners[n]?t.boundListeners[n]:i[n],e.removeEventListener(n,r)}for(const a in o){const s=i&&i[a],u=o[a];if(u!==s){if(s){let n;n=t&&t.boundListeners&&t.boundListeners[a]?t.boundListeners[a]:s,e.removeEventListener(a,n)}if(u){let t;r?(t=u.bind(r),n.boundListeners||(n.boundListeners={}),n.boundListeners[a]=t):t=u,e.addEventListener(a,t)}}}}(e,t,n,s)};function ga(e,t){let n;if(null!=e.text)n=document.createTextNode(e.text);else{const{tag:r,children:i}=e;let{props:o,context:a}=e;if(a&&(t={refs:a.refs,listenerContext:a}),"function"==typeof r){let a;o&&o.ref&&(a=o.ref);const s=new r(o||{},i);e.component=s,n=s.element,"function"==typeof a?a(s):t&&t.refs&&a&&(t.refs[a]=s)}else na.has(r)?(n=document.createElementNS("http://www.w3.org/2000/svg",r),i&&ya(n,i,t),o&&ma(n,null,e,t)):(n=document.createElement(r),i&&ya(n,i,t),o&&ma(n,null,e,t))}return e.domNode=n,n}function ya(e,t,n){for(let r=0;r<t.length;r++)e.appendChild(ga(t[r],n))}const wa=sa=ga;var ba;const ka=sa;const _a=sa,Sa=ua,xa=fa;function Pa(e,t,n){const r=e.domNode;if(t===e)return r;if(Ma(e,t)){let i;return null!=t.text?(r.nodeValue=t.text,i=r):"function"==typeof t.tag?i=function(e,t,n){const{component:r,props:i}=e;let{props:o,children:a}=t;t.component=r;const s=n&&n.refs;s&&xa(r,i&&i.ref,o&&o.ref,s);return r.update(o||{},a),r.element}(e,t,n):(!function(e,t,n,r){var i,o=0,a=t.length-1,s=t[0],u=t[a],c=0,l=n.length-1,f=n[0],d=n[l];for(;o<=a&&c<=l;)if(s)if(u)if(Ma(s,f))Pa(s,f,r),s=t[++o],f=n[++c];else if(Ma(u,d))Pa(u,d,r),u=t[--a],d=n[--l];else if(Ma(s,d))Pa(s,d,r),e.insertBefore(s.domNode,u.domNode.nextSibling),s=t[++o],d=n[--l];else if(Ma(u,f))Pa(u,f,r),e.insertBefore(u.domNode,s.domNode),u=t[--a],f=n[++c];else{i||(Oa.length>0?(i=Oa.pop()).clear():i=new Map,Ia(i,t,o,a));var h=Ea(f),p=h?i.get(h):null;if(null==p)e.insertBefore(_a(f,r),s.domNode),f=n[++c];else{var v=t[p];Pa(v,f,r),t[p]=void 0,e.insertBefore(v.domNode,s.domNode),f=n[++c]}}else u=t[--a];else s=t[++o];if(o>a){var m=n[l+1]?n[l+1].domNode:null;for(let t=c;t<=l;t++)e.insertBefore(_a(n[t],r),m)}else if(c>l)for(let e=o;e<=a;e++){var g=t[e];g&&Ca(g,r&&r.refs)}i&&Oa.push(i)}(r,e.children,t.children,n),Sa(r,e,t,n),i=r),t.domNode=i,i!==r&&r.parentNode&&r.parentNode.replaceChild(i,r),i}{const i=r.parentNode,o=r.nextSibling;Ca(e,n&&n.refs);const a=_a(t,n);return i&&i.insertBefore(a,o),t.domNode=a,a}}let Oa=[new Map,new Map,new Map,new Map];function Ca(e,t,n=!0){const{domNode:r,props:i,children:o,component:a}=e,s=i&&i.ref;if(a)"function"==typeof s?s(null):t&&s&&t[s]===a&&delete t[s],a.destroy&&a.destroy();else if("function"==typeof s?s(null):t&&s&&t[s]===r&&delete t[s],o)for(let e=0;e<o.length;e++)Ca(o[e],t,!1);n&&r.remove()}function Ma(e,t){return Ea(e)===Ea(t)&&e.tag===t.tag}function Ea(e){return e.props?e.props.key:void 0}function Ia(e,t,n,r){for(let i=n;i<=r;i++){const n=Ea(t[i]);n&&e.set(n,i)}return e}const ja=Pa;const Aa=class{constructor(){this.updateRequests=[],this.readRequests=[],this.pendingAnimationFrame=null,this.performUpdates=this.performUpdates.bind(this),this.performingUpdates=!1}updateDocument(e){this.updateRequests.push(e),this.pendingAnimationFrame||(this.pendingAnimationFrame=window.requestAnimationFrame(this.performUpdates))}readDocument(e){this.readRequests.push(e),this.pendingAnimationFrame||(this.pendingAnimationFrame=window.requestAnimationFrame(this.performUpdates))}getNextUpdatePromise(){return this.nextUpdatePromise||(this.nextUpdatePromise=new Promise((e=>{this.resolveNextUpdatePromise=e}))),this.nextUpdatePromise}performUpdates(){for(;this.updateRequests.length>0;)this.updateRequests.shift()();for(this.pendingAnimationFrame=null;this.readRequests.length>0;)this.readRequests.shift()();if(this.nextUpdatePromise){let e=this.resolveNextUpdatePromise;this.nextUpdatePromise=null,this.resolveNextUpdatePromise=null,e()}}};let La=null;var Ta=function(){return La||(La=new Aa),La};const Na=new WeakSet;let Ra=0,Fa=0;function Da(e){return null!=e&&!1!==e}function Ba(e,t){t.context=e,t.ambiguous&&(t.ambiguous.forEach((t=>{t.context=e})),delete t.ambiguous)}function Wa(e,t=!0){if(!Da(e.virtualNode))throw new Error(`${e.constructor?e.constructor.name+" instance":e} is not associated with a valid virtualNode. Perhaps this component was never initialized?`);if(null==e.element)throw new Error(`${e.constructor?e.constructor.name+" instance":e} is not associated with a DOM element. Perhaps this component was never initialized?`);let n=e.render();if(!Da(n)){const t=e.constructor&&e.constructor.name?" in "+e.constructor.name:"";throw new Error("invalid falsy value "+n+" returned from render()"+t)}Ba(e,n),Ra++;let r=e.virtualNode,i=e.element,o=ja(r,n,{refs:e.refs,listenerContext:e});if(e.virtualNode=n,o!==i&&!t)throw new Error("The root node type changed on update, but the update was performed with the replaceNode option set to false");e.element=o,"function"==typeof e.writeAfterUpdate&&e.writeAfterUpdate(),"function"==typeof e.readAfterUpdate&&Ta().readDocument((function(){e.readAfterUpdate()})),Ra--}function $a(e,t=!0){Fa++,za(e.virtualNode),1===Fa&&t&&e.element.remove(),Fa--}function za(e){e.component&&"function"==typeof e.component.destroy?e.component.destroy():e.children&&e.children.forEach(za)}const Ua=Zo({dom:aa,render:wa,initialize:(ba={initialize:function(e){if("function"!=typeof e.update)throw new Error("Etch components must implement `update(props, children)`.");let t=e.render();if(!Da(t)){let n=e.constructor&&e.constructor.name?" in "+e.constructor.name:"";throw new Error("invalid falsy value "+t+" returned from render()"+n)}Ba(e,t),e.refs={},e.virtualNode=t,e.element=ka(e.virtualNode,{refs:e.refs,listenerContext:e})},update:function(e,t=!0){if(Ra>0)return Wa(e,t),Promise.resolve();let n=Ta();return Na.has(e)||(Na.add(e),n.updateDocument((function(){Na.delete(e),Wa(e,t)}))),n.getNextUpdatePromise()},updateSync:Wa,destroy:function(e,t=!0){if(Ra>0||Fa>0)return $a(e,t),Promise.resolve();let n=Ta();return n.updateDocument((function(){$a(e,t)})),n.getNextUpdatePromise()},destroySync:$a}).initialize,update:ba.update,updateSync:ba.updateSync,destroy:ba.destroy,destroySync:ba.destroySync,setScheduler:function(e){La=e},getScheduler:Ta}),qa=Ua.default.dom;var Ha,Va,Ja,Ya={},Ga=!1;function Ka(){return Ga||(Ga=!0,function(){var e,t;e=_,Ha=function(t,n,r){var i,o,a,s,u;for(o=t.length-1;t[o]===e;)o--;for(u=0,a=o,i=null;o>=0;)t[o]===e?(u++,null==i&&(i=t.substring(o+1,a+1))):0===o&&(a<t.length-1?null==i&&(i=t.substring(0,a+1)):null==i&&(i=t)),o--;return i===t?r*=2:i&&(r+=Va(i,n)),s=u+1,r*(.01*Math.max(1,10-s))},Ja.basenameScore=Ha,Va=function(n,r){var i,o,a,s,u,c,l,f,d,h,p,v;if(n===r)return 1;if(t(n,r))return 1;for(h=0,l=r.length,d=n.length,a=0,s=0;a<l;){if(i=r[a++],u=n.indexOf(i.toLowerCase()),p=n.indexOf(i.toUpperCase()),-1===(c=Math.min(u,p))&&(c=Math.max(u,p)),-1===(s=c))return 0;o=.1,n[s]===i&&(o+=.1),0===s||n[s-1]===e?o+=.8:"-"!==(v=n[s-1])&&"_"!==v&&" "!==v||(o+=.7),n=n.substring(s+1,d),h+=o}return((f=h/l)*(l/d)+f)/2},Ja.score=Va,t=function(t,n){if(t[t.length-n.length-1]===e)return t.lastIndexOf(n)===t.length-n.length}}.call(Ja={})),Ja}var Xa,Qa=!1;function Za(){return Qa||(Qa=!0,function(){var e,t,n;t=Ka(),e=function(e){return e.candidate},n=function(e,t){return t.score-e.score},Xa=function(r,i,o,a){var s,u,c,l,f,d,h,p,v;if(u=(v=null!=a?a:{}).key,c=v.maxResults,i){for(f=[],h=0,p=r.length;h<p;h++)s=r[h],(d=null!=u?s[u]:s)&&(l=t.score(d,i,o),o||(l=t.basenameScore(d,i,l)),l>0&&f.push({candidate:s,score:l}));f.sort(n),r=f.map(e)}return null!=c&&(r=r.slice(0,c)),r}}.call(Xa={})),Xa}var es,ts,ns,rs=!1;function is(){return rs||(rs=!0,function(){var e;e=_,es=function(t,n){var r,i,o;for(i=t.length-1;t[i]===e;)i--;for(o=i,r=null;i>=0;)t[i]===e?null==r&&(r=t.substring(i+1,o+1)):0===i&&(o<t.length-1?null==r&&(r=t.substring(0,o+1)):null==r&&(r=t)),i--;return ts(r,n,t.length-r.length)},ns.basenameMatch=es,ts=function(e,t,n){var r,i,o,a,s,u,c,l,f,d;if(null==n&&(n=0),e===t)return function(){d=[];for(var t=n,r=n+e.length;n<=r?t<r:t>r;n<=r?t++:t--)d.push(t);return d}.apply(this);for(c=t.length,l=e.length,i=0,o=0,s=[];i<c;){if(r=t[i++],a=e.indexOf(r.toLowerCase()),f=e.indexOf(r.toUpperCase()),-1===(u=Math.min(a,f))&&(u=Math.max(a,f)),-1===(o=u))return[];s.push(n+o),n+=o+1,e=e.substring(o+1,l)}return s},ns.match=ts}.call(ns={})),ns}(function(){var e,t,n,r,i;i=Ka(),n=Za(),r=is(),e=_,t=/\ /g,Ya={filter:function(r,i,o){var a;return i&&(a=-1!==i.indexOf(e),i=i.replace(t,"")),n(r,i,a,o)},score:function(n,r){var o,a;return n&&r?n===r?2:(o=-1!==r.indexOf(e),r=r.replace(t,""),a=i.score(n,r),o||(a=i.basenameScore(n,r,a)),a):0},match:function(n,i){var o,a,s,u,c,l;if(!n)return[];if(!i)return[];if(n===i)return function(){l=[];for(var e=0,t=n.length;0<=t?e<t:e>t;0<=t?e++:e--)l.push(e);return l}.apply(this);if(u=-1!==i.indexOf(e),i=i.replace(t,""),s=r.match(n,i),!u)for(o=r.basenameMatch(n,i),s=s.concat(o).sort((function(e,t){return e-t})),c=null,a=0;a<s.length;)a&&c===s[a]?s.splice(a,1):(c=s[a],a++);return s}}}).call(Ya);const os=Zo(Ya);Qo=class{constructor(e){this.props=e,this.props.hasOwnProperty("initialSelectionIndex")||(this.props.initialSelectionIndex=0),e.initiallyVisibleItemCount&&this.initializeVisibilityObserver(),this.computeItems(!1),this.disposables=new v,Ua.default.initialize(this),this.element.classList.add("select-list"),this.disposables.add(this.refs.queryEditor.onDidChange(this.didChangeQuery.bind(this))),e.skipCommandsRegistration||this.disposables.add(this.registerAtomCommands());const t=this.refs.queryEditor.element,n=this.didLoseFocus.bind(this);t.addEventListener("blur",n),this.didClickItemsList=!1,this.element.addEventListener("mousedown",(e=>{e.target===this.refs.items&&(this.didClickItemsList=!0)})),this.disposables.add(new w((()=>{t.removeEventListener("blur",n)})))}static setScheduler(e){Ua.default.setScheduler(e)}static getScheduler(){return Ua.default.getScheduler()}initializeVisibilityObserver(){this.visibilityObserver=new IntersectionObserver((e=>{for(const t of e)if(t.intersectionRatio>0){const e=t.target;this.visibilityObserver.unobserve(e);const n=Array.from(this.refs.items.children).indexOf(e);n>=0&&this.renderItemAtIndex(n)}}))}focus(){this.refs.queryEditor.element.focus()}didLoseFocus(e){this.didClickItemsList||this.element.contains(e.relatedTarget)?(this.didClickItemsList=!1,this.refs.queryEditor.element.focus()):document.hasFocus()&&this.cancelSelection()}reset(){this.refs.queryEditor.setText("")}destroy(){return this.disposables.dispose(),this.visibilityObserver&&this.visibilityObserver.disconnect(),Ua.default.destroy(this)}registerAtomCommands(){return atom.commands.add(this.element,{"core:move-up":e=>{this.selectPrevious(),e.stopPropagation()},"core:move-down":e=>{this.selectNext(),e.stopPropagation()},"core:move-to-top":e=>{this.selectFirst(),e.stopPropagation()},"core:move-to-bottom":e=>{this.selectLast(),e.stopPropagation()},"core:confirm":e=>{this.confirmSelection(),e.stopPropagation()},"core:cancel":e=>{this.cancelSelection(),e.stopPropagation()}})}update(e){let t=!1;return"items"in e&&(this.props.items=e.items,t=!0),"maxResults"in e&&(this.props.maxResults=e.maxResults,t=!0),"filter"in e&&(this.props.filter=e.filter,t=!0),"filterQuery"in e&&(this.props.filterQuery=e.filterQuery,t=!0),"query"in e&&(this.refs.queryEditor.setText(e.query),t=!1),"selectQuery"in e&&(e.selectQuery?this.refs.queryEditor.selectAll():this.refs.queryEditor.clearSelections()),"order"in e&&(this.props.order=e.order),"emptyMessage"in e&&(this.props.emptyMessage=e.emptyMessage),"errorMessage"in e&&(this.props.errorMessage=e.errorMessage),"infoMessage"in e&&(this.props.infoMessage=e.infoMessage),"loadingMessage"in e&&(this.props.loadingMessage=e.loadingMessage),"loadingBadge"in e&&(this.props.loadingBadge=e.loadingBadge),"itemsClassList"in e&&(this.props.itemsClassList=e.itemsClassList),"initialSelectionIndex"in e&&(this.props.initialSelectionIndex=e.initialSelectionIndex),t&&this.computeItems(),Ua.default.update(this)}render(){return qa.div({},qa(b,{ref:"queryEditor",mini:!0}),this.renderLoadingMessage(),this.renderInfoMessage(),this.renderErrorMessage(),this.renderItems())}renderItems(){if(this.items.length>0){const e=["list-group"].concat(this.props.itemsClassList||[]).join(" ");return this.visibilityObserver&&Ua.default.getScheduler().updateDocument((()=>{Array.from(this.refs.items.children).slice(this.props.initiallyVisibleItemCount).forEach((e=>{this.visibilityObserver.observe(e)}))})),this.listItems=this.items.map(((e,t)=>{const n=this.getSelectedItem()===e,r=!this.props.initiallyVisibleItemCount||t<this.props.initiallyVisibleItemCount;return qa(as,{element:this.props.elementForItem(e,{selected:n,index:t,visible:r}),selected:n,onclick:()=>this.didClickItem(t)})})),qa.ol({className:e,ref:"items"},...this.listItems)}return!this.props.loadingMessage&&this.props.emptyMessage?qa.span({ref:"emptyMessage"},this.props.emptyMessage):""}renderErrorMessage(){return this.props.errorMessage?qa.span({ref:"errorMessage"},this.props.errorMessage):""}renderInfoMessage(){return this.props.infoMessage?qa.span({ref:"infoMessage"},this.props.infoMessage):""}renderLoadingMessage(){return this.props.loadingMessage?qa.div({className:"loading"},qa.span({ref:"loadingMessage",className:"loading-message"},this.props.loadingMessage),this.props.loadingBadge?qa.span({ref:"loadingBadge",className:"badge"},this.props.loadingBadge):""):""}getQuery(){return this.refs&&this.refs.queryEditor?this.refs.queryEditor.getText():""}getFilterQuery(){return this.props.filterQuery?this.props.filterQuery(this.getQuery()):this.getQuery()}didChangeQuery(){this.props.didChangeQuery&&this.props.didChangeQuery(this.getFilterQuery()),this.computeItems()}didClickItem(e){this.selectIndex(e),this.confirmSelection()}computeItems(e){this.listItems=null,this.visibilityObserver&&this.visibilityObserver.disconnect();const t=this.props.filter||this.fuzzyFilter.bind(this);this.items=t(this.props.items.slice(),this.getFilterQuery()),this.props.order&&this.items.sort(this.props.order),this.props.maxResults&&(this.items=this.items.slice(0,this.props.maxResults)),this.selectIndex(this.props.initialSelectionIndex,e)}fuzzyFilter(e,t){if(0===t.length)return e;{const n=[];for(const r of e){const e=this.props.filterKeyForItem?this.props.filterKeyForItem(r):r,i=os.default.score(e,t);i>0&&n.push({item:r,score:i})}return n.sort(((e,t)=>t.score-e.score)),n.map((e=>e.item))}}getSelectedItem(){return void 0===this.selectionIndex?null:this.items[this.selectionIndex]}renderItemAtIndex(e){const t=this.items[e],n=this.getSelectedItem()===t,r=this.listItems[e].component;this.visibilityObserver&&this.visibilityObserver.unobserve(r.element),r.update({element:this.props.elementForItem(t,{selected:n,index:e,visible:!0}),selected:n,onclick:()=>this.didClickItem(e)})}selectPrevious(){return void 0===this.selectionIndex?this.selectLast():this.selectIndex(this.selectionIndex-1)}selectNext(){return void 0===this.selectionIndex?this.selectFirst():this.selectIndex(this.selectionIndex+1)}selectFirst(){return this.selectIndex(0)}selectLast(){return this.selectIndex(this.items.length-1)}selectNone(){return this.selectIndex(void 0)}selectIndex(e,t=!0){e>=this.items.length?e=0:e<0&&(e=this.items.length-1);const n=this.selectionIndex;return this.selectionIndex=e,void 0!==e&&this.props.didChangeSelection&&this.props.didChangeSelection(this.getSelectedItem()),t?this.listItems?(n>=0&&this.renderItemAtIndex(n),e>=0&&this.renderItemAtIndex(e),Ua.default.getScheduler().getNextUpdatePromise()):Ua.default.update(this):Promise.resolve()}selectItem(e){const t=this.items.indexOf(e);if(-1===t)throw new Error("Cannot select the specified item because it does not exist.");return this.selectIndex(t)}confirmSelection(){const e=this.getSelectedItem();null!=e?this.props.didConfirmSelection&&this.props.didConfirmSelection(e):this.props.didConfirmEmptySelection&&this.props.didConfirmEmptySelection()}cancelSelection(){this.props.didCancelSelection&&this.props.didCancelSelection()}};class as{constructor(e){this.mouseDown=this.mouseDown.bind(this),this.mouseUp=this.mouseUp.bind(this),this.didClick=this.didClick.bind(this),this.selected=e.selected,this.onclick=e.onclick,this.element=e.element,this.element.addEventListener("mousedown",this.mouseDown),this.element.addEventListener("mouseup",this.mouseUp),this.element.addEventListener("click",this.didClick),this.selected&&this.element.classList.add("selected"),this.domEventsDisposable=new w((()=>{this.element.removeEventListener("mousedown",this.mouseDown),this.element.removeEventListener("mouseup",this.mouseUp),this.element.removeEventListener("click",this.didClick)})),Ua.default.getScheduler().updateDocument(this.scrollIntoViewIfNeeded.bind(this))}mouseDown(e){e.preventDefault()}mouseUp(e){e.preventDefault()}didClick(e){e.preventDefault(),this.onclick()}destroy(){this.element.remove(),this.domEventsDisposable.dispose()}update(e){this.element.removeEventListener("mousedown",this.mouseDown),this.element.removeEventListener("mouseup",this.mouseUp),this.element.removeEventListener("click",this.didClick),this.element.parentNode.replaceChild(e.element,this.element),this.element=e.element,this.element.addEventListener("mousedown",this.mouseDown),this.element.addEventListener("mouseup",this.mouseUp),this.element.addEventListener("click",this.didClick),e.selected&&this.element.classList.add("selected"),this.selected=e.selected,this.onclick=e.onclick,Ua.default.getScheduler().updateDocument(this.scrollIntoViewIfNeeded.bind(this))}scrollIntoViewIfNeeded(){this.selected&&this.element.scrollIntoViewIfNeeded(!1)}}var ss=function(e){return e&&e.__esModule?e:{default:e}}(Qo);var us=hs(Xi),cs={};Object.defineProperty(cs,"__esModule",{value:!0});var ls=void 0;cs.config=ls;const fs=[{value:"github",description:"Light (Github.com)"},{value:"default",description:"Match Atom"}];function ds(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(ds=function(e){return e?n:t})(e)}function hs(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=ds(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}let ps,vs;async function ms(e){const t=M.MarkdownPreviewView.viewForElement(e.currentTarget);if(!t)return;const n=atom.workspace.paneForItem(t);n?await n.destroyItem(t):t.destroy()}async function gs(e){return function(e){const t=(0,M.viewForEditor)(e);if(!t)return!1;const n=atom.workspace.paneForItem(t);if(n){if(t!==n.getActiveItem())return n.activateItem(t),!0;zo.handlePromise(n.destroyItem(t))}else{const e=no.BrowserWindowHandler.windowForView(t);if(e&&!e.isFocused())return e.focus(),!0;t.destroy()}return!0}(e)?void 0:ys(e)}async function ys(e){return(0,M.openPreviewPane)((0,M.createEditorView)(e))}async function ws(e){const{currentTarget:t}=e,n=t.querySelector(".entry.file.selected .name").dataset.path;if(!n)return void e.abortKeyBinding();const r=$o.extname(n).substr(1);if(zo.atomConfig().extensions.includes(r)){for(const e of atom.workspace.getTextEditors())if(e.getPath()===n)return void await ys(e);await atom.workspace.open(`markdown-preview-plus://file/${encodeURI(n)}`,{searchAllPanes:!0})}else e.abortKeyBinding()}async function bs(e){const t=zo.atomConfig(),n=t.mathConfig.enableLatexRenderingByDefault,r=t.style,i=e.getSelectedText()||e.getText();await zo.copyHtml(i,e.getPath(),n,r)}function ks(e){let t;return function(n){if(!ps)return;t&&(t.dispose(),ps.remove(t)),t=new v;const r={};e(n,t,r),t.add(atom.contextMenu.add(r)),ps.add(t)}}function _s(e,t,n){for(const t of e){n[`.tree-view .file .name[data-name$=".${t}"]`]=[{label:"Markdown Preview",command:"markdown-preview-plus:preview-file"},{label:"Make PDF",command:"markdown-preview-plus:make-pdf"}]}}function Ss(e,t,n){for(const r of e){const e=`atom-text-editor[data-grammar="${r.replace(/\./g," ")}"]`;t.add(atom.commands.add(e,{"markdown-preview-plus:toggle":e=>{zo.handlePromise(gs(e.currentTarget.getModel()))},"markdown-preview-plus:copy-html":e=>{zo.handlePromise(bs(e.currentTarget.getModel()))}})),n[e]=[{label:"Sync Preview",command:"markdown-preview-plus:sync-preview"},{label:"Copy Markdown as HTML",command:"markdown-preview-plus:copy-html"}]}}async function xs(e){const{currentTarget:t}=e,n=t.querySelectorAll(".entry.file.selected .name");const r=zo.atomConfig().extensions,i=Array.from(n).map((e=>e.dataset.path)).filter((e=>void 0!==e&&r.includes($o.extname(e).substr(1)))).map((async function(e){if(void 0===e)return;const t=new g(e),n=await t.read();if(null===n)return;const r=e+".pdf",i=new g(r);!await i.exists()||zo.atomConfig().saveConfig.makePDFOverwrite?await us.saveAsPDF(n,e,void 0,zo.atomConfig().mathConfig.enableLatexRenderingByDefault,r):atom.notifications.addInfo(`${i.getBaseName()} exists, will not overwrite`)}));0!==i.length?await Promise.all(i):e.abortKeyBinding()}function Ps(e){if(!e.startsWith("markdown-preview-plus://"))return;try{var t=new URL(e)}catch(t){return void console.error(t,e)}if("markdown-preview-plus:"!==t.protocol)return;if(!t.pathname)return;let n,r;try{if(t.pathname.startsWith("//file/"))n="file",r=decodeURI(t.pathname.slice(7));else{if(!t.pathname.startsWith("//editor/"))throw new Error(`Tried to open markdown-preview-plus with uri ${e}. This is not supported. Please report this error.`);n="editor",r=decodeURI(t.pathname.slice(9))}}catch(e){return void console.error(e)}if("file"===n)return(0,M.createFileView)(r);if("editor"===n){const e=parseInt(r,10),t=atom.workspace.getTextEditors().find((t=>t.id===e));return void 0===t?void atom.notifications.addWarning(`Markdown-preview-plus: Tried to open preview for editor with id ${e}, which does not exist`):(0,M.createEditorView)(t)}throw new Error(`Reached "impossible" state in opener while handling ${e}. Please report this error.`)}function Os(e){var t,n;e?null===(t=vs)||void 0===t||t.removeItems():null===(n=vs)||void 0===n||n.addButton({icon:"markdown",callback:"markdown-preview-plus:toggle",tooltip:"Markdown Preview"})}ls={grammars:{title:"Markdown Grammars",description:"Editors using what grammars are considered Markdown",type:"array",default:["source.gfm","source.litcoffee","text.html.basic","text.md","text.plain","text.plain.null-grammar"],order:0,items:{type:"string"}},extensions:{type:"array",title:"Markdown file extensions",description:"Which files are considered Markdown",default:["markdown","md","mdown","mkd","mkdown","ron","txt"],order:1,items:{type:"string"}},disableToolBarIntegration:{title:"Disable Tool Bar integration",description:"Do not add the preview button to tool bar (only relevant if [tool-bar](https://atom.io/packages/tool-bar) package is installed)",type:"boolean",default:!1,order:.5},style:{title:"Overall preview style",type:"string",enum:fs,default:"default",order:2},syntaxThemeName:{title:"Syntax theme for code blocks",description:"If not empty, will try to use the given syntax theme for code blocks in preview",type:"string",default:"",order:2.5},importPackageStyles:{title:"Packages that can affect preview rendering",description:"A list of Atom package names that can affect preview style, comma-separated. A special value of `*` (star) will import all Atom styles into the preview, use with care. This does not affect exported HTML",type:"array",items:{type:"string"},default:["fonts"],order:2.6},codeTabWidth:{title:"Tab width for code blocks",description:"How to render tab character in code blocks; 0 means use Atom global setting",type:"integer",default:0,minimum:0,order:2.7},renderer:{type:"string",default:"markdown-it",title:"Renderer backend",enum:["markdown-it","pandoc"],order:3},richClipboard:{type:"boolean",default:!0,title:"Use rich clipboard",description:"Copy rich text to clipboard in addition to raw HTML when using copy html commands",order:4},previewConfig:{title:"Preview Behaviour",order:10,type:"object",properties:{liveUpdate:{title:"Live Update",type:"boolean",default:!0,order:10},diffMethod:{title:"Diff Method",description:"Advanced diffing method selection when updating the preview. None is obviously fastest, but inaccurate; heuristic is reasonably fast and should work most of the time; myers uses classic min-diff algoritm, but can be slow on large documents",type:"string",enum:["none","heuristic","myers"],default:"heuristic",order:15},highlighter:{title:"Code Highlighter",description:"What is used for highlighting code in code blocks. `none` is no highlighting, `legacy` is fast, but only supports legacy textmate grammars. `tree-sitter-compatible` uses Atom's internal highlighting API, and hence is compatible with tree-sitter grammars,  but it can be slower than `legacy` and is not as well-tested",type:"string",enum:["none","legacy","tree-sitter-compatible"],default:"tree-sitter-compatible",order:15},previewSplitPaneDir:{title:"Direction to load the preview in split pane",type:"string",default:"right",enum:["down","right","none"],order:20},previewDock:{title:"Open preview in dock",type:"string",default:"center",enum:["left","right","bottom","center"],order:25},closePreviewWithEditor:{title:"Close preview when editor closes",type:"boolean",default:!0,order:26},activatePreviewWithEditor:{title:"Bring up preview when editor activates",type:"boolean",default:!1,order:27},nativePageScrollKeys:{title:"Use native scroll keys in preview",description:"Will use arrow keys, page up, page down, home, end and space for native navigation in preview. The upside is smoother scroll behaviour. The downside is that when this option is enabled, these keys will be invisible to Atom when preview is focused, so those can not be used in keymap with preview-focused commands. Also unlike non-native commands, these are non-rebindable.",type:"boolean",default:!0,order:27.5},shellOpenFileExtensions:{title:"Always open links to these file types externally",description:"This is a comma-separated list of file name extensions that should always be opened with an external program. For example, if you want to always open PDF files (presumably named `something.pdf`) in system PDF viewer, add `pdf` here.",type:"array",default:["odt","doc","docx","ods","xls","xlsx","odp","ppt","pptx","zip","rar","7z","gz","xz","bz2","tar","tgz","txz","tbz2"],order:28,items:{type:"string"}}}},saveConfig:{type:"object",title:"Export Behaviour",order:15,properties:{mediaOnSaveAsHTMLBehaviour:{title:"When saving as HTML, media paths will be",description:"Media includes images, audio and video. relative src attributes of img, audio, video tags can either be rewritten to use absolute file paths, paths relative to save location, or be left unaltered",type:"string",default:"relativized",enum:["relativized","absolutized","untouched"],order:10},mediaOnCopyAsHTMLBehaviour:{title:"When copying as HTML, media paths will be",description:"Media includes images, audio and video. relative src attributes of img, audio, video tags can either be rewritten to use absolute file paths, paths relative to save location, or be left unaltered",type:"string",default:"untouched",enum:["relativized","absolutized","untouched"],order:15},defaultSaveFormat:{title:"Default format to save as",type:"string",order:20,enum:["html","pdf"],default:"html"},openOnSave:{type:"object",title:"Open after saving",order:21,properties:{html:{title:"HTML",type:"boolean",default:!0,order:10},pdf:{title:"PDF",type:"boolean",default:!1,order:20}}},makePDFOverwrite:{type:"boolean",title:"`Make PDF` on Tree View will overwrite files without prompt",order:22,default:!1},saveToPDFOptions:{title:"Save to PDF options",type:"object",order:25,properties:{latexRenderer:{title:"Math Renderer",description:"LaTeX Math renderer for PDF export; HTML-CSS usually looks better",type:"string",enum:["Same as live preview","HTML-CSS","SVG"],default:"Same as live preview",order:5},marginsType:{title:"Margins Type",type:"integer",enum:[{value:0,description:"Default margins"},{value:1,description:"No margins"},{value:2,description:"Minimum margins"}],default:0,order:10},pageSize:{title:"Page Size",enum:["A3","A4","A5","Legal","Letter","Tabloid","Custom"],type:"string",default:"A4",order:20},customPageSize:{title:"Custom Page Size",description:"Takes effect when Page Size is set to `Custom`. Specified as `<width>x<height>`, where `<height>` and `<width>` are floating-point numbers with `.` (dot) as decimal separator, no thousands separator, and with optional `cm`, `mm` or `in` suffix to indicate units, default is `mm`. For example, A4 is `8.3in x 11.7in` or `210mm x 297mm` or `210 x 297`. Whitespace is ignored.",type:"string",default:"",order:25},landscape:{title:"Page orientation",type:"boolean",enum:[{value:!1,description:"Portrait"},{value:!0,description:"Landscape"}],default:!1,order:26},printBackground:{title:"Render background",description:"Whether to render CSS backgrounds in PDF",type:"boolean",default:!0,order:30},styleOverride:{title:"Export style override",type:"string",enum:[{value:"none",description:"Same as preview"},...fs],default:"github",order:35},printSelectionOnly:{title:"Render only selection",description:"Only render selected document fragment. Experimental",type:"boolean",default:!1,order:40}}}}},syncConfig:{title:"Preview position synchronization behaviour",type:"object",order:20,properties:{syncPreviewOnChange:{title:"Sync preview position when text in editor changes",type:"boolean",default:!1,order:28},syncPreviewOnEditorScroll:{title:"Sync preview position when text editor is scrolled",description:"Note: if both scroll sync options are enabled, the editor has to be in active pane for this option to take effect",type:"boolean",default:!1,order:28.1},syncEditorOnPreviewScroll:{title:"Sync editor position when preview is scrolled",description:"Note: if both scroll sync options are enabled, the preview has to be in active pane for this option to take effect",type:"boolean",default:!1,order:28.2}}},mathConfig:{type:"object",title:"Math Options",order:30,properties:{enableLatexRenderingByDefault:{title:"Enable Math Rendering By Default",type:"boolean",default:!1,order:0},latexRenderer:{title:"Math Renderer",description:"SVG is noticeably faster, but might look worse on some systems",type:"string",enum:["HTML-CSS","SVG"],default:"SVG",order:5},numberEquations:{title:"Number equations",description:"Number equations that are in equation environment, etc. Will re-render all math on each math change, which might be undesirable.",type:"boolean",default:!1,order:10},texExtensions:{title:"MathJax TeX extensions",type:"array",default:["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"],order:15,items:{type:"string"}},undefinedFamily:{title:"MathJax `undefinedFamily` (font family)",type:"string",default:"serif",order:20}}},markdownItConfig:{type:"object",title:"Markdown-It Settings",order:40,properties:{breakOnSingleNewline:{title:"Break on single newline",type:"boolean",default:!1,order:0},typographicReplacements:{title:"Typographic Replacements",description:"Replace (R) with ®, (c) with ©, (p) with §, -- with –, enable smart quotes, etc",type:"boolean",default:!0,order:1},useLazyHeaders:{title:"Use Lazy Headers with markdown-it parser",description:"Require no space after headings #",type:"boolean",default:!0,order:5},useCheckBoxes:{title:"Enable CheckBox lists with markdown-it parser",description:"CheckBox lists, like on GitHub",type:"boolean",default:!0,order:10},useEmoji:{title:"Use Emoji with markdown-it parser",description:"Emoji rendering",type:"boolean",default:!0,order:15},useToc:{title:"Use table of contents with markdown-it parser",description:"Replace [[toc]] with autogenerated table of contents",type:"boolean",default:!1,order:20},tocDepth:{title:"Depth of Table of Contents",description:"Maximum header depth that will be included in TOC",type:"integer",default:2,order:22},useImsize:{title:"Allow specifying image size in image title",description:"Allow non-standard syntax for specifying image size via appending `=<width>x<height>` to image spacification, f.ex. `![test](image.png =100x200)`",type:"boolean",default:!0,order:25},useCriticMarkup:{title:"Enable CriticMarkup syntax support",description:"Support is limited to inline only",type:"boolean",default:!1,order:40},useFootnote:{title:"Enable footnotes with markdown-it parser",description:"Render Markdown footnotes a little prettier.",type:"boolean",default:!1,order:45},useAttributes:{title:"Enable attributes",description:"Allow braced `{}` attributes after inline/block elements. Also sets `id` with `#` and `class` with `.`\n\nF.ex.: `*emphasis*{#id-emphasis .class-emphasis data-attribute=emphasis}`\n\n**NOTE:** this is implicitly enabled by bracketed spans and fenced divs.\n\nSee [package page](https://npmjs.com/package/markdown-it-attrs) for more information.",type:"boolean",default:!1,order:50},useSpans:{title:"Enable bracketed spans",description:"**NOTE:** implicitly enables attributes.\n\nSee [package page](https://npmjs.com/package/markdown-it-bracketed-spans) for more information.",type:"boolean",default:!1,order:60},useDivs:{title:"Enable fenced divs",description:"**NOTE:** implicitly enables attributes.\n\nSee [package page](https://npmjs.com/package/markdown-it-container) for more information.",type:"boolean",default:!1,order:70},useDeflist:{title:"Enable definition lists",description:"\n\nSee [package page](https://npmjs.com/package/markdown-it-deflist) for more information.",type:"boolean",default:!1,order:80},useFontmatter:{title:"Enable YAML fontmatter",description:"\n\nSee [package page](https://npmjs.com/package/markdown-it-front-matter) for more information.",type:"boolean",default:!0,order:90},useImplicitFigures:{title:"Enable implicitFigures",description:"\n\nSee [package page](https://npmjs.com/package/markdown-it-implicit-figures) for more information.",type:"boolean",default:!1,order:100},useSubscript:{title:"Enable subscripts",description:"\n\nSee [package page](https://npmjs.com/package/markdown-it-sub) for more information.",type:"boolean",default:!1,order:110},useSuperscript:{title:"Enable superscripts",description:"\n\nSee [package page](https://npmjs.com/package/markdown-it-sup) for more information.",type:"boolean",default:!1,order:120},tableCaptions:{title:"Enable table captions",description:"Table captions as in Pandoc Markdown, e.g. `: caption` or `Table: caption`, etc.",type:"boolean",default:!1,order:125},inlineMathSeparators:{title:"Inline math separators",description:"List of inline math separators in pairs -- first opening, then closing",type:"array",default:["$","$","\\(","\\)"],order:1010,items:{type:"string"}},blockMathSeparators:{title:"Block math separators",description:"List of block math separators in pairs -- first opening, then closing",type:"array",default:["$$","$$","\\[","\\]"],order:1020,items:{type:"string"}},parseDisplayMathInline:{title:"Parse display math inline",description:'Will parse display ("block") math as inline elements, like pandoc',type:"boolean",default:!1,order:1050}}},pandocConfig:{type:"object",title:"Pandoc settings",order:50,properties:{useNativePandocCodeStyles:{title:"Use native Pandoc code block style",type:"boolean",default:!1,description:"Don't convert fenced code blocks to Atom editors when usingPandoc parser",order:0},pandocPath:{type:"string",default:"pandoc",title:"Path to Pandoc executable",description:"Please specify the correct path to your pandoc executable, for example, /usr/bin/pandoc, or C:\\Program Files\\Pandoc\\pandoc.exe",order:5},pandocFilters:{type:"array",default:[],title:"Filters",description:"Comma separated pandoc filters, in order of application. Will be passed via command-line arguments",order:10,items:{type:"string"}},pandocArguments:{type:"array",default:[],title:"Commandline Arguments",description:"Comma separated pandoc arguments e.g. `--smart, --filter=/bin/exe`. Please use long argument names.",order:15,items:{type:"string"}},pandocMarkdownFlavor:{type:"string",default:"markdown-raw_tex+tex_math_single_backslash",title:"Markdown Flavor",description:"Enter the pandoc markdown flavor you want",order:20},pandocBibliography:{type:"boolean",default:!1,title:"Citations (via pandoc-citeproc)",description:"Enable this for bibliography parsing. Note: pandoc-citeproc is applied after other filters specified in Filters, but before other commandline arguments ",order:25},pandocRemoveReferences:{type:"boolean",default:!0,title:"Remove References",description:"Removes references at the end of the HTML preview",order:30},pandocBIBFile:{type:"string",default:"bibliography.bib",title:"Bibliography (bibfile)",description:"Name of bibfile to search for recursively",order:35},pandocBIBFileFallback:{type:"string",default:"",title:"Fallback Bibliography (bibfile)",description:"Full path to fallback bibfile",order:40},pandocCSLFile:{type:"string",default:"custom.csl",title:"Bibliography Style (cslfile)",description:"Name of cslfile to search for recursively",order:45},pandocCSLFileFallback:{type:"string",default:"",title:"Fallback Bibliography Style (cslfile)",description:"Full path to fallback cslfile",order:50}}}},cs.config=ls;
//# sourceMappingURL=main.js.map
